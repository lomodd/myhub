(function(){function a(a,b){return(new Date(b,a+1,0)).getDate()}function b(a,b,c){return function(d,f,g){var h=a(d),i=[];h<d&&b(h);if(g>1)while(h<f){var j=new Date(+h);c(j)%g===0&&i.push(j),b(h)}else while(h<f)i.push(new Date(+h)),b(h);return i}}var c=window.nv||{};c.version="0.0.1a",c.dev=!0,window.nv=c,c.tooltip={},c.utils={},c.models={},c.charts={},c.graphs=[],c.logs={},c.dispatch=d3.dispatch("render_start","render_end"),c.dev&&(c.dispatch.on("render_start",function(a){c.logs.startTime=+(new Date)}),c.dispatch.on("render_end",function(a){c.logs.endTime=+(new Date),c.logs.totalTime=c.logs.endTime-c.logs.startTime,c.log("total",c.logs.totalTime)})),c.log=function(){if(c.dev&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(c.dev&&console.log&&Function.prototype.bind){var a=Function.prototype.bind.call(console.log,console);a.apply(console,arguments)}return arguments[arguments.length-1]},c.render=function(a){a=a||1,c.render.active=!0,c.dispatch.render_start(),setTimeout(function(){var b,d;for(var f=0;f<a&&(d=c.render.queue[f]);f++)b=d.generate(),typeof d.callback==typeof Function&&d.callback(b),c.graphs.push(b);c.render.queue.splice(0,f),c.render.queue.length?setTimeout(arguments.callee,0):(c.render.active=!1,c.dispatch.render_end())},0)},c.render.active=!1,c.render.queue=[],c.addGraph=function(a){typeof arguments[0]==typeof Function&&(a={generate:arguments[0],callback:arguments[1]}),c.render.queue.push(a),c.render.active||c.render()},c.identity=function(a){return a},c.strip=function(a){return a.replace(/(\s|&)/g,"")},d3.time.monthEnd=function(a){return new Date(a.getFullYear(),a.getMonth(),0)},d3.time.monthEnds=b(d3.time.monthEnd,function(b){b.setUTCDate(b.getUTCDate()+1),b.setDate(a(b.getMonth()+1,b.getFullYear()))},function(a){return a.getMonth()}),function(){var a=window.nv.tooltip={};a.show=function(a,b,d,f,g,h){var i=document.createElement("div");i.className="nvtooltip "+(h?h:"xy-tooltip"),d=d||"s",f=f||20;var j=g?g:document.getElementsByTagName("body")[0];i.innerHTML=b,i.style.left=0,i.style.top=0,i.style.opacity=0,j.appendChild(i);var k=parseInt(i.offsetHeight),l=parseInt(i.offsetWidth),m=c.utils.windowSize().width,n=c.utils.windowSize().height,o=window.scrollY,p=window.scrollX,q,r;n=window.innerWidth>=document.body.scrollWidth?n:n-16,m=window.innerHeight>=document.body.scrollHeight?m:m-16;var s=function(a){var b=r;do isNaN(a.offsetTop)||(b+=a.offsetTop);while(a=a.offsetParent);return b},t=function(a){var b=q;do isNaN(a.offsetLeft)||(b+=a.offsetLeft);while(a=a.offsetParent);return b};switch(d){case"e":q=a[0]-l-f,r=a[1]-k/2;var u=t(i),v=s(i);u<p&&(q=a[0]+f>p?a[0]+f:p-u+q),v<o&&(r=o-v+r),v+k>o+n&&(r=o+n-v+r-k);break;case"w":q=a[0]+f,r=a[1]-k/2,u+l>m&&(q=a[0]-l-f),v<o&&(r=o+5),v+k>o+n&&(r=o-k-5);break;case"n":q=a[0]-l/2-5,r=a[1]+f;var u=t(i),v=s(i);u<p&&(q=p+5),u+l>m&&(q=q-l/2+5),v+k>o+n&&(r=o+n-v+r-k);break;case"s":q=a[0]-l/2,r=a[1]-k-f;var u=t(i),v=s(i);u<p&&(q=p+5),u+l>m&&(q=q-l/2+5),o>v&&(r=o)}return i.style.left=q+"px",i.style.top=r+"px",i.style.opacity=1,i.style.position="absolute",i.style.pointerEvents="none",i},a.cleanup=function(){var a=document.getElementsByClassName("nvtooltip"),b=[];while(a.length)b.push(a[0]),a[0].style.transitionDelay="0 !important",a[0].style.opacity=0,a[0].className="nvtooltip-pending-removal";setTimeout(function(){while(b.length){var a=b.pop();a.parentNode.removeChild(a)}},500)}}(),c.utils.windowSize=function(){var a={width:640,height:480};return document.body&&document.body.offsetWidth&&(a.width=document.body.offsetWidth,a.height=document.body.offsetHeight),document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth&&(a.width=document.documentElement.offsetWidth,a.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(a.width=window.innerWidth,a.height=window.innerHeight),a},c.utils.windowResize=function(a){var b=window.onresize;window.onresize=function(c){typeof b=="function"&&b(c),a(c)}},c.utils.getColor=function(a){return arguments.length?Object.prototype.toString.call(a)==="[object Array]"?function(b,c){return b.color||a[c%a.length]}:a:c.utils.defaultColor()},c.utils.defaultColor=function(){var a=d3.scale.category20().range();return function(b,c){return b.color||a[c%a.length]}},c.utils.customTheme=function(a,b,c){b=b||function(a){return a.key},c=c||d3.scale.category20().range();var d=c.length;return function(f,g){var h=b(f);return d||(d=c.length),typeof a[h]!="undefined"?typeof a[h]=="function"?a[h]():a[h]:c[--d]}},c.utils.pjax=function(a,b){function d(d){d3.html(d,function(d){var f=d3.select(b).node();f.parentNode.replaceChild(d3.select(d).select(b).node(),f),c.utils.pjax(a,b)})}d3.selectAll(a).on("click",function(){history.pushState(this.href,this.textContent,this.href),d(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&d(d3.event.state)})},c.models.axis=function(){function a(e){return e.each(function(a){var e=d3.select(this),q=e.selectAll("g.nv-wrap.nv-axis").data([a]),r=q.enter().append("g").attr("class","nvd3 nv-wrap nv-axis"),v=r.append("g"),w=q.select("g");n!==null?b.ticks(n):(b.orient()=="top"||b.orient()=="bottom")&&b.ticks(Math.abs(f.range()[1]-f.range()[0])/100),d3.transition(w).call(b),o=o||b.scale();var x=b.tickFormat();x==null&&(x=o.tickFormat());var y=w.selectAll("text.nv-axislabel").data([g||null]);y.exit().remove();switch(b.orient()){case"top":y.enter().append("text").attr("class","nv-axislabel");var z=f.range().length==2?f.range()[1]:f.range()[f.range().length-1]+(f.range()[1]-f.range()[0]);y.attr("text-anchor","middle").attr("y",0).attr("x",z/2);if(h){var A=q.selectAll("g.nv-axisMaxMin").data(f.domain());A.enter().append("g").attr("class","nv-axisMaxMin").append("text"),A.exit().remove(),A.attr("transform",function(a,b){return"translate("+f(a)+",0)"}).select("text").attr("dy","0em").attr("y",-b.tickPadding()).attr("text-anchor","middle").text(function(a,b){var c=x(a);return(""+c).match("NaN")?"":c}),d3.transition(A).attr("transform",function(a,b){return"translate("+f.range()[b]+",0)"})}break;case"bottom":var B=36,C=30,D=w.selectAll("g").select("text");if(j%360){D.each(function(a,b){var c=this.getBBox().width;c>C&&(C=c)});var E=Math.abs(Math.sin(j*Math.PI/180)),B=(E?E*C:C)+30;D.attr("transform",function(a,b,c){return"rotate("+j+" 0,0)"}).attr("text-anchor",j%360>0?"start":"end")}y.enter().append("text").attr("class","nv-axislabel");var z=f.range().length==2?f.range()[1]:f.range()[f.range().length-1]+(f.range()[1]-f.range()[0]);y.attr("text-anchor","middle").attr("y",B).attr("x",z/2);if(h){var A=q.selectAll("g.nv-axisMaxMin").data([f.domain()[0],f.domain()[f.domain().length-1]]);A.enter().append("g").attr("class","nv-axisMaxMin").append("text"),A.exit().remove(),A.attr("transform",function(a,b){return"translate("+(f(a)+(m?f.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",b.tickPadding()).attr("transform",function(a,b,c){return"rotate("+j+" 0,0)"}).attr("text-anchor",j?j%360>0?"start":"end":"middle").text(function(a,b){var c=x(a);return(""+c).match("NaN")?"":c}),d3.transition(A).attr("transform",function(a,b){return"translate("+(f(a)+(m?f.rangeBand()/2:0))+",0)"})}l&&D.attr("transform",function(a,b){return"translate(0,"+(b%2==0?"0":"12")+")"});break;case"right":y.enter().append("text").attr("class","nv-axislabel"),y.attr("text-anchor",k?"middle":"begin").attr("transform",k?"rotate(90)":"").attr("y",k?-Math.max(c.right,d)+12:-10).attr("x",k?f.range()[0]/2:b.tickPadding());if(h){var A=q.selectAll("g.nv-axisMaxMin").data(f.domain());A.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),A.exit().remove(),A.attr("transform",function(a,b){return"translate(0,"+f(a)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",b.tickPadding()).attr("text-anchor","start").text(function(a,b){var c=x(a);return(""+c).match("NaN")?"":c}),d3.transition(A).attr("transform",function(a,b){return"translate(0,"+f.range()[b]+")"}).select("text").style("opacity",1)}break;case"left":y.enter().append("text").attr("class","nv-axislabel"),y.attr("text-anchor",k?"middle":"end").attr("transform",k?"rotate(-90)":"").attr("y",k?-Math.max(c.left,d)+12:-10).attr("x",k?-f.range()[0]/2:-b.tickPadding());if(h){var A=q.selectAll("g.nv-axisMaxMin").data(f.domain());A.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),A.exit().remove(),A.attr("transform",function(a,b){return"translate(0,"+o(a)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-b.tickPadding()).attr("text-anchor","end").text(function(a,b){var c=x(a);return(""+c).match("NaN")?"":c}),d3.transition(A).attr("transform",function(a,b){return"translate(0,"+f.range()[b]+")"}).select("text").style("opacity",1)}}y.text(function(a){return a}),h&&(b.orient()==="left"||b.orient()==="right")&&(w.selectAll("g").each(function(a,b){d3.select(this).select("text").attr("opacity",1);if(f(a)<f.range()[1]+10||f(a)>f.range()[0]-10)(a>1e-10||a<-1e-10)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0)}),f.domain()[0]==f.domain()[1]&&f.domain()[0]==0&&q.selectAll("g.nv-axisMaxMin").style("opacity",function(a,b){return b?0:1}));if(h&&(b.orient()==="top"||b.orient()==="bottom")){var F=[];q.selectAll("g.nv-axisMaxMin").each(function(a,b){try{b?F.push(f(a)-this.getBBox().width-4):F.push(f(a)+this.getBBox().width+4)}catch(c){b?F.push(f(a)-4):F.push(f(a)+4)}}),w.selectAll("g").each(function(a,b){if(f(a)<F[0]||f(a)>F[1])a>1e-10||a<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove()})}i&&w.selectAll("line.tick").filter(function(a){return!parseFloat(Math.round(a*1e5)/1e6)}).classed("zero",!0),o=f.copy()}),a}var b=d3.svg.axis(),c={top:0,right:0,bottom:0,left:0},d=75,e=60,f=d3.scale.linear(),g=null,h=!0,i=!0,j=0,k=!0,l=!1,m=!1,n=null;b.scale(f).orient("bottom").tickFormat(function(a){return a});var o;return a.axis=b,d3.rebind(a,b,"orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),d3.rebind(a,f,"domain","range","rangeBand","rangeBands"),a.margin=function(b){return arguments.length?(c.top=typeof b.top!="undefined"?b.top:c.top,c.right=typeof b.right!="undefined"?b.right:c.right,c.bottom=typeof b.bottom!="undefined"?b.bottom:c.bottom,c.left=typeof b.left!="undefined"?b.left:c.left,a):c},a.width=function(b){return arguments.length?(d=b,a):d},a.ticks=function(b){return arguments.length?(n=b,a):n},a.height=function(b){return arguments.length?(e=b,a):e},a.axisLabel=function(b){return arguments.length?(g=b,a):g},a.showMaxMin=function(b){return arguments.length?(h=b,a):h},a.highlightZero=function(b){return arguments.length?(i=b,a):i},a.scale=function(c){return arguments.length?(f=c,b.scale(f),m=typeof f.rangeBands=="function",d3.rebind(a,f,"domain","range","rangeBand","rangeBands"),a):f},a.rotateYLabel=function(b){return arguments.length?(k=b,a):k},a.rotateLabels=function(b){return arguments.length?(j=b,a):j},a.staggerLabels=function(b){return arguments.length?(l=b,a):l},a},c.models.historicalBar=function(){function a(c){return c.each(function(a){var c=d-b.left-b.right,e=f-b.top-b.bottom,w=d3.select(this);h.domain(q||d3.extent(a[0].values.map(j).concat(l))),n?h.range([c*.5/a[0].values.length,c*(a[0].values.length-.5)/a[0].values.length]):h.range([0,c]),i.domain(r||d3.extent(a[0].values.map(k).concat(m))).range([e,0]);if(h.domain()[0]===h.domain()[1]||i.domain()[0]===i.domain()[1])singlePoint=!0;h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]-h.domain()[0]*.01,h.domain()[1]+h.domain()[1]*.01]):h.domain([-1,1])),i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]+i.domain()[0]*.01,i.domain()[1]-i.domain()[1]*.01]):i.domain([-1,1]));var x=w.selectAll("g.nv-wrap.nv-bar").data([a[0].values]),y=x.enter().append("g").attr("class","nvd3 nv-wrap nv-bar"),z=y.append("defs"),A=y.append("g"),B=x.select("g");A.append("g").attr("class","nv-bars"),x.attr("transform","translate("+b.left+","+b.top+")"),w.on("click",function(a,b){s.chartClick({data:a,index:b,pos:d3.event,id:g})}),z.append("clipPath").attr("id","nv-chart-clip-path-"+g).append("rect"),x.select("#nv-chart-clip-path-"+g+" rect").attr("width",c).attr("height",e),B.attr("clip-path",o?"url(#nv-chart-clip-path-"+g+")":"");var C=x.select(".nv-bars").selectAll(".nv-bar").data(function(a){return a});C.exit().remove();var D=C.enter().append("rect").attr("x",0).attr("y",function(a,b){return i(Math.max(0,k(a,b)))}).attr("height",function(a,b){return Math.abs(i(k(a,b))-i(0))}).on("mouseover",function(b,c){d3.select(this).classed("hover",!0),s.elementMouseover({point:b,series:a[0],pos:[h(j(b,c)),i(k(b,c))],pointIndex:c,seriesIndex:0,e:d3.event})}).on("mouseout",function(b,c){d3.select(this).classed("hover",!1),s.elementMouseout({point:b,series:a[0],pointIndex:c,seriesIndex:0,e:d3.event})}).on("click",function(a,b){s.elementClick({value:k(a,b),data:a,index:b,pos:[h(j(a,b)),i(k(a,b))],e:d3.event,id:g}),d3.event.stopPropagation()}).on("dblclick",function(a,b){s.elementDblClick({value:k(a,b),data:a,index:b,pos:[h(j(a,b)),i(k(a,b))],e:d3.event,id:g}),d3.event.stopPropagation()});C.attr("fill",function(a,b){return p(a,b)}).attr("class",function(a,b,c){return(k(a,b)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+c+"-"+b}).attr("transform",function(b,d){return"translate("+(h(j(b,d))-c/a[0].values.length*.45)+",0)"}).attr("width",c/a[0].values.length*.9),d3.transition(C).attr("y",function(a,b){return k(a,b)<0?i(0):i(0)-i(k(a,b))<1?i(0)-1:i(k(a,b))}).attr("height",function(a,b){return Math.max(Math.abs(i(k(a,b))-i(0)),1)})}),a}var b={top:0,right:0,bottom:0,left:0},d=960,f=500,g=Math.floor(Math.random()*1e4),h=d3.scale.linear(),i=d3.scale.linear(),j=function(a){return a.x},k=function(a){return a.y},l=[],m=[0],n=!1,o=!0,p=c.utils.defaultColor(),q,r,s=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return a.dispatch=s,a.x=function(b){return arguments.length?(j=b,a):j},a.y=function(b){return arguments.length?(k=b,a):k},a.margin=function(c){return arguments.length?(b.top=typeof c.top!="undefined"?c.top:b.top,b.right=typeof c.right!="undefined"?c.right:b.right,b.bottom=typeof c.bottom!="undefined"?c.bottom:b.bottom,b.left=typeof c.left!="undefined"?c.left:b.left,a):b},a.width=function(b){return arguments.length?(d=b,a):d},a.height=function(b){return arguments.length?(f=b,a):f},a.xScale=function(b){return arguments.length?(h=b,a):h},a.yScale=function(b){return arguments.length?(i=b,a):i},a.xDomain=function(b){return arguments.length?(q=b,a):q},a.yDomain=function(b){return arguments.length?(r=b,a):r},a.forceX=function(b){return arguments.length?(l=b,a):l},a.forceY=function(b){return arguments.length?(m=b,a):m},a.padData=function(b){return arguments.length?(n=b,a):n},a.clipEdge=function(b){return arguments.length?(o=b,a):o},a.color=function(b){return arguments.length?(p=c.utils.getColor(b),a):p},a.id=function(b){return arguments.length?(g=b,a):g},a},c.models.bullet=function(){function a(c){return c.each(function(a,c){var d=k-b.left-b.right,e=l-b.top-b.bottom,m=d3.select(this),p=g.call(this,a,c).slice().sort(d3.descending),q=h.call(this,a,c).slice().sort(d3.descending),v=i.call(this,a,c).slice().sort(d3.descending),w=d3.scale.linear().domain(d3.extent(d3.merge([j,p]))).range(f?[d,0]:[0,d]),x=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(w.range());this.__chart__=w;var y=d3.min(p),z=d3.max(p),A=p[1],B=m.selectAll("g.nv-wrap.nv-bullet").data([a]),C=B.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet"),D=C.append("g"),E=B.select("g");D.append("rect").attr("class","nv-range nv-rangeMax"),D.append("rect").attr("class","nv-range nv-rangeAvg"),D.append("rect").attr("class","nv-range nv-rangeMin"),D.append("rect").attr("class","nv-measure"),D.append("path").attr("class","nv-markerTriangle"),B.attr("transform","translate("+b.left+","+b.top+")");var F=function(a){return Math.abs(x(a)-x(0))},G=function(a){return Math.abs(w(a)-w(0))},H=function(a){return a<0?x(a):x(0)},I=function(a){return a<0?w(a):w(0)};E.select("rect.nv-rangeMax").attr("height",e).attr("width",G(z>0?z:y)).attr("x",I(z>0?z:y)).datum(z>0?z:y),E.select("rect.nv-rangeAvg").attr("height",e).attr("width",G(A)).attr("x",I(A)).datum(A),E.select("rect.nv-rangeMin").attr("height",e).attr("width",G(z)).attr("x",I(z)).attr("width",G(z>0?y:z)).attr("x",I(z>0?y:z)).datum(z>0?y:z),E.select("rect.nv-measure").style("fill",n).attr("height",e/3).attr("y",e/3).attr("width",v<0?w(0)-w(v[0]):w(v[0])-w(0)).attr("x",I(v)).on("mouseover",function(){o.elementMouseover({value:v[0],label:"Current",pos:[w(v[0]),e/2]})}).on("mouseout",function(){o.elementMouseout({value:v[0],label:"Current"})});var J=e/6;q[0]?E.selectAll("path.nv-markerTriangle").attr("transform",function(a){return"translate("+w(q[0])+","+e/2+")"}).attr("d","M0,"+J+"L"+J+","+ -J+" "+ -J+","+ -J+"Z").on("mouseover",function(){o.elementMouseover({value:q[0],label:"Previous",pos:[w(q[0]),e/2]})}).on("mouseout",function(){o.elementMouseout({value:q[0],label:"Previous"})}):E.selectAll("path.nv-markerTriangle").remove(),B.selectAll(".nv-range").on("mouseover",function(a,b){var c=b?b==1?"Mean":"Minimum":"Maximum";o.elementMouseover({value:a,label:c,pos:[w(a),e/2]})}).on("mouseout",function(a,b){var c=b?b==1?"Mean":"Minimum":"Maximum";o.elementMouseout({value:a,label:c})})}),a}var b={top:0,right:0,bottom:0,left:0},d="left",f=!1,g=function(a){return a.ranges},h=function(a){return a.markers},i=function(a){return a.measures},j=[0],k=380,l=30,m=null,n=c.utils.getColor(["#1f77b4"]),o=d3.dispatch("elementMouseover","elementMouseout");return a.dispatch=o,a.orient=function(b){return arguments.length?(d=b,f=d=="right"||d=="bottom",a):d},a.ranges=function(b){return arguments.length?(g=b,a):g},a.markers=function(b){return arguments.length?(h=b,a):h},a.measures=function(b){return arguments.length?(i=b,a):i},a.forceX=function(b){return arguments.length?(j=b,a):j},a.width=function(b){return arguments.length?(k=b,a):k},a.height=function(b){return arguments.length?(l=b,a):l},a.margin=function(c){return arguments.length?(b.top=typeof c.top!="undefined"?c.top:b.top,b.right=typeof c.right!="undefined"?c.right:b.right,b.bottom=typeof c.bottom!="undefined"?c.bottom:b.bottom,b.left=typeof c.left!="undefined"?c.left:b.left,a):b},a.tickFormat=function(b){return arguments.length?(m=b,a):m},a.color=function(b){return arguments.length?(n=c.utils.getColor(b),a):n},a},c.models.bulletChart=function(){function a(c){return c.each(function(d,o){var w=d3.select(this),x=(k||parseInt(w.style("width"))||960)-g.left-g.right,y=l-g.top-g.bottom,z=this;a.update=function(){a(c)},a.container=this;if(!d||!h.call(this,d,o)){var A=w.selectAll(".nv-noData").data([p]);return A.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),A.attr("x",g.left+x/2).attr("y",18+g.top+y/2).text(function(a){return a}),a}w.selectAll(".nv-noData").remove();var B=h.call(this,d,o).slice().sort(d3.descending),C=i.call(this,d,o).slice().sort(d3.descending),D=j.call(this,d,o).slice().sort(d3.descending),E=w.selectAll("g.nv-wrap.nv-bulletChart").data([d]),F=E.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart"),G=F.append("g"),H=E.select("g");G.append("g").attr("class","nv-bulletWrap"),G.append("g").attr("class","nv-titles"),E.attr("transform","translate("+g.left+","+g.top+")");var I=d3.scale.linear().domain([0,Math.max(B[0],C[0],D[0])]).range(f?[x,0]:[0,x]),J=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(I.range());this.__chart__=I;var K=function(a){return Math.abs(J(a)-J(0))},L=function(a){return Math.abs(I(a)-I(0))},M=G.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(l-g.top-g.bottom)/2+")");M.append("text").attr("class","nv-title").text(function(a){return a.title}),M.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(a){return a.subtitle}),b.width(x).height(y);var N=H.select(".nv-bulletWrap");d3.transition(N).call(b);var O=m||I.tickFormat(x/100),P=H.selectAll("g.nv-tick").data(I.ticks(x/50),function(a){return this.textContent||O(a)}),Q=P.enter().append("g").attr("class","nv-tick").attr("transform",function(a){return"translate("+J(a)+",0)"}).style("opacity",1e-6);Q.append("line").attr("y1",y).attr("y2",y*7/6),Q.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",y*7/6).text(O);var R=d3.transition(P).attr("transform",function(a){return"translate("+I(a)+",0)"}).style("opacity",1);R.select("line").attr("y1",y).attr("y2",y*7/6),R.select("text").attr("y",y*7/6),d3.transition(P.exit()).attr("transform",function(a){return"translate("+I(a)+",0)"}).style("opacity",1e-6).remove(),q.on("tooltipShow",function(a){a.key=data[0].title,n&&r(a,z.parentNode)})}),d3.timer.flush(),a}var b=c.models.bullet(),d="left",f=!1,g={top:5,right:40,bottom:20,left:120},h=function(a){return a.ranges},i=function(a){return a.markers},j=function(a){return a.measures},k=null,l=55,m=null,n=!0,o=function(a,b,c,d,e){return"<h3>"+b+"</h3>"+"<p>"+c+"</p>"},p="No Data Available.",q=d3.dispatch("tooltipShow","tooltipHide"),r=function(b,d){var f=b.pos[0]+(d.offsetLeft||0)+g.left,h=b.pos[1]+(d.offsetTop||0)+g.top,i=o(b.key,b.label,b.value,b,a);c.tooltip.show([f,h],i,b.value<0?"e":"w",null,d)};return b.dispatch.on("elementMouseover.tooltip",function(a){q.tooltipShow(a)}),b.dispatch.on("elementMouseout.tooltip",function(a){q.tooltipHide(a)}),q.on("tooltipHide",function(){n&&c.tooltip.cleanup()}),a.dispatch=q,a.bullet=b,d3.rebind(a,b,"color"),a.orient=function(b){return arguments.length?(d=b,f=d=="right"||d=="bottom",a):d},a.ranges=function(b){return arguments.length?(h=b,a):h},a.markers=function(b){return arguments.length?(i=b,a):i},a.measures=function(b){return arguments.length?(j=b,a):j},a.width=function(b){return arguments.length?(k=b,a):k},a.height=function(b){return arguments.length?(l=b,a):l},a.margin=function(b){return arguments.length?(g.top=typeof b.top!="undefined"?b.top:g.top,g.right=typeof b.right!="undefined"?b.right:g.right,g.bottom=typeof b.bottom!="undefined"?b.bottom:g.bottom,g.left=typeof b.left!="undefined"?b.left:g.left,a):g},a.tickFormat=function(b){return arguments.length?(m=b,a):m},a.tooltips=function(b){return arguments.length?(n=b,a):n},a.tooltipContent=function(b){return arguments.length?(o=b,a):o},a.noData=function(b){return arguments.length?(p=b,a):p},a},c.models.cumulativeLineChart=function(){function a(c){return c.each(function(r){function B(b,c){d3.select(a.container).style("cursor","ew-resize")}function C(a,b){z.x=d3.event.x,z.i=Math.round(y.invert(z.x)),F()}function D(b,c){d3.select(a.container).style("cursor","auto"),v.index=z.i,x.stateChange(v)}function F(){X.data([z]),a.update()}var G=d3.select(this).classed("nv-chart-"+u,!0),H=this,I=(l||parseInt(G.style("width"))||960)-j.left-j.right,J=(m||parseInt(G.style("height"))||400)-j.top-j.bottom;a.update=function(){a(c)},a.container=this,v.disabled=r.map(function(a){return!!a.disabled});var K=d3.behavior.drag().on("dragstart",B).on("drag",C).on("dragend",D);if(!r||!r.length||!r.filter(function(a){return a.values.length}).length){var L=G.selectAll(".nv-noData").data([w]);return L.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),L.attr("x",j.left+I/2).attr("y",j.top+J/2).text(function(a){return a}),a}G.selectAll(".nv-noData").remove(),s=d.xScale(),t=d.yScale();if(!q){var M=r.filter(function(a){return!a.disabled}).map(function(a,b){var c=d3.extent(a.values,d.y());return c[0]<-0.95&&(c[0]=-0.95),[(c[0]-c[1])/(1+c[1]),(c[1]-c[0])/(1+c[0])]}),O=[d3.min(M,function(a){return a[0]}),d3.max(M,function(a){return a[1]})];d.yDomain(O)}else d.yDomain(null);y.domain([0,r[0].values.length-1]).range([0,I]).clamp(!0);var r=b(z.i,r),P=G.selectAll("g.nv-wrap.nv-cumulativeLine").data([r]),Q=P.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),R=P.select("g");Q.append("g").attr("class","nv-x nv-axis"),Q.append("g").attr("class","nv-y nv-axis"),Q.append("g").attr("class","nv-background"),Q.append("g").attr("class","nv-linesWrap"),Q.append("g").attr("class","nv-legendWrap"),Q.append("g").attr("class","nv-controlsWrap"),n&&(h.width(I),R.select(".nv-legendWrap").datum(r).call(h),j.top!=h.height()&&(j.top=h.height(),J=(m||parseInt(G.style("height"))||400)-j.top-j.bottom),R.select(".nv-legendWrap").attr("transform","translate(0,"+ -j.top+")"));if(p){var U=[{key:"Re-scale y-axis",disabled:!q}];i.width(140).color(["#444","#444","#444"]),R.select(".nv-controlsWrap").datum(U).attr("transform","translate(0,"+ -j.top+")").call(i)}P.attr("transform","translate("+j.left+","+j.top+")");var V=r.filter(function(a){return a.tempDisabled});P.select(".tempDisabled").remove(),V.length&&P.append("text").attr("class","tempDisabled").attr("x",I/2).attr("y","-.71em").style("text-anchor","end").text(V.map(function(a){return a.key}).join(", ")+" values cannot be calculated for this time period."),Q.select(".nv-background").append("rect"),R.select(".nv-background rect").attr("width",I).attr("height",J),d.y(function(a){return a.display.y}).width(I).height(J).color(r.map(function(a,b){return a.color||k(a,b)}).filter(function(a,b){return!r[b].disabled&&!r[b].tempDisabled}));var W=R.select(".nv-linesWrap").datum(r.filter(function(a){return!a.disabled&&!a.tempDisabled}));W.call(d);var X=W.selectAll(".nv-indexLine").data([z]);X.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).call(K),X.attr("transform",function(a){return"translate("+y(a.i)+",0)"}).attr("height",J),f.scale(s).ticks(Math.min(r[0].values.length,I/70)).tickSize(-J,0),R.select(".nv-x.nv-axis").attr("transform","translate(0,"+t.range()[0]+")"),d3.transition(R.select(".nv-x.nv-axis")).call(f),g.scale(t).ticks(J/36).tickSize(-I,0),d3.transition(R.select(".nv-y.nv-axis")).call(g),R.select(".nv-background rect").on("click",function(){z.x=d3.mouse(this)[0],z.i=Math.round(y.invert(z.x)),v.index=z.i,x.stateChange(v),F()}),d.dispatch.on("elementClick",function(a){z.i=a.pointIndex,z.x=y(z.i),v.index=z.i,x.stateChange(v),F()}),i.dispatch.on("legendClick",function(b,d){b.disabled=!b.disabled,q=!b.disabled,v.rescaleY=q,x.stateChange(v),c.call(a)}),h.dispatch.on("legendClick",function(b,d){b.disabled=!b.disabled,r.filter(function(a){return!a.disabled}).length||r.map(function(a){return a.disabled=!1,P.selectAll(".nv-series").classed("disabled",!1),a}),v.disabled=r.map(function(a){return!!a.disabled}),x.stateChange(v),c.call(a)}),x.on("tooltipShow",function(a){o&&A(a,H.parentNode)}),x.on("changeState",function(b){typeof b.disabled!="undefined"&&(r.forEach(function(a,c){a.disabled=b.disabled[c]}),v.disabled=b.disabled),typeof b.index!="undefined"&&(z.i=b.index,z.x=y(z.i),v.index=b.index,X.data([z])),typeof b.rescaleY!="undefined"&&(q=b.rescaleY),c.call(a)})}),a}function b(a,b){return b.map(function(b,c){var f=d.y()(b.values[a],a);return f<-0.95?(b.tempDisabled=!0,b):(b.tempDisabled=!1,b.values=b.values.map(function(a,b){return a.display={y:(d.y()(a,b)-f)/(1+f)},a}),b)})}var d=c.models.line(),f=c.models.axis(),g=c.models.axis(),h=c.models.legend(),i=c.models.legend(),j={top:30,right:30,bottom:50,left:60},k=c.utils.defaultColor(),l=null,m=null,n=!0,o=!0,p=!0,q=!0,r=function(a,b,c,d,e){return"<h3>"+a+"</h3>"+"<p>"+c+" at "+b+"</p>"},s,t,u=d.id(),v={index:0,rescaleY:q},w="No Data Available.",x=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");f.orient("bottom").tickPadding(7),g.orient("left");var y=d3.scale.linear(),z={i:0,x:0},A=function(b,h){var i=b.pos[0]+(h.offsetLeft||0),j=b.pos[1]+(h.offsetTop||0),k=f.tickFormat()(d.x()(b.point,b.pointIndex)),l=g.tickFormat()(d.y()(b.point,b.pointIndex)),m=r(b.series.key,k,l,b,a);c.tooltip.show([i,j],m,null,null,h)};return d.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+j.left,a.pos[1]+j.top],x.tooltipShow(a)}),d.dispatch.on("elementMouseout.tooltip",function(a){x.tooltipHide(a)}),x.on("tooltipHide",function(){o&&c.tooltip.cleanup()}),a.dispatch=x,a.lines=d,a.legend=h,a.xAxis=f,a.yAxis=g,d3.rebind(a,d,"defined","isArea","x","y","size","xDomain","yDomain","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),a.margin=function(b){return arguments.length?(j.top=typeof b.top!="undefined"?b.top:j.top,j.right=typeof b.right!="undefined"?b.right:j.right,j.bottom=typeof b.bottom!="undefined"?b.bottom:j.bottom,j.left=typeof b.left!="undefined"?b.left:j.left,a):j},a.width=function(b){return arguments.length?(l=b,a):l},a.height=function(b){return arguments.length?(m=b,a):m},a.color=function(b){return arguments.length?(k=c.utils.getColor(b),h.color(k),a):k},a.rescaleY=function(a){return arguments.length?(q=a,q):q},a.showControls=function(b){return arguments.length?(p=b,a):p},a.showLegend=function(b){return arguments.length?(n=b,a):n},a.tooltips=function(b){return arguments.length?(o=b,a):o},a.tooltipContent=function(b){return arguments.length?(r=b,a):r},a.state=function(b){return arguments.length?(v=b,a):v},a.noData=function(b){return arguments.length?(w=b,a):w},a},c.models.discreteBar=function(){function a(c){return c.each(function(a){var c=d-b.left-b.right,e=f-b.top-b.bottom,g=d3.select(this);a=a.map(function(a,b){return a.values=a.values.map(function(a){return a.series=b,a}),a});var w=p&&q?[]:a.map(function(a){return a.values.map(function(a,b){return{x:j(a,b),y:k(a,b),y0:a.y0}})});h.domain(p||d3.merge(w).map(function(a){return a.x})).rangeBands([0,c],.1),i.domain(q||d3.extent(d3.merge(w).map(function(a){return a.y}).concat(l))),n?i.range([e-(i.domain()[0]<0?12:0),i.domain()[1]>0?12:0]):i.range([e,0]),t=t||h,u=u||i.copy().range([i(0),i(0)]);var x=g.selectAll("g.nv-wrap.nv-discretebar").data([a]),z=x.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar"),A=z.append("g"),B=x.select("g");A.append("g").attr("class","nv-groups"),x.attr("transform","translate("+b.left+","+b.top+")");var C=x.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});C.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(C.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),C.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}),d3.transition(C).style("stroke-opacity",1).style("fill-opacity",.75);var D=C.selectAll("g.nv-bar").data(function(a){return a.values});D.exit().remove();var E=D.enter().append("g").attr("transform",function(a,b,c){return"translate("+(h(j(a,b))+h.rangeBand()*.05)+", "+i(0)+")"}).on("mouseover",function(b,c){d3.select(this).classed("hover",!0),r.elementMouseover({value:k(b,c),point:b,series:a[b.series],pos:[h(j(b,c))+h.rangeBand()*(b.series+.5)/a.length,i(k(b,c))],pointIndex:c,seriesIndex:b.series,e:d3.event})}).on("mouseout",function(b,c){d3.select(this).classed("hover",!1),r.elementMouseout({value:k(b,c),point:b,series:a[b.series],pointIndex:c,seriesIndex:b.series,e:d3.event})}).on("click",function(b,c){r.elementClick({value:k(b,c),point:b,series:a[b.series],pos:[h(j(b,c))+h.rangeBand()*(b.series+.5)/a.length,i(k(b,c))],pointIndex:c,seriesIndex:b.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(b,c){r.elementDblClick({value:k(b,c),point:b,series:a[b.series],pos:[h(j(b,c))+h.rangeBand()*(b.series+.5)/a.length,i(k(b,c))],pointIndex:c,seriesIndex:b.series,e:d3.event}),d3.event.stopPropagation()});E.append("rect").attr("height",0).attr("width",h.rangeBand()*.9/a.length),n?(E.append("text").attr("text-anchor","middle"),D.select("text").attr("x",h.rangeBand()*.9/2).attr("y",function(a,b){return k(a,b)<0?i(k(a,b))-i(0)+12:-4}).text(function(a,b){return o(k(a,b))})):D.selectAll("text").remove(),D.attr("class",function(a,b){return k(a,b)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(a,b){return a.color||m(a,b)}).style("stroke",function(a,b){return a.color||m(a,b)}).select("rect").attr("class",s).attr("width",h.rangeBand()*.9/a.length),d3.transition(D).attr("transform",function(a,b){var c=h(j(a,b))+h.rangeBand()*.05,d=k(a,b)<0?i(0):i(0)-i(k(a,b))<1?i(0)-1:i(k(a,b));return"translate("+c+", "+d+")"}).select("rect").attr("height",function(a,b){return Math.max(Math.abs(i(k(a,b))-i(0))||1)}),t=h.copy(),u=i.copy()}),a}var b={top:0,right:0,bottom:0,left:0},d=960,f=500,g=Math.floor(Math.random()*1e4),h=d3.scale.ordinal(),i=d3.scale.linear(),j=function(a){return a.x},k=function(a){return a.y},l=[0],m=c.utils.defaultColor(),n=!1,o=d3.format(",.2f"),p,q,r=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),s="discreteBar",t,u;return a.dispatch=r,a.x=function(b){return arguments.length?(j=b,a):j},a.y=function(b){return arguments.length?(k=b,a):k},a.margin=function(c){return arguments.length?(b.top=typeof c.top!="undefined"?c.top:b.top,b.right=typeof c.right!="undefined"?c.right:b.right,b.bottom=typeof c.bottom!="undefined"?c.bottom:b.bottom,b.left=typeof c.left!="undefined"?c.left:b.left,a):b},a.width=function(b){return arguments.length?(d=b,a):d},a.height=function(b){return arguments.length?(f=b,a):f},a.xScale=function(b){return arguments.length?(h=b,a):h},a.yScale=function(b){return arguments.length?(i=b,a):i},a.xDomain=function(b){return arguments.length?(p=b,a):p},a.yDomain=function(b){return arguments.length?(q=b,a):q},a.forceY=function(b){return arguments.length?(l=b,a):l},a.color=function(b){return arguments.length?(m=c.utils.getColor(b),a):m},a.id=function(b){return arguments.length?(g=b,a):g},a.showValues=function(b){return arguments.length?(n=b,a):n},a.valueFormat=function(b){return arguments.length?(o=b,a):o},a.rectClass=function(b){return arguments.length?(s=b,a):s},a},c.models.discreteBarChart=function(){function a(c){return c.each(function(j){var m=d3.select(this),u=this,w=(h||parseInt(m.style("width"))||960)-g.left-g.right,x=(i||parseInt(m.style("height"))||400)-g.top-g.bottom;a.update=function(){q.beforeUpdate(),c.transition().call(a)},a.container=this;if(!j||!j.length||!j.filter(function(a){return a.values.length}).length){var y=m.selectAll(".nv-noData").data([p]);return y.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),y.attr("x",g.left+w/2).attr("y",g.top+x/2).text(function(a){return a}),a}m.selectAll(".nv-noData").remove(),n=b.xScale(),o=b.yScale();var z=m.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([j]),A=z.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),B=A.append("defs"),C=z.select("g");A.append("g").attr("class","nv-x nv-axis"),A.append("g").attr("class","nv-y nv-axis"),A.append("g").attr("class","nv-barsWrap"),C.attr("transform","translate("+g.left+","+g.top+")"),b.width(w).height(x);var D=C.select(".nv-barsWrap").datum(j.filter(function(a){return!a.disabled}));d3.transition(D).call(b),B.append("clipPath").attr("id","nv-x-label-clip-"+b.id()).append("rect"),C.select("#nv-x-label-clip-"+b.id()+" rect").attr("width",n.rangeBand()*(k?2:1)).attr("height",16).attr("x",-n.rangeBand()/(k?1:2)),d.scale(n).ticks(w/100).tickSize(-x,0),C.select(".nv-x.nv-axis").attr("transform","translate(0,"+(o.range()[0]+(b.showValues()&&o.domain()[0]<0?16:0))+")"),C.select(".nv-x.nv-axis").transition().duration(0).call(d);var E=C.select(".nv-x.nv-axis").selectAll("g");k&&E.selectAll("text").attr("transform",function(a,b,c){return"translate(0,"+(c%2==0?"5":"17")+")"}),f.scale(o).ticks(x/36).tickSize(-w,0),d3.transition(C.select(".nv-y.nv-axis")).call(f),q.on("tooltipShow",function(a){l&&r(a,u.parentNode)})}),a}var b=c.models.discreteBar(),d=c.models.axis(),f=c.models.axis(),g={top:15,right:10,bottom:50,left:60},h=null,i=null,j=c.utils.getColor(),k=!1,l=!0,m=function(a,b,c,d,e){return"<h3>"+b+"</h3>"+"<p>"+c+"</p>"},n,o,p="No Data Available.",q=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate");d.orient("bottom").highlightZero(!1).showMaxMin(!1).tickFormat(function(a){return a}),f.orient("left").tickFormat(d3.format(",.1f"));var r=function(g,h){var i=g.pos[0]+(h.offsetLeft||0),j=g.pos[1]+(h.offsetTop||0),k=d.tickFormat()(b.x()(g.point,g.pointIndex)),l=f.tickFormat()(b.y()(g.point,g.pointIndex)),n=m(g.series.key,k,l,g,a);c.tooltip.show([i,j],n,g.value<0?"n":"s",null,h)};return b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+g.left,a.pos[1]+g.top],q.tooltipShow(a)}),b.dispatch.on("elementMouseout.tooltip",function(a){q.tooltipHide(a)}),q.on("tooltipHide",function(){l&&c.tooltip.cleanup()}),a.dispatch=q,a.discretebar=b,a.xAxis=d,a.yAxis=f,d3.rebind(a,b,"x","y","xDomain","yDomain","forceX","forceY","id","showValues","valueFormat"),a.margin=function(b){return arguments.length?(g.top=typeof b.top!="undefined"?b.top:g.top,g.right=typeof b.right!="undefined"?b.right:g.right,g.bottom=typeof b.bottom!="undefined"?b.bottom:g.bottom,g.left=typeof b.left!="undefined"?b.left:g.left,a):g},a.width=function(b){return arguments.length?(h=b,a):h},a.height=function(b){return arguments.length?(i=b,a):i},a.color=function(d){return arguments.length?(j=c.utils.getColor(d),b.color(j),a):j},a.staggerLabels=function(b){return arguments.length?(k=b,a):k},a.tooltips=function(b){return arguments.length?(l=b,a):l},a.tooltipContent=function(b){return arguments.length?(m=b,a):m},a.noData=function(b){return arguments.length?(p=b,a):p},a},c.models.distribution=function(){function a(c){return c.each(function(a){var c=d-(g==="x"?b.left+b.right:b.top+b.bottom),e=g=="x"?"y":"x",k=d3.select(this);l=l||j;var m=k.selectAll("g.nv-distribution").data([a]),p=m.enter().append("g").attr("class","nvd3 nv-distribution"),q=p.append("g"),v=m.select("g");m.attr("transform","translate("+b.left+","+b.top+")");var w=v.selectAll("g.nv-dist").data(function(a){return a},function(a){return a.key});w.enter().append("g"),w.attr("class",function(a,b){return"nv-dist nv-series-"+b}).style("stroke",function(a,b){return i(a,b)});var x=w.selectAll("line.nv-dist"+g).data(function(a){return a.values});x.enter().append("line").attr(g+"1",function(a,b){return l(h(a,b))}).attr(g+"2",function(a,b){return l(h(a,b))}),d3.transition(w.exit().selectAll("line.nv-dist"+g)).attr(g+"1",function(a,b){return j(h(a,b))}).attr(g+"2",function(a,b){return j(h(a,b))}).style("stroke-opacity",0).remove(),x.attr("class",function(a,b){return"nv-dist"+g+" nv-dist"+g+"-"+b}).attr(e+"1",0).attr(e+"2",f),d3.transition(x).attr(g+"1",function(a,b){return j(h(a,b))}).attr(g+"2",function(a,b){return j(h(a,b))}),l=j.copy()}),a}var b={top:0,right:0,bottom:0,left:0},d=400,f=8,g="x",h=function(a){return a[g]},i=c.utils.defaultColor(),j=d3.scale.linear(),k,l;return a.margin=function(c){return arguments.length?(b.top=typeof c.top!="undefined"?c.top:b.top,b.right=typeof c.right!="undefined"?c.right:b.right,b.bottom=typeof c.bottom!="undefined"?c.bottom:b.bottom,b.left=typeof c.left!="undefined"?c.left:b.left,a):b},a.width=function(b){return arguments.length?(d=b,a):d},a.axis=function(b){return arguments.length?(g=b,a):g},a.size=function(b){return arguments.length?(f=b,a):f},a.getData=function(b){return arguments.length?(h=d3.functor(b),a):h},a.scale=function(b){return arguments.length?(j=b,a):j},a.color=function(b){return arguments.length?(i=c.utils.getColor(b),a):i},a},c.models.indentedTree=function(){function a(b){return b.each(function(c){function d(b,c,e){d3.event.stopPropagation();if(d3.event.shiftKey&&!e)return d3.event.shiftKey=!1,b.values&&b.values.forEach(function(a){(a.values||a._values)&&d(a,0,!0)}),!0;if(!s(b))return!0;b.values?(b._values=b.values,b.values=null):(b.values=b._values,b._values=null),a.update()}function g(a){return a._values&&a._values.length?o:a.values&&a.values.length?p:""}function h(a){return a._values&&a._values.length}function s(a){var b=a.values||a._values;return b&&b.length}var t=0,w=1,x=d3.layout.tree().children(function(a){return a.values}).size([f,l]);a.update=function(){b.transition().call(a)},a.container=this,c[0]||(c[0]={key:k});var y=x.nodes(c[0]),z=d3.select(this).selectAll("div").data([[y]]),A=z.enter().append("div").attr("class","nvd3 nv-wrap nv-indentedtree"),B=A.append("table"),C=z.select("table").attr("width","100%").attr("class",n);if(i){var D=B.append("thead"),E=D.append("tr");m.forEach(function(a){E.append("th").attr("width",a.width?a.width:"10%").style("text-align",a.type=="numeric"?"right":"left").append("span").text(a.label)})}var F=C.selectAll("tbody").data(function(a){return a});F.enter().append("tbody"),w=d3.max(y,function(a){return a.depth}),x.size([f,w*l]);var G=F.selectAll("tr").data(function(a){return a.filter(function(a){return j&&!a.children?j(a):!0})},function(a){return a.id||a.id==++t});G.exit().remove(),G.select("img.nv-treeicon").attr("src",g).classed("folded",h);var H=G.enter().append("tr");m.forEach(function(a,b){var c=H.append("td").style("padding-left",function(a){return(b?0:a.depth*l+12+(g(a)?0:16))+"px"},"important").style("text-align",a.type=="numeric"?"right":"left");b==0&&c.append("img").classed("nv-treeicon",!0).classed("nv-folded",h).attr("src",g).style("width","14px").style("height","14px").style("padding","0 1px").style("display",function(a){return g(a)?"inline-block":"none"}).on("click",d),c.append("span").attr("class",d3.functor(a.classes)).text(function(b){return a.format?a.format(b):b[a.key]||"-"}),a.showCount&&(c.append("span").attr("class","nv-childrenCount"),G.selectAll("span.nv-childrenCount").text(function(a){return a.values&&a.values.length||a._values&&a._values.length?"("+(a.values&&a.values.filter(function(a){return j?j(a):!0}).length||a._values&&a._values.filter(function(a){return j?j(a):!0}).length||0)+")":""})),a.click&&c.select("span").on("click",a.click)}),G.order().on("click",function(a){q.elementClick({row:this,data:a,pos:[a.x,a.y]})}).on("dblclick",function(a){q.elementDblclick({row:this,data:a,pos:[a.x,a.y]})}).on("mouseover",function(a){q.elementMouseover({row:this,data:a,pos:[a.x,a.y]})}).on("mouseout",function(a){q.elementMouseout({row:this,data:a,pos:[a.x,a.y]})})}),a}var b={top:0,right:0,bottom:0,left:0},d=960,f=500,g=c.utils.defaultColor(),h=Math.floor(Math.random()*1e4),i=!0,j=!1,k="No Data Available.",l=20,m=[{key:"key",label:"Name",type:"text"}],n=null,o="images/grey-plus.png",p="images/grey-minus.png",q=d3.dispatch("elementClick","elementDblclick","elementMouseover","elementMouseout");return a.margin=function(c){return arguments.length?(b.top=typeof c.top!="undefined"?c.top:b.top,b.right=typeof c.right!="undefined"?c.right:b.right,b.bottom=typeof c.bottom!="undefined"?c.bottom:b.bottom,b.left=typeof c.left!="undefined"?c.left:b.left,a):b},a.width=function(b){return arguments.length?(d=b,a):d},a.height=function(b){return arguments.length?(f=b,a):f},a.color=function(b){return arguments.length?(g=c.utils.getColor(b),scatter.color(g),a):g},a.id=function(b){return arguments.length?(h=b,a):h},a.header=function(b){return arguments.length?(i=b,a):i},a.noData=function(b){return arguments.length?(k=b,a):k},a.filterZero=function(b){return arguments.length?(j=b,a):j},a.columns=function(b){return arguments.length?(m=b,a):m},a.tableClass=function(b){return arguments.length?(n=b,a):n},a.iconOpen=function(b){return arguments.length?(o=b,a):o},a.iconClose=function(b){return arguments.length?(p=b,a):p},a},c.models.legend=function(){function a(c){return c.each(function(a){var c=d-b.left-b.right,e=d3.select(this),l=e.selectAll("g.nv-legend").data([a]),m=l.enter().append("g").attr("class","nvd3 nv-legend").append("g"),p=l.select("g");l.attr("transform","translate("+b.left+","+b.top+")");var q=p.selectAll(".nv-series").data(function(a){return a}),v=q.enter().append("g").attr("class","nv-series").on("mouseover",function(a,b){j.legendMouseover(a,b)}).on("mouseout",function(a,b){j.legendMouseout(a,b)}).on("click",function(a,b){j.legendClick(a,b)}).on("dblclick",function(a,b){j.legendDblclick(a,b)});v.append("circle").style("stroke-width",2).attr("r",5),v.append("text").attr("text-anchor","start").attr("dy",".32em").attr("dx","8"),q.classed("disabled",function(a){return a.disabled}),q.exit().remove(),q.select("circle").style("fill",function(a,b){return a.color||h(a,b)}).style("stroke",function(a,b){return a.color||h(a,b)}),q.select("text").text(g);if(i){var w=[];q.each(function(a,b){w.push(d3.select(this).select("text").node().getComputedTextLength()+28)});var x=0,y=0,z=[];while(y<c&&x<w.length)z[x]=w[x],y+=w[x++];while(y>c&&x>1){z=[],x--;for(k=0;k<w.length;k++)w[k]>(z[k%x]||0)&&(z[k%x]=w[k]);y=z.reduce(function(a,b,c,d){return a+b})}var A=[];for(var B=0,C=0;B<x;B++)A[B]=C,C+=z[B];q.attr("transform",function(a,b){return"translate("+A[b%x]+","+(5+Math.floor(b/x)*20)+")"}),p.attr("transform","translate("+(d-b.right-y)+","+b.top+")"),f=b.top+b.bottom+Math.ceil(w.length/x)*20}else{var D=5,E=5,F=0,G;q.attr("transform",function(a,c){var e=d3.select(this).select("text").node().getComputedTextLength()+28;return G=E,d<b.left+b.right+G+e&&(E=G=5,D+=20),E+=e,E>F&&(F=E),"translate("+G+","+D+")"}),p.attr("transform","translate("+(d-b.right-F)+","+b.top+")"),f=b.top+b.bottom+D+15}}),a}var b={top:5,right:0,bottom:5,left:0},d=400,f=20,g=function(a){return a.key},h=c.utils.defaultColor(),i=!0,j=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout");return a.dispatch=j,a.margin=function(c){return arguments.length?(b.top=typeof c.top!="undefined"?c.top:b.top,b.right=typeof c.right!="undefined"?c.right:b.right,b.bottom=typeof c.bottom!="undefined"?c.bottom:b.bottom,b.left=typeof c.left!="undefined"?c.left:b.left,a):b},a.width=function(b){return arguments.length?(d=b,a):d},a.height=function(b){return arguments.length?(f=b,a):f},a.key=function(b){return arguments.length?(g=b,a):g},a.color=function(b){return arguments.length?(h=c.utils.getColor(b),a):h},a.align=function(b){return arguments.length?(i=b,a):i},a},c.models.line=function(){function a(c){return c.each(function(a){var c=f-d.left-d.right,e=g-d.top-d.bottom,w=d3.select(this);n=b.xScale(),o=b.yScale(),q=q||n,r=r||o;var x=w.selectAll("g.nv-wrap.nv-line").data([a]),y=x.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),z=y.append("defs"),A=y.append("g"),B=x.select("g");A.append("g").attr("class","nv-groups"),A.append("g").attr("class","nv-scatterWrap"),x.attr("transform","translate("+d.left+","+d.top+")"),b.width(c).height(e);var C=x.select(".nv-scatterWrap");d3.transition(C).call(b),z.append("clipPath").attr("id","nv-edge-clip-"+b.id()).append("rect"),x.select("#nv-edge-clip-"+b.id()+" rect").attr("width",c).attr("height",e),B.attr("clip-path",m?"url(#nv-edge-clip-"+b.id()+")":""),C.attr("clip-path",m?"url(#nv-edge-clip-"+b.id()+")":"");var D=x.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});D.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(D.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),D.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return h(a,b)}).style("stroke",function(a,b){return h(a,b)}),d3.transition(D).style("stroke-opacity",1).style("fill-opacity",.5);var E=D.selectAll("path.nv-area").data(function(a){return l(a)?[a]:[]});E.enter().append("path").attr("class","nv-area").attr("d",function(a){return d3.svg.area().interpolate(p).defined(k).x(function(a,b){return q(i(a,b))}).y0(function(a,b){return r(j(a,b))}).y1(function(a,b){return r(o.domain()[0]<=0?o.domain()[1]>=0?0:o.domain()[1]:o.domain()[0])}).apply(this,[a.values])}),d3.transition(D.exit().selectAll("path.nv-area")).attr("d",function(a){return d3.svg.area().interpolate(p).defined(k).x(function(a,b){return q(i(a,b))}).y0(function(a,b){return r(j(a,b))}).y1(function(a,b){return r(o.domain()[0]<=0?o.domain()[1]>=0?0:o.domain()[1]:o.domain()[0])}).apply(this,[a.values])}),d3.transition(E).attr("d",function(a){return d3.svg.area().interpolate(p).defined(k).x(function(a,b){return q(i(a,b))}).y0(function(a,b){return r(j(a,b))}).y1(function(a,b){return r(o.domain()[0]<=0?o.domain()[1]>=0?0:o.domain()[1]:o.domain()[0])}).apply(this,[a.values])});var F=D.selectAll("path.nv-line").data(function(a){return[a.values]});F.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(p).defined(k).x(function(a,b){return q(i(a,b))}).y(function(a,b){return r(j(a,b))})),d3.transition(D.exit().selectAll("path.nv-line")).attr("d",d3.svg.line().interpolate(p).defined(k).x(function(a,b){return n(i(a,b))}).y(function(a,b){return o(j(a,b))})),d3.transition(F).attr("d",d3.svg.line().interpolate(p).defined(k).x(function(a,b){return n(i(a,b))}).y(function(a,b){return o(j(a,b))})),q=n.copy(),r=o.copy()}),a}var b=c.models.scatter(),d={top:0,right:0,bottom:0,left:0},f=960,g=500,h=c.utils.defaultColor(),i=function(a){return a.x},j=function(a){return a.y},k=function(a,b){return!isNaN(j(a,b))&&j(a,b)!==null},l=function(a){return a.area},m=!1,n,o,p="linear";b.size(16).sizeDomain([16,256]);var q,r;return a.dispatch=b.dispatch,a.scatter=b,d3.rebind(a,b,"id","interactive","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","forceX","forceY","forceSize","clipVoronoi","clipRadius","padData"),a.margin=function(b){return arguments.length?(d.top=typeof b.top!="undefined"?b.top:d.top,d.right=typeof b.right!="undefined"?b.right:d.right,d.bottom=typeof b.bottom!="undefined"?b.bottom:d.bottom,d.left=typeof b.left!="undefined"?b.left:d.left,a):d},a.width=function(b){return arguments.length?(f=b,a):f},a.height=function(b){return arguments.length?(g=b,a):g},a.x=function(c){return arguments.length?(i=c,b.x(c),a):i},a.y=function(c){return arguments.length?(j=c,b.y(c),a):j},a.clipEdge=function(b){return arguments.length?(m=b,a):m},a.color=function(d){return arguments.length?(h=c.utils.getColor(d),b.color(h),a):h},a.interpolate=function(b){return arguments.length?(p=b,a):p},a.defined=function(b){return arguments.length?(k=b,a):k},a.isArea=function(b){return arguments.length?(l=d3.functor(b),a):l},a},c.models.lineChart=function(){function a(c){return c.each(function(n){var w=d3.select(this),x=this,z=(j||parseInt(w.style("width"))||960)-h.left-h.right,A=(k||parseInt(w.style("height"))||400)-h.top-h.bottom;a.update=function(){a(c)},a.container=this,q.disabled=n.map(function(a){return!!a.disabled});if(!n||!n.length||!n.filter(function(a){return a.values.length}).length){var B=w.selectAll(".nv-noData").data([r]);return B.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),B.attr("x",h.left+z/2).attr("y",h.top+A/2).text(function(a){return a}),a}w.selectAll(".nv-noData").remove(),o=b.xScale(),p=b.yScale();var C=w.selectAll("g.nv-wrap.nv-lineChart").data([n]),D=C.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),E=C.select("g");D.append("g").attr("class","nv-x nv-axis"),D.append("g").attr("class","nv-y nv-axis"),D.append("g").attr("class","nv-linesWrap"),D.append("g").attr("class","nv-legendWrap"),l&&(g.width(z),E.select(".nv-legendWrap").datum(n).call(g),h.top!=g.height()&&(h.top=g.height(),A=(k||parseInt(w.style("height"))||400)-h.top-h.bottom),C.select(".nv-legendWrap").attr("transform","translate(0,"+ -h.top+")")),C.attr("transform","translate("+h.left+","+h.top+")"),b.width(z).height(A).color(n.map(function(a,b){return a.color||i(a,b)}).filter(function(a,b){return!n[b].disabled}));var F=E.select(".nv-linesWrap").datum(n.filter(function(a){return!a.disabled}));d3.transition(F).call(b),d.scale(o).ticks(z/100).tickSize(-A,0),E.select(".nv-x.nv-axis").attr("transform","translate(0,"+p.range()[0]+")"),d3.transition(E.select(".nv-x.nv-axis")).call(d),f.scale(p).ticks(A/36).tickSize(-z,0),d3.transition(E.select(".nv-y.nv-axis")).call(f),g.dispatch.on("legendClick",function(b,d){b.disabled=!b.disabled,n.filter(function(a){return!a.disabled}).length||n.map(function(a){return a.disabled=!1,C.selectAll(".nv-series").classed("disabled",!1),a}),q.disabled=n.map(function(a){return!!a.disabled}),s.stateChange(q),c.transition().call(a)}),s.on("tooltipShow",function(a){m&&t(a,x.parentNode)}),s.on("changeState",function(b){typeof b.disabled!="undefined"&&(n.forEach(function(a,c){a.disabled=b.disabled[c]}),q.disabled=b.disabled),c.call(a)})}),a}var b=c.models.line(),d=c.models.axis(),f=c.models.axis(),g=c.models.legend(),h={top:30,right:20,bottom:50,left:60},i=c.utils.defaultColor(),j=null,k=null,l=!0,m=!0,n=function(a,b,c,d,e){return"<h3>"+a+"</h3>"+"<p>"+c+" at "+b+"</p>"},o,p,q={},r="No Data Available.",s=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");d.orient("bottom").tickPadding(7),f.orient("left");var t=function(g,h){if(h){var i=d3.select(h).select("svg"),j=i.attr("viewBox");if(j){j=j.split(" ");var k=parseInt(i.style("width"))/j[2];g.pos[0]=g.pos[0]*k,g.pos[1]=g.pos[1]*k}}var l=g.pos[0]+(h.offsetLeft||0),m=g.pos[1]+(h.offsetTop||0),o=d.tickFormat()(b.x()(g.point,g.pointIndex)),p=f.tickFormat()(b.y()(g.point,g.pointIndex)),q=n(g.series.key,o,p,g,a);c.tooltip.show([l,m],q,null,null,h)};return b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+h.left,a.pos[1]+h.top],s.tooltipShow(a)}),b.dispatch.on("elementMouseout.tooltip",function(a){s.tooltipHide(a)}),s.on("tooltipHide",function(){m&&c.tooltip.cleanup()}),a.dispatch=s,a.lines=b,a.legend=g,a.xAxis=d,a.yAxis=f,d3.rebind(a,b,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate"),a.margin=function(b){return arguments.length?(h.top=typeof b.top!="undefined"?b.top:h.top,h.right=typeof b.right!="undefined"?b.right:h.right,h.bottom=typeof b.bottom!="undefined"?b.bottom:h.bottom,h.left=typeof b.left!="undefined"?b.left:h.left,a):h},a.width=function(b){return arguments.length?(j=b,a):j},a.height=function(b){return arguments.length?(k=b,a):k},a.color=function(b){return arguments.length?(i=c.utils.getColor(b),g.color(i),a):i},a.showLegend=function(b){return arguments.length?(l=b,a):l},a.tooltips=function(b){return arguments.length?(m=b,a):m},a.tooltipContent=function(b){return arguments.length?(n=b,a):n},a.state=function(b){return arguments.length?(q=b,a):q},a.noData=function(b){return arguments.length?(r=b,a):r},a},c.models.linePlusBarChart=function(){function a(c){return c.each(function(m){var n=d3.select(this),r=this,z=(k||parseInt(n.style("width"))||960)-j.left-j.right,A=(l||parseInt(n.style("height"))||400)-j.top-j.bottom;a.update=function(){a(c)},a.container=this,x.disabled=m.map(function(a){return!!a.disabled});if(!m||!m.length||!m.filter(function(a){return a.values.length}).length){var B=n.selectAll(".nv-noData").data([v]);return B.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),B.attr("x",j.left+z/2).attr("y",j.top+A/2).text(function(a){return a}),a}n.selectAll(".nv-noData").remove();var C=m.filter(function(a){return!a.disabled&&a.bar}),D=m.filter(function(a){return!a.bar});s=D.filter(function(a){return!a.disabled}).length&&D.filter(function(a){return!a.disabled})[0].values.length?b.xScale():d.xScale(),t=d.yScale(),u=b.yScale();var F=d3.select(this).selectAll("g.nv-wrap.nv-linePlusBar").data([m]),G=F.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),H=F.select("g");G.append("g").attr("class","nv-x nv-axis"),G.append("g").attr("class","nv-y1 nv-axis"),G.append("g").attr("class","nv-y2 nv-axis"),G.append("g").attr("class","nv-barsWrap"),G.append("g").attr("class","nv-linesWrap"),G.append("g").attr("class","nv-legendWrap"),p&&(i.width(z/2),H.select(".nv-legendWrap").datum(m.map(function(a){return a.originalKey=a.originalKey===undefined?a.key:a.originalKey,a.key=a.originalKey+(a.bar?" (left axis)":" (right axis)"),a})).call(i),j.top!=i.height()&&(j.top=i.height(),A=(l||parseInt(n.style("height"))||400)-j.top-j.bottom),H.select(".nv-legendWrap").attr("transform","translate("+z/2+","+ -j.top+")")),F.attr("transform","translate("+j.left+","+j.top+")"),b.width(z).height(A).color(m.map(function(a,b){return a.color||o(a,b)}).filter(function(a,b){return!m[b].disabled&&!m[b].bar})),d.width(z).height(A).color(m.map(function(a,b){return a.color||o(a,b)}).filter(function(a,b){return!m[b].disabled&&m[b].bar}));var I=H.select(".nv-barsWrap").datum(C.length?C:[{values:[]}]),J=H.select(".nv-linesWrap").datum(D[0].disabled?[{values:[]}]:D);d3.transition(I).call(d),d3.transition(J).call(b),f.scale(s).ticks(z/100).tickSize(-A,0),H.select(".nv-x.nv-axis").attr("transform","translate(0,"+t.range()[0]+")"),d3.transition(H.select(".nv-x.nv-axis")).call(f),g.scale(t).ticks(A/36).tickSize(-z,0),d3.transition(H.select(".nv-y1.nv-axis")).style("opacity",C.length?1:0).call(g),h.scale(u).ticks(A/36).tickSize(C.length?0:-z,0),H.select(".nv-y2.nv-axis").style("opacity",D.length?1:0).attr("transform","translate("+z+",0)"),d3.transition(H.select(".nv-y2.nv-axis")).call(h),i.dispatch.on("legendClick",function(b,d){b.disabled=!b.disabled,m.filter(function(a){return!a.disabled}).length||m.map(function(a){return a.disabled=!1,F.selectAll(".nv-series").classed("disabled",!1),a}),x.disabled=m.map(function(a){return!!a.disabled}),w.stateChange(x),c.transition().call(a)}),w.on("tooltipShow",function(a){q&&y(a,r.parentNode)}),w.on("changeState",function(b){typeof b.disabled!="undefined"&&(m.forEach(function(a,c){a.disabled=b.disabled[c]}),x.disabled=b.disabled),c.call(a)})}),a}var b=c.models.line(),d=c.models.historicalBar(),f=c.models.axis(),g=c.models.axis(),h=c.models.axis(),i=c.models.legend(),j={top:30,right:60,bottom:50,left:60},k=null,l=null,m=function(a){return a.x},n=function(a){return a.y},o=c.utils.defaultColor(),p=!0,q=!0,r=function(a,b,c,d,e){return"<h3>"+a+"</h3>"+"<p>"+c+" at "+b+"</p>"},s,t,u,v="No Data Available.",w=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");d.padData(!0),b.clipEdge(!1).padData(!0),f.orient("bottom").tickPadding(7).highlightZero(!1),g.orient("left"),h.orient("right");var x={},y=function(d,i){var j=d.pos[0]+(i.offsetLeft||0),k=d.pos[1]+(i.offsetTop||0),l=f.tickFormat()(b.x()(d.point,d.pointIndex)),m=(d.series.bar?g:h).tickFormat()(b.y()(d.point,d.pointIndex)),n=r(d.series.key,l,m,d,a);c.tooltip.show([j,k],n,d.value<0?"n":"s",null,i)};return b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+j.left,a.pos[1]+j.top],w.tooltipShow(a)}),b.dispatch.on("elementMouseout.tooltip",function(a){w.tooltipHide(a)}),d.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+j.left,a.pos[1]+j.top],w.tooltipShow(a)}),d.dispatch.on("elementMouseout.tooltip",function(a){w.tooltipHide(a)}),w.on("tooltipHide",function(){q&&c.tooltip.cleanup()}),a.dispatch=w,a.legend=i,a.lines=b,a.bars=d,a.xAxis=f,a.y1Axis=g,a.y2Axis=h,d3.rebind(a,b,"defined","size","clipVoronoi","interpolate"),a.x=function(c){return arguments.length?(m=c,b.x(c),d.x(c),a):m},a.y=function(c){return arguments.length?(n=c,b.y(c),d.y(c),a):n},a.margin=function(b){return arguments.length?(j.top=typeof b.top!="undefined"?b.top:j.top,j.right=typeof b.right!="undefined"?b.right:j.right,j.bottom=typeof b.bottom!="undefined"?b.bottom:j.bottom,j.left=typeof b.left!="undefined"?b.left:j.left,a):j},a.width=function(b){return arguments.length?(k=b,a):k},a.height=function(b){return arguments.length?(l=b,a):l},a.color=function(b){return arguments.length?(o=c.utils.getColor(b),i.color(o),a):o},a.showLegend=function(b){return arguments.length?(p=b,a):p},a.tooltips=function(b){return arguments.length?(q=b,a):q},a.tooltipContent=function(b){return arguments.length?(r=b,a):r},a.state=function(b){return arguments.length?(x=b,a):x},a.noData=function(b){return arguments.length?(v=b,a):v},a},c.models.lineWithFocusChart=function(){function a(c){return c.each(function(y){function D(a){var b=+(a=="e"),c=b?1:-1,d=L/3;return"M"+.5*c+","+d+"A6,6 0 0 "+b+" "+6.5*c+","+(d+6)+"V"+(2*d-6)+"A6,6 0 0 "+b+" "+.5*c+","+2*d+"Z"+"M"+2.5*c+","+(d+8)+"V"+(2*d-8)+"M"+4.5*c+","+(d+8)+"V"+(2*d-8)}function F(){k.empty()||k.extent(w),V.data([k.empty()?t.domain():w]).each(function(a,b){var c=t(a[0])-r.range()[0],d=r.range()[1]-t(a[1]);d3.select(this).select(".left").attr("width",c<0?0:c),d3.select(this).select(".right").attr("x",t(a[1])).attr("width",d<0?0:d)})}function G(){w=k.empty()?null:k.extent(),extent=k.empty()?t.domain():k.extent(),A.brush({extent:extent,brush:k}),F();var a=Q.select(".nv-focus .nv-linesWrap").datum(y.filter(function(a){return!a.disabled}).map(function(a,c){return{key:a.key,values:a.values.filter(function(a,c){return b.x()(a,c)>=extent[0]&&b.x()(a,c)<=extent[1]})}}));d3.transition(a).call(b),d3.transition(Q.select(".nv-focus .nv-x.nv-axis")).call(f),d3.transition(Q.select(".nv-focus .nv-y.nv-axis")).call(g)}var H=d3.select(this),I=this,J=(o||parseInt(H.style("width"))||960)-l.left-l.right,K=(p||parseInt(H.style("height"))||400)-l.top-l.bottom-q,L=q-m.top-m.bottom;a.update=function(){a(c)},a.container=this;if(!y||!y.length||!y.filter(function(a){return a.values.length}).length){var M=H.selectAll(".nv-noData").data([z]);return M.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),M.attr("x",l.left+J/2).attr("y",l.top+K/2).text(function(a){return a}),a}H.selectAll(".nv-noData").remove(),r=b.xScale(),s=b.yScale(),t=d.xScale(),u=d.yScale();var O=H.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([y]),P=O.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),Q=O.select("g");P.append("g").attr("class","nv-legendWrap");var R=P.append("g").attr("class","nv-focus");R.append("g").attr("class","nv-x nv-axis"),R.append("g").attr("class","nv-y nv-axis"),R.append("g").attr("class","nv-linesWrap");var S=P.append("g").attr("class","nv-context");S.append("g").attr("class","nv-x nv-axis"),S.append("g").attr("class","nv-y nv-axis"),S.append("g").attr("class","nv-linesWrap"),S.append("g").attr("class","nv-brushBackground"),S.append("g").attr("class","nv-x nv-brush"),v&&(j.width(J),Q.select(".nv-legendWrap").datum(y).call(j),l.top!=j.height()&&(l.top=j.height(),K=(p||parseInt(H.style("height"))||400)-l.top-l.bottom-q),Q.select(".nv-legendWrap").attr("transform","translate(0,"+ -l.top+")")),O.attr("transform","translate("+l.left+","+l.top+")"),b.width(J).height(K).color(y.map(function(a,b){return a.color||n(a,b)}).filter(function(a,b){return!y[b].disabled})),d.defined(b.defined()).width(J).height(L).color(y.map(function(a,b){return a.color||n(a,b)}).filter(function(a,b){return!y[b].disabled})),Q.select(".nv-context").attr("transform","translate(0,"+(K+l.bottom+m.top)+")");var U=Q.select(".nv-context .nv-linesWrap").datum(y.filter(function(a){return!a.disabled}));d3.transition(U).call(d),f.scale(r).ticks(J/100).tickSize(-K,0),g.scale(s).ticks(K/36).tickSize(-J,0),Q.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+K+")"),k.x(t).on("brush",G),w&&k.extent(w);var V=Q.select(".nv-brushBackground").selectAll("g").data([w||k.extent()]),W=V.enter().append("g");W.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",L),W.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",L),gBrush=Q.select(".nv-x.nv-brush").call(k),gBrush.selectAll("rect").attr("height",L),gBrush.selectAll(".resize").append("path").attr("d",D),G(),h.scale(t).ticks(J/100).tickSize(-L,0),Q.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+u.range()[0]+")"),d3.transition(Q.select(".nv-context .nv-x.nv-axis")).call(h),i.scale(u).ticks(L/36).tickSize(-J,0),d3.transition(Q.select(".nv-context .nv-y.nv-axis")).call(i),Q.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+u.range()[0]+")"),j.dispatch.on("legendClick",function(b,d){b.disabled=!b.disabled,y.filter(function(a){return!a.disabled}).length||y.map(function(a){return a.disabled=!1,O.selectAll(".nv-series").classed("disabled",!1),a}),c.transition().call(a)}),A.on("tooltipShow",function(a){x&&B(a,I.parentNode)})}),a}var b=c.models.line(),d=c.models.line(),f=c.models.axis(),g=c.models.axis(),h=c.models.axis(),i=c.models.axis(),j=c.models.legend(),k=d3.svg.brush(),l={top:30,right:30,bottom:30,left:60},m={top:0,right:30,bottom:20,left:60},n=c.utils.defaultColor(),o=null,p=null,q=100,r,s,t,u,v=!0,w=null,x=!0,y=function(a,b,c,d,e){return"<h3>"+a+"</h3>"+"<p>"+c+" at "+b+"</p>"},z="No Data Available.",A=d3.dispatch("tooltipShow","tooltipHide","brush");b.clipEdge(!0),d.interactive(!1),f.orient("bottom").tickPadding(5),g.orient("left"),h.orient("bottom").tickPadding(5),i.orient("left");var B=function(d,h){var i=d.pos[0]+(h.offsetLeft||0),j=d.pos[1]+(h.offsetTop||0),k=f.tickFormat()(b.x()(d.point,d.pointIndex)),l=g.tickFormat()(b.y()(d.point,d.pointIndex)),m=y(d.series.key,k,l,d,a);c.tooltip.show([i,j],m,null,null,h)};return b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+l.left,a.pos[1]+l.top],A.tooltipShow(a)}),b.dispatch.on("elementMouseout.tooltip",function(a){A.tooltipHide(a)}),A.on("tooltipHide",function(){x&&c.tooltip.cleanup()}),a.dispatch=A,a.legend=j,a.lines=b,a.lines2=d,a.xAxis=f,a.yAxis=g,a.x2Axis=h,a.y2Axis=i,d3.rebind(a,b,"defined","isArea","size","xDomain","yDomain","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),a.x=function(c){return arguments.length?(b.x(c),d.x(c),a):b.x},a.y=function(c){return arguments.length?(b.y(c),d.y(c),a):b.y},a.margin=function(b){return arguments.length?(l.top=typeof b.top!="undefined"?b.top:l.top,l.right=typeof b.right!="undefined"?b.right:l.right,l.bottom=typeof b.bottom!="undefined"?b.bottom:l.bottom,l.left=typeof b.left!="undefined"?b.left:l.left,a):l},a.margin2=function(b){return arguments.length?(m=b,a):m},a.width=function(b){return arguments.length?(o=b,a):o},a.height=function(b){return arguments.length?(p=b,a):p},a.height2=function(b){return arguments.length?(q=b,a):q},a.color=function(b){return arguments.length?(n=c.utils.getColor(b),j.color(n),a):n},a.showLegend=function(b){return arguments.length?(v=b,a):v},a.tooltips=function(b){return arguments.length?(x=b,a):x},a.tooltipContent=function(b){return arguments.length?(y=b,a):y},a.interpolate=function(c){return arguments.length?(b.interpolate(c),d.interpolate(c),a):b.interpolate()},a.noData=function(b){return arguments.length?(z=b,a):z},a.xTickFormat=function(b){return arguments.length?(f.tickFormat(b),h.tickFormat(b),a):f.tickFormat()},a.yTickFormat=function(b){return arguments.length?(g.tickFormat(b),i.tickFormat(b),a):g.tickFormat()},a},c.models.multiBar=function(){function a(c){return c.each(function(a){var c=d-b.left-b.right,e=f-b.top-b.bottom,x=d3.select(this);n&&(a=d3.layout.stack().offset("zero").values(function(a){return a.values}).y(k)(a)),a=a.map(function(a,b){return a.values=a.values.map(function(a){return a.series=b,a}),a}),n&&a[0].values.map(function(b,c){var d=0,e=0;a.map(function(a){var b=a.values[c];b.size=Math.abs(b.y),b.y<0?(b.y1=e,e-=b.size):(b.y1=b.size+d,d+=b.size)})});var z=s&&t?[]:a.map(function(a){return a.values.map(function(a,b){return{x:j(a,b),y:k(a,b),y0:a.y0,y1:a.y1}})});g.domain(d3.merge(z).map(function(a){return a.x})).rangeBands([0,c],.1),h.domain(t||d3.extent(d3.merge(z).map(function(a){return n?a.y>0?a.y1:a.y1+a.y:a.y}).concat(l))).range([e,0]);if(g.domain()[0]===g.domain()[1]||h.domain()[0]===h.domain()[1])singlePoint=!0;g.domain()[0]===g.domain()[1]&&(g.domain()[0]?g.domain([g.domain()[0]-g.domain()[0]*.01,g.domain()[1]+g.domain()[1]*.01]):g.domain([-1,1])),h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]+h.domain()[0]*.01,h.domain()[1]-h.domain()[1]*.01]):h.domain([-1,1])),v=v||g,w=w||h;var A=x.selectAll("g.nv-wrap.nv-multibar").data([a]),B=A.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),C=B.append("defs"),D=B.append("g"),E=A.select("g");D.append("g").attr("class","nv-groups"),A.attr("transform","translate("+b.left+","+b.top+")"),C.append("clipPath").attr("id","nv-edge-clip-"+i).append("rect"),A.select("#nv-edge-clip-"+i+" rect").attr("width",c).attr("height",e),E.attr("clip-path",m?"url(#nv-edge-clip-"+i+")":"");var F=A.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});F.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(F.exit()).selectAll("rect.nv-bar").delay(function(b,c){return c*r/a[0].values.length}).attr("y",function(a){return n?w(a.y0):w(0)}).attr("height",0).remove(),F.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return o(a,b)}).style("stroke",function(a,b){return o(a,b)}),d3.transition(F).style("stroke-opacity",1).style("fill-opacity",.75);var G=F.selectAll("rect.nv-bar").data(function(a){return a.values});G.exit().remove();var H=G.enter().append("rect").attr("class",function(a,b){return k(a,b)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(b,c,d){return n?0:d*g.rangeBand()/a.length}).attr("y",function(a){return w(n?a.y0:0)}).attr("height",0).attr("width",g.rangeBand()/(n?1:a.length));G.style("fill",function(a,b,c){return o(a,c,b)}).style("stroke",function(a,b,c){return o(a,c,b)}).on("mouseover",function(b,c){d3.select(this).classed("hover",!0),u.elementMouseover({value:k(b,c),point:b,series:a[b.series],pos:[g(j(b,c))+g.rangeBand()*(n?a.length/2:b.series+.5)/a.length,h(k(b,c)+(n?b.y0:0))],pointIndex:c,seriesIndex:b.series,e:d3.event})}).on("mouseout",function(b,c){d3.select(this).classed("hover",!1),u.elementMouseout({value:k(b,c),point:b,series:a[b.series],pointIndex:c,seriesIndex:b.series,e:d3.event})}).on("click",function(b,c){u.elementClick({value:k(b,c),point:b,series:a[b.series],pos:[g(j(b,c))+g.rangeBand()*(n?a.length/2:b.series+.5)/a.length,h(k(b,c)+(n?b.y0:0))],pointIndex:c,seriesIndex:b.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(b,c){u.elementDblClick({value:k(b,c),point:b,series:a[b.series],pos:[g(j(b,c))+g.rangeBand()*(n?a.length/2:b.series+.5)/a.length,h(k(b,c)+(n?b.y0:0))],pointIndex:c,seriesIndex:b.series,e:d3.event}),d3.event.stopPropagation()}),G.attr("class",function(a,b){return k(a,b)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(a,b){return"translate("+g(j(a,b))+",0)"}),p&&(q||(q=a.map(function(){return!0})),G.style("fill",function(a,b,c){return d3.rgb(p(a,b)).darker(q.map(function(a,b){return b}).filter(function(a,b){return!q[b]})[c]).toString()}).style("stroke",function(a,b,c){return d3.rgb(p(a,b)).darker(q.map(function(a,b){return b}).filter(function(a,b){return!q[b]})[c]).toString()})),n?d3.transition(G).delay(function(b,c){return c*r/a[0].values.length}).attr("y",function(a,b){return h(n?a.y1:0)}).attr("height",function(a,b){return Math.max(Math.abs(h(a.y+(n?a.y0:0))-h(n?a.y0:0)),1)}).each("end",function(){d3.transition(d3.select(this)).attr("x",function(b,c){return n?0:b.series*g.rangeBand()/a.length}).attr("width",g.rangeBand()/(n?1:a.length))}):d3.transition(G).delay(function(b,c){return c*r/a[0].values.length}).attr("x",function(b,c){return b.series*g.rangeBand()/a.length}).attr("width",g.rangeBand()/a.length).each("end",function(){d3.transition(d3.select(this)).attr("y",function(a,b){return k(a,b)<0?h(0):h(0)-h(k(a,b))<1?h(0)-1:h(k(a,b))||0}).attr("height",function(a,b){return Math.max(Math.abs(h(k(a,b))-h(0)),1)||0})}),v=g.copy(),w=h.copy()}),a}var b={top:0,right:0,bottom:0,left:0},d=960,f=500,g=d3.scale.ordinal(),h=d3.scale.linear(),i=Math.floor(Math.random()*1e4),j=function(a){return a.x},k=function(a){return a.y},l=[0],m=!0,n=!1,o=c.utils.defaultColor(),p=null,q,r=1200,s,t,u=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),v,w;return a.dispatch=u,a.x=function(b){return arguments.length?(j=b,a):j},a.y=function(b){return arguments.length?(k=b,a):k},a.margin=function(c){return arguments.length?(b.top=typeof c.top!="undefined"?c.top:b.top,b.right=typeof c.right!="undefined"?c.right:b.right,b.bottom=typeof c.bottom!="undefined"?c.bottom:b.bottom,b.left=typeof c.left!="undefined"?c.left:b.left,a):b},a.width=function(b){return arguments.length?(d=b,a):d},a.height=function(b){return arguments.length?(f=b,a):f},a.xScale=function(b){return arguments.length?(g=b,a):g},a.yScale=function(b){return arguments.length?(h=b,a):h},a.xDomain=function(b){return arguments.length?(s=b,a):s},a.yDomain=function(b){return arguments.length?(t=b,a):t},a.forceY=function(b){return arguments.length?(l=b,a):l},a.stacked=function(b){return arguments.length?(n=b,a):n},a.clipEdge=function(b){return arguments.length?(m=b,a):m},a.color=function(b){return arguments.length?(o=c.utils.getColor(b),a):o},a.barColor=function(b){return arguments.length?(p=c.utils.getColor(b),a):p},a.disabled=function(b){return arguments.length?(q=b,a):q},a.id=function(b){return arguments.length?(i=b,a):i},a.delay=function(b){return arguments.length?(r=b,a):r},a},c.models.multiBarChart=function(){function a(c){return c.each(function(r){var z=d3.select(this),A=this,B=(j||parseInt(z.style("width"))||960)-i.left-i.right,C=(k||parseInt(z.style("height"))||400)-i.top-i.bottom;a.update=function(){c.transition().call(a)},a.container=this,u.disabled=r.map(function(a){return!!a.disabled});if(!r||!r.length||!r.filter(function(a){return a.values.length}).length){var D=z.selectAll(".nv-noData").data([v]);return D.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),D.attr("x",i.left+B/2).attr("y",i.top+C/2).text(function(a){return a}),a}z.selectAll(".nv-noData").remove(),s=b.xScale(),t=b.yScale();var F=z.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([r]),G=F.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),H=F.select("g");G.append("g").attr("class","nv-x nv-axis"),G.append("g").attr("class","nv-y nv-axis"),G.append("g").attr("class","nv-barsWrap"),G.append("g").attr("class","nv-legendWrap"),G.append("g").attr("class","nv-controlsWrap"),n&&(g.width(B-x()),b.barColor()&&r.forEach(function(a,b){a.color=d3.rgb("#ccc").darker(b*1.5).toString()}),H.select(".nv-legendWrap").datum(r).call(g),i.top!=g.height()&&(i.top=g.height(),C=(k||parseInt(z.style("height"))||400)-i.top-i.bottom),H.select(".nv-legendWrap").attr("transform","translate("+x()+","+ -i.top+")"));if(m){var I=[{key:"Grouped",disabled:b.stacked()},{key:"Stacked",disabled:!b.stacked()}];h.width(x()).color(["#444","#444","#444"]),H.select(".nv-controlsWrap").datum(I).attr("transform","translate(0,"+ -i.top+")").call(h)}F.attr("transform","translate("+i.left+","+i.top+")"),b.disabled(r.map(function(a){return a.disabled})).width(B).height(C).color(r.map(function(a,b){return a.color||l(a,b)}).filter(function(a,b){return!r[b].disabled}));var J=H.select(".nv-barsWrap").datum(r.filter(function(a){return!a.disabled}));d3.transition(J).call(b),d.scale(s).ticks(B/100).tickSize(-C,0),H.select(".nv-x.nv-axis").attr("transform","translate(0,"+t.range()[0]+")"),d3.transition(H.select(".nv-x.nv-axis")).call(d);var K=H.select(".nv-x.nv-axis > g").selectAll("g");K.selectAll("line, text").style("opacity",1),o&&K.filter(function(a,b){return b%Math.ceil(r[0].values.length/(B/100))!==0}).selectAll("text, line").style("opacity",0),p&&K.selectAll("text").attr("transform","rotate("+p+" 0,0)").attr("text-anchor",p>0?"start":"end"),H.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1),f.scale(t).ticks(C/36).tickSize(-B,0),d3.transition(H.select(".nv-y.nv-axis")).call(f),g.dispatch.on("legendClick",function(b,d){b.disabled=!b.disabled,r.filter(function(a){return!a.disabled}).length||r.map(function(a){return a.disabled=!1,F.selectAll(".nv-series").classed("disabled",!1),a}),u.disabled=r.map(function(a){return!!a.disabled}),w.stateChange(u),c.transition().call(a)}),h.dispatch.on("legendClick",function(d,f){if(!d.disabled)return;I=I.map(function(a){return a.disabled=!0,a}),d.disabled=!1;switch(d.key){case"Grouped":b.stacked(!1);break;case"Stacked":b.stacked(!0)}u.stacked=b.stacked(),w.stateChange(u),c.transition().call(a)}),w.on("tooltipShow",function(a){q&&y(a,A.parentNode)}),w.on("changeState",function(d){typeof d.disabled!="undefined"&&(r.forEach(function(a,b){a.disabled=d.disabled[b]}),u.disabled=d.disabled),typeof d.stacked!="undefined"&&(b.stacked(d.stacked),u.stacked=d.stacked),c.call(a)})}),a}var b=c.models.multiBar(),d=c.models.axis(),f=c.models.axis(),g=c.models.legend(),h=c.models.legend(),i={top:30,right:20,bottom:30,left:60},j=null,k=null,l=c.utils.defaultColor(),m=!0,n=!0,o=!0,p=0,q=!0,r=function(a,b,c,d,e){return"<h3>"+a+"</h3>"+"<p>"+c+" on "+b+"</p>"},s,t,u={stacked:!1},v="No Data Available.",w=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),x=function(){return m?180:0};b.stacked(!1),d.orient("bottom").tickPadding(7).highlightZero(!1).showMaxMin(!1).tickFormat(function(a){return a}),f.orient("left").tickFormat(d3.format(",.1f"));var y=function(g,h){var i=g.pos[0]+(h.offsetLeft||0),j=g.pos[1]+(h.offsetTop||0),k=d.tickFormat()(b.x()(g.point,g.pointIndex)),l=f.tickFormat()(b.y()(g.point,g.pointIndex)),m=r(g.series.key,k,l,g,a);c.tooltip.show([i,j],m,g.value<0?"n":"s",null,h)};return b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+i.left,a.pos[1]+i.top],w.tooltipShow(a)}),b.dispatch.on("elementMouseout.tooltip",function(a){w.tooltipHide(a)}),w.on("tooltipHide",function(){q&&c.tooltip.cleanup()}),a.dispatch=w,a.multibar=b,a.legend=g,a.xAxis=d,a.yAxis=f,d3.rebind(a,b,"x","y","xDomain","yDomain","forceX","forceY","clipEdge","id","stacked","delay","barColor"),a.margin=function(b){return arguments.length?(i.top=typeof b.top!="undefined"?b.top:i.top,i.right=typeof b.right!="undefined"?b.right:i.right,i.bottom=typeof b.bottom!="undefined"?b.bottom:i.bottom,i.left=typeof b.left!="undefined"?b.left:i.left,a):i},a.width=function(b){return arguments.length?(j=b,a):j},a.height=function(b){return arguments.length?(k=b,a):k},a.color=function(b){return arguments.length?(l=c.utils.getColor(b),g.color(l),a):l},a.showControls=function(b){return arguments.length?(m=b,a):m},a.showLegend=function(b){return arguments.length?(n=b,a):n},a.reduceXTicks=function(b){return arguments.length?(o=b,a):o},a.rotateLabels=function(b){return arguments.length?(p=b,a):p},a.tooltip=function(b){return arguments.length?(r=b,a):r},a.tooltips=function(b){return arguments.length?(q=b,a):q},a.tooltipContent=function(b){return arguments.length?(r=b,a):r},a.state=function(b){return arguments.length?(u=b,a):u},a.noData=function(b){return arguments.length?(v=b,a):v},a},c.models.multiBarHorizontal=function(){function a(c){return c.each(function(a){var c=d-b.left-b.right,e=f-b.top-b.bottom,g=d3.select(this);p&&(a=d3.layout.stack().offset("zero").values(function(a){return a.values}).y(k)(a)),a=a.map(function(a,b){return a.values=a.values.map(function(a){return a.series=b,a}),a}),p&&a[0].values.map(function(b,c){var d=0,e=0;a.map(function(a){var b=a.values[c];b.size=Math.abs(b.y),b.y<0?(b.y1=e-b.size,e-=b.size):(b.y1=d,d+=b.size)})});var t=u&&v?[]:a.map(function(a){return a.values.map(function(a,b){return{x:j(a,b),y:k(a,b),y0:a.y0,y1:a.y1}})});h.domain(u||d3.merge(t).map(function(a){return a.x})).rangeBands([0,e],.1),i.domain(v||d3.extent(d3.merge(t).map(function(a){return p?a.y>0?a.y1+a.y:a.y1:a.y}).concat(l))),q&&!p?i.range([i.domain()[0]<0?r:0,c-(i.domain()[1]>0?r:0)]):i.range([0,c]),x=x||h,y=y||d3.scale.linear().domain(i.domain()).range([i(0),i(0)]);var z=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([a]),A=z.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),B=A.append("defs"),C=A.append("g"),D=z.select("g");C.append("g").attr("class","nv-groups"),z.attr("transform","translate("+b.left+","+b.top+")");var F=z.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});F.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(F.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),F.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return m(a,b)}).style("stroke",function(a,b){return m(a,b)}),d3.transition(F).style("stroke-opacity",1).style("fill-opacity",.75);var G=F.selectAll("g.nv-bar").data(function(a){return a.values});G.exit().remove();var H=G.enter().append("g").attr("transform",function(b,c,d){return"translate("+y(p?b.y0:0)+","+(p?0:d*h.rangeBand()/a.length+h(j(b,c)))+")"});H.append("rect").attr("width",0).attr("height",h.rangeBand()/(p?1:a.length)),G.on("mouseover",function(b,c){d3.select(this).classed("hover",!0),w.elementMouseover({value:k(b,c),point:b,series:a[b.series],pos:[i(k(b,c)+(p?b.y0:0)),h(j(b,c))+h.rangeBand()*(p?a.length/2:b.series+.5)/a.length],pointIndex:c,seriesIndex:b.series,e:d3.event})}).on("mouseout",function(b,c){d3.select(this).classed("hover",!1),w.elementMouseout({value:k(b,c),point:b,series:a[b.series],pointIndex:c,seriesIndex:b.series,e:d3.event})}).on("click",function(b,c){w.elementClick({value:k(b,c),point:b,series:a[b.series],pos:[h(j(b,c))+h.rangeBand()*(p?a.length/2:b.series+.5)/a.length,i(k(b,c)+(p?b.y0:0))],pointIndex:c,seriesIndex:b.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(b,c){w.elementDblClick({value:k(b,c),point:b,series:a[b.series],pos:[h(j(b,c))+h.rangeBand()*(p?a.length/2:b.series+.5)/a.length,i(k(b,c)+(p?b.y0:0))],pointIndex:c,seriesIndex:b.series,e:d3.event}),d3.event.stopPropagation()}),H.append("text"),q&&!p?(G.select("text").attr("text-anchor",function(a,b){return k(a,b)<0?"end":"start"}).attr("y",h.rangeBand()/(a.length*2)).attr("dy",".32em").text(function(a,b){return s(k(a,b))}),d3.transition(G).select("text").attr("x",function(a,b){return k(a,b)<0?-4:i(k(a,b))-i(0)+4})):G.selectAll("text").text(""),G.attr("class",function(a,b){return k(a,b)<0?"nv-bar negative":"nv-bar positive"}),n&&(o||(o=a.map(function(){return!0})),G.style("fill",function(a,b,c){return d3.rgb(n(a,b)).darker(o.map(function(a,b){return b}).filter(function(a,b){return!o[b]})[c]).toString()}).style("stroke",function(a,b,c){return d3.rgb(n(a,b)).darker(o.map(function(a,b){return b}).filter(function(a,b){return!o[b]})[c]).toString()})),p?d3.transition(G).attr("transform",function(a,b){return"translate("+i(a.y1)+","+h(j(a,b))+")"}).select("rect").attr("width",function(a,b){return Math.abs(i(k(a,b)+a.y0)-i(a.y0))}).attr("height",h.rangeBand()):d3.transition(G).attr("transform",function(b,c){return"translate("+(k(b,c)<0?i(k(b,c)):i(0))+","+(b.series*h.rangeBand()/a.length+h(j(b,c)))+")"}).select("rect").attr("height",h.rangeBand()/a.length).attr("width",function(a,b){return Math.max(Math.abs(i(k(a,b))-i(0)),1)}),x=h.copy(),y=i.copy()}),a}var b={top:0,right:0,bottom:0,left:0},d=960,f=500,g=Math.floor(Math.random()*1e4),h=d3.scale.ordinal(),i=d3.scale.linear(),j=function(a){return a.x},k=function(a){return a.y},l=[0],m=c.utils.defaultColor(),n=null,o,p=!1,q=!1,r=60,s=d3.format(",.2f"),t=1200,u,v,w=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),x,y;return a.dispatch=w,a.x=function(b){return arguments.length?(j=b,a):j},a.y=function(b){return arguments.length?(k=b,a):k},a.margin=function(c){return arguments.length?(b.top=typeof c.top!="undefined"?c.top:b.top,b.right=typeof c.right!="undefined"?c.right:b.right,b.bottom=typeof c.bottom!="undefined"?c.bottom:b.bottom,b.left=typeof c.left!="undefined"?c.left:b.left,a):b},a.width=function(b){return arguments.length?(d=b,a):d},a.height=function(b){return arguments.length?(f=b,a):f},a.xScale=function(b){return arguments.length?(h=b,a):h},a.yScale=function(b){return arguments.length?(i=b,a):i},a.xDomain=function(b){return arguments.length?(u=b,a):u},a.yDomain=function(b){return arguments.length?(v=b,a):v},a.forceY=function(b){return arguments.length?(l=b,a):l},a.stacked=function(b){return arguments.length?(p=b,a):p},a.color=function(b){return arguments.length?(m=c.utils.getColor(b),a):m},a.barColor=function(b){return arguments.length?(n=c.utils.getColor(b),a):n},a.disabled=function(b){return arguments.length?(o=b,a):o},a.id=function(b){return arguments.length?(g=b,a):g},a.delay=function(b){return arguments.length?(t=b,a):t},a.showValues=function(b){return arguments.length?(q=b,a):q},a.valueFormat=function(b){return arguments.length?(s=b,a):s},a.valuePadding=function(b){return arguments.length?(r=b,a):r},a},c.models.multiBarHorizontalChart=function(){function a(c){return c.each(function(o){var q=d3.select(this),z=this,A=(j||parseInt(q.style("width"))||960)-i.left-i.right,B=(k||parseInt(q.style("height"))||400)-i.top-i.bottom;a.update=function(){c.transition().call(a)},a.container=this,t.disabled=o.map(function(a){return!!a.disabled});if(!o||!o.length||!o.filter(function(a){return a.values.length}).length){var C=q.selectAll(".nv-noData").data([u]);return C.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),C.attr("x",i.left+A/2).attr("y",i.top+B/2).text(function(a){return a}),a}q.selectAll(".nv-noData").remove(),r=b.xScale(),s=b.yScale();var D=q.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([o]),F=D.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),G=D.select("g");F.append("g").attr("class","nv-x nv-axis"),F.append("g").attr("class","nv-y nv-axis"),F.append("g").attr("class","nv-barsWrap"),F.append("g").attr("class","nv-legendWrap"),F.append("g").attr("class","nv-controlsWrap"),n&&(g.width(A-w()),b.barColor()&&o.forEach(function(a,b){a.color=d3.rgb("#ccc").darker(b*1.5).toString()}),G.select(".nv-legendWrap").datum(o).call(g),i.top!=g.height()&&(i.top=g.height(),B=(k||parseInt(q.style("height"))||400)-i.top-i.bottom),G.select(".nv-legendWrap").attr("transform","translate("+w()+","+ -i.top+")"));if(m){var H=[{key:"Grouped",disabled:b.stacked()},{key:"Stacked",disabled:!b.stacked()}];h.width(w()).color(["#444","#444","#444"]),G.select(".nv-controlsWrap").datum(H).attr("transform","translate(0,"+ -i.top+")").call(h)}D.attr("transform","translate("+i.left+","+i.top+")"),b.disabled(o.map(function(a){return a.disabled})).width(A).height(B).color(o.map(function(a,b){return a.color||l(a,b)}).filter(function(a,b){return!o[b].disabled}));var I=G.select(".nv-barsWrap").datum(o.filter(function(a){return!a.disabled}));d3.transition(I).call(b),d.scale(r).ticks(B/24).tickSize(-A,0),d3.transition(G.select(".nv-x.nv-axis")).call(d);var J=G.select(".nv-x.nv-axis").selectAll("g");J.selectAll("line, text").style("opacity",1),f.scale(s).ticks(A/100).tickSize(-B,0),G.select(".nv-y.nv-axis").attr("transform","translate(0,"+B+")"),d3.transition(G.select(".nv-y.nv-axis")).call(f),g.dispatch.on("legendClick",function(b,d){b.disabled=!b.disabled,o.filter(function(a){return!a.disabled}).length||o.map(function(a){return a.disabled=!1,D.selectAll(".nv-series").classed("disabled",!1),a}),t.disabled=o.map(function(a){return!!a.disabled}),v.stateChange(t),c.transition().call(a)}),h.dispatch.on("legendClick",function(d,f){if(!d.disabled)return;H=H.map(function(a){return a.disabled=!0,a}),d.disabled=!1;switch(d.key){case"Grouped":b.stacked(!1);break;case"Stacked":b.stacked(!0)}t.stacked=b.stacked(),v.stateChange(t),c.transition().call(a)}),v.on("tooltipShow",function(a){p&&x(a,z.parentNode)}),v.on("changeState",function(d){typeof d.disabled!="undefined"&&(o.forEach(function(a,b){a.disabled=d.disabled[b]}),t.disabled=d.disabled),typeof d.stacked!="undefined"&&(b.stacked(d.stacked),t.stacked=d.stacked),c.call(a)})}),a}var b=c.models.multiBarHorizontal(),d=c.models.axis(),f=c.models.axis(),g=c.models.legend().height(30),h=c.models.legend().height(30),i={top:30,right:20,bottom:50,left:60},j=null,k=null,l=c.utils.defaultColor(),m=!0,n=!0,o=!1,p=!0,q=function(a,b,c,d,e){return"<h3>"+a+" - "+b+"</h3>"+"<p>"+c+"</p>"},r,s,t={stacked:o},u="No Data Available.",v=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),w=function(){return m?180:0};b.stacked(o),d.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(a){return a}),f.orient("bottom").tickFormat(d3.format(",.1f"));var x=function(g,h){var i=g.pos[0]+(h.offsetLeft||0),j=g.pos[1]+(h.offsetTop||0),k=d.tickFormat()(b.x()(g.point,g.pointIndex)),l=f.tickFormat()(b.y()(g.point,g.pointIndex)),m=q(g.series.key,k,l,g,a);c.tooltip.show([i,j],m,g.value<0?"e":"w",null,h)};return b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+i.left,a.pos[1]+i.top],v.tooltipShow(a)}),b.dispatch.on("elementMouseout.tooltip",function(a){v.tooltipHide(a)}),v.on("tooltipHide",function(){p&&c.tooltip.cleanup()}),a.dispatch=v,a.multibar=b,a.legend=g,a.xAxis=d,a.yAxis=f,d3.rebind(a,b,"x","y","xDomain","yDomain","forceX","forceY","clipEdge","id","delay","showValues","valueFormat","stacked","barColor"),a.margin=function(b){return arguments.length?(i.top=typeof b.top!="undefined"?b.top:i.top,i.right=typeof b.right!="undefined"?b.right:i.right,i.bottom=typeof b.bottom!="undefined"?b.bottom:i.bottom,i.left=typeof b.left!="undefined"?b.left:i.left,a):i},a.width=function(b){return arguments.length?(j=b,a):j},a.height=function(b){return arguments.length?(k=b,a):k},a.color=function(b){return arguments.length?(l=c.utils.getColor(b),g.color(l),a):l},a.showControls=function(b){return arguments.length?(m=b,a):m},a.showLegend=function(b){return arguments.length?(n=b,a):n},a.tooltip=function(b){return arguments.length?(q=b,a):q},a.tooltips=function(b){return arguments.length?(p=b,a):p},a.tooltipContent=function(b){return arguments.length?(q=b,a):q},a.state=function(b){return arguments.length?(t=b,a):t},a.noData=function(b){return arguments.length?(u=b,a):u},a},c.models.multiChart=function(){function a(c){return c.each(function(j){var l=d3.select(this),A=this,B=(f||parseInt(l.style("width"))||960)-b.left-b.right,C=(g||parseInt(l.style("height"))||400)-b.top-b.bottom,D=j.filter(function(a){return!a.disabled&&a.type=="line"&&a.yAxis==1}),F=j.filter(function(a){return!a.disabled&&a.type=="line"&&a.yAxis==2}),G=j.filter(function(a){return!a.disabled&&a.type=="bar"&&a.yAxis==1}),H=j.filter(function(a){return!a.disabled&&a.type=="bar"&&a.yAxis==2}),I=j.filter(function(a){return!a.disabled&&a.type=="area"&&a.yAxis==1}),J=j.filter(function(a){return!a.disabled&&a.type=="area"&&a.yAxis==2}),K=j.filter(function(a){return!a.disabled&&a.yAxis==1}).map(function(a){return a.values.map(function(a,b){return{x:a.x,y:a.y}})}),L=j.filter(function(a){return!a.disabled&&a.yAxis==2}).map(function(a){return a.values.map(function(a,b){return{x:a.x,y:a.y}})});k.domain(d3.extent(d3.merge(K.concat(L)),function(a){return a.x})).range([0,B]);var M=l.selectAll("g.wrap.multiChart").data([j]),N=M.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");N.append("g").attr("class","x axis"),N.append("g").attr("class","y1 axis"),N.append("g").attr("class","y2 axis"),N.append("g").attr("class","lines1Wrap"),N.append("g").attr("class","lines2Wrap"),N.append("g").attr("class","bars1Wrap"),N.append("g").attr("class","bars2Wrap"),N.append("g").attr("class","stack1Wrap"),N.append("g").attr("class","stack2Wrap"),N.append("g").attr("class","legendWrap");var O=M.select("g");h&&(x.width(B/2),O.select(".legendWrap").datum(j.map(function(a){return a.originalKey=a.originalKey===undefined?a.key:a.originalKey,a.key=a.originalKey+(a.yAxis==1?"":" (right axis)"),a})).call(x),b.top!=x.height()&&(b.top=x.height(),C=(g||parseInt(l.style("height"))||400)-b.top-b.bottom),O.select(".legendWrap").attr("transform","translate("+B/2+","+ -b.top+")")),o.width(B).height(C).interpolate("monotone").color(j.map(function(a,b){return a.color||d[b%d.length]}).filter(function(a,b){return!j[b].disabled&&j[b].yAxis==1&&j[b].type=="line"})),p.width(B).height(C).interpolate("monotone").color(j.map(function(a,b){return a.color||d[b%d.length]}).filter(function(a,b){return!j[b].disabled&&j[b].yAxis==2&&j[b].type=="line"})),q.width(B).height(C).color(j.map(function(a,b){return a.color||d[b%d.length]}).filter(function(a,b){return!j[b].disabled&&j[b].yAxis==1&&j[b].type=="bar"})),r.width(B).height(C).color(j.map(function(a,b){return a.color||d[b%d.length]}).filter(function(a,b){return!j[b].disabled&&j[b].yAxis==2&&j[b].type=="bar"})),s.width(B).height(C).color(j.map(function(a,b){return a.color||d[b%d.length]}).filter(function(a,b){return!j[b].disabled&&j[b].yAxis==1&&j[b].type=="area"})),t.width(B).height(C).color(j.map(function(a,b){return a.color||d[b%d.length]}).filter(function(a,b){return!j[b].disabled&&j[b].yAxis==2&&j[b].type=="area"})),O.attr("transform","translate("+b.left+","+b.top+")");var P=O.select(".lines1Wrap").datum(D),Q=O.select(".bars1Wrap").datum(G),R=O.select(".stack1Wrap").datum(I),U=O.select(".lines2Wrap").datum(F),V=O.select(".bars2Wrap").datum(H),W=O.select(".stack2Wrap").datum(J),X=I.length?I.map(function(a){return a.values}).reduce(function(a,b){return a.map(function(a,c){return{x:a.x,y:a.y+b[c].y}})}).concat([{x:0,y:0}]):[],Y=J.length?J.map(function(a){return a.values}).reduce(function(a,b){return a.map(function(a,c){return{x:a.x,y:a.y+b[c].y}})}).concat([{x:0,y:0}]):[];m.domain(d3.extent(d3.merge(K).concat(X),function(a){return a.y})).range([0,C]),n.domain(d3.extent(d3.merge(L).concat(Y),function(a){return a.y})).range([0,C]),o.yDomain(m.domain()),q.yDomain(m.domain()),s.yDomain(m.domain()),p.yDomain(n.domain()),r.yDomain(n.domain()),t.yDomain(n.domain()),I.length&&d3.transition(R).call(s),J.length&&d3.transition(W).call(t),G.length&&d3.transition(Q).call(q),H.length&&d3.transition(V).call(r),D.length&&d3.transition(P).call(o),F.length&&d3.transition(U).call(p),u.ticks(B/100).tickSize(-C,0),O.select(".x.axis").attr("transform","translate(0,"+C+")"),d3.transition(O.select(".x.axis")).call(u),v.ticks(C/36).tickSize(-B,0),d3.transition(O.select(".y1.axis")).call(v),w.ticks(C/36).tickSize(-B,0),d3.transition(O.select(".y2.axis")).call(w),O.select(".y2.axis").style("opacity",L.length?1:0).attr("transform","translate("+k.range()[1]+",0)"),x.dispatch.on("legendClick",function(b,d){b.disabled=!b.disabled,j.filter(function(a){return!a.disabled}).length||j.map(function(a){return a.disabled=!1,M.selectAll(".series").classed("disabled",!1),a}),c.transition().call(a)}),y.on("tooltipShow",function(a){i&&z(a,A.parentNode)})}),a.update=function(){a(c)},a.container=this,a}var b={top:30,right:20,bottom:50,left:60},d=d3.scale.category20().range(),f=null,g=null,h=!0,i=!0,j=function(a,b,c,d,e){return"<h3>"+a+"</h3>"+"<p>"+c+" at "+b+"</p>"},k,l,k=d3.scale.linear(),m=d3.scale.linear(),n=d3.scale.linear(),o=c.models.line().yScale(m),p=c.models.line().yScale(n),q=c.models.multiBar().stacked(!1).yScale(m),r=c.models.multiBar().stacked(!1).yScale(n),s=c.models.stackedArea().yScale(m),t=c.models.stackedArea().yScale(n),u=c.models.axis().scale(k).orient("bottom").tickPadding(5),v=c.models.axis().scale(m).orient("left"),w=c.models.axis().scale(n).orient("right"),x=c.models.legend().height(30),y=d3.dispatch("tooltipShow","tooltipHide"),z=function(b,d){var f=b.pos[0]+(d.offsetLeft||0),g=b.pos[1]+(d.offsetTop||0),h=u.tickFormat()(o.x()(b.point,b.pointIndex)),i=(b.series.yAxis==2?w:v).tickFormat()(o.y()(b.point,b.pointIndex)),k=j(b.series.key,h,i,b,a);c.tooltip.show([f,g],k,undefined,undefined,d.offsetParent)};return o.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top],y.tooltipShow(a)}),o.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)}),p.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top],y.tooltipShow(a)}),p.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)}),q.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top],y.tooltipShow(a)}),q.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)}),r.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top],y.tooltipShow(a)}),r.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)}),s.dispatch.on("tooltipShow",function(a){if(!Math.round(s.y()(a.point)*100))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;a.pos=[a.pos[0]+b.left,a.pos[1]+b.top],y.tooltipShow(a)}),s.dispatch.on("tooltipHide",function(a){y.tooltipHide(a)}),t.dispatch.on("tooltipShow",function(a){if(!Math.round(t.y()(a.point)*100))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;a.pos=[a.pos[0]+b.left,a.pos[1]+b.top],y.tooltipShow(a)}),t.dispatch.on("tooltipHide",function(a){y.tooltipHide(a)}),o.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top],y.tooltipShow(a)}),o.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)}),p.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top],y.tooltipShow(a)}),p.dispatch.on("elementMouseout.tooltip",function(a){y.tooltipHide(a)}),y.on("tooltipHide",function(){i&&c.tooltip.cleanup()}),a.dispatch=y,a.lines1=o,a.lines2=p,a.bars1=q,a.bars2=r,a.stack1=s,a.stack2=t,a.xAxis=u,a.yAxis1=v,a.yAxis2=w,a.x=function(b){return arguments.length?(getX=b,o.x(b),q.x(b),a):getX},a.y=function(b){return arguments.length?(getY=b,o.y(b),q.y(b),a):getY},a.margin=function(c){return arguments.length?(b=c,a):b},a.width=function(b){return arguments.length?(f=b,a):f},a.height=function(b){return arguments.length?(g=b,a):g},a.color=function(b){return arguments.length?(d=b,x.color(b),a):d},a.showLegend=function(b){return arguments.length?(h=b,a):h},a.tooltips=function(b){return arguments.length?(i=b,a):i},a.tooltipContent=function(b){return arguments.length?(j=b,a):j},a},c.models.ohlcBar=function(){function a(c){return c.each(function(a){var c=d-b.left-b.right,e=f-b.top-b.bottom,t=d3.select(this);h.domain(u||d3.extent(a[0].values.map(j).concat(p))),r?h.range([c*.5/a[0].values.length,c*(a[0].values.length-.5)/a[0].values.length]):h.range([0,c]),i.domain(v||[d3.min(a[0].values.map(o).concat(q)),d3.max(a[0].values.map(n).concat(q))]).range([e,0]);if(h.domain()[0]===h.domain()[1]||i.domain()[0]===i.domain()[1])singlePoint=!0;h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]-h.domain()[0]*.01,h.domain()[1]+h.domain()[1]*.01]):h.domain([-1,1])),i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]+i.domain()[0]*.01,i.domain()[1]-i.domain()[1]*.01]):i.domain([-1,1]));var x=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([a[0].values]),z=x.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),A=z.append("defs"),B=z.append("g"),C=x.select("g");B.append("g").attr("class","nv-ticks"),x.attr("transform","translate("+b.left+","+b.top+")"),t.on("click",function(a,b){w.chartClick({data:a,index:b,pos:d3.event,id:g})}),A.append("clipPath").attr("id","nv-chart-clip-path-"+g).append("rect"),x.select("#nv-chart-clip-path-"+g+" rect").attr("width",c).attr("height",e),C.attr("clip-path",s?"url(#nv-chart-clip-path-"+g+")":"");var D=x.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});D.exit().remove();var E=D.enter().append("path").attr("class",function(a,b,c){return(l(a,b)>m(a,b)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+c+"-"+b}).attr("d",function(b,d){var e=c/a[0].values.length*.9;return"m0,0l0,"+(i(l(b,d))-i(n(b,d)))+"l"+ -e/2+",0l"+e/2+",0l0,"+(i(o(b,d))-i(l(b,d)))+"l0,"+(i(m(b,d))-i(o(b,d)))+"l"+e/2+",0l"+ -e/2+",0z"}).attr("transform",function(a,b){return"translate("+h(j(a,b))+","+i(n(a,b))+")"}).on("mouseover",function(b,c){d3.select(this).classed("hover",!0),w.elementMouseover({point:b,series:a[0],pos:[h(j(b,c)),i(k(b,c))],pointIndex:c,seriesIndex:0,e:d3.event})}).on("mouseout",function(b,c){d3.select(this).classed("hover",!1),w.elementMouseout({point:b,series:a[0],pointIndex:c,seriesIndex:0,e:d3.event})}).on("click",function(a,b){w.elementClick({value:k(a,b),data:a,index:b,pos:[h(j(a,b)),i(k(a,b))],e:d3.event,id:g}),d3.event.stopPropagation()}).on("dblclick",function(a,b){w.elementDblClick({value:k(a,b),data:a,index:b,pos:[h(j(a,b)),i(k(a,b))],e:d3.event,id:g}),d3.event.stopPropagation()});D.attr("class",function(a,b,c){return(l(a,b)>m(a,b)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+c+"-"+b}),d3.transition(D).attr("transform",function(a,b){return"translate("+h(j(a,b))+","+i(n(a,b))+")"}).attr("d",function(b,d){var e=c/a[0].values.length*.9;return"m0,0l0,"+(i(l(b,d))-i(n(b,d)))+"l"+ -e/2+",0l"+e/2+",0l0,"+(i(o(b,d))-i(l(b,d)))+"l0,"+(i(m(b,d))-i(o(b,d)))+"l"+e/2+",0l"+ -e/2+",0z"})}),a}var b={top:0,right:0,bottom:0,left:0},d=960,f=500,g=Math.floor(Math.random()*1e4),h=d3.scale.linear(),i=d3.scale.linear(),j=function(a){return a.x},k=function(a){return a.y},l=function(a){return a.open},m=function(a){return a.close},n=function(a){return a.high},o=function(a){return a.low},p=[],q=[],r=!1,s=!0,t=c.utils.defaultColor(),u,v,w=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return a.dispatch=w,a.x=function(b){return arguments.length?(j=b,a):j},a.y=function(b){return arguments.length?(k=b,a):k},a.open=function(b){return arguments.length?(l=b,a):l},a.close=function(b){return arguments.length?(m=b,a):m},a.high=function(b){return arguments.length?(n=b,a):n},a.low=function(b){return arguments.length?(o=b,a):o},a.margin=function(c){return arguments.length?(b.top=typeof c.top!="undefined"?c.top:b.top,b.right=typeof c.right!="undefined"?c.right:b.right,b.bottom=typeof c.bottom!="undefined"?c.bottom:b.bottom,b.left=typeof c.left!="undefined"?c.left:b.left,a):b},a.width=function(b){return arguments.length?(d=b,a):d},a.height=function(b){return arguments.length?(f=b,a):f},a.xScale=function(b){return arguments.length?(h=b,a):h},a.yScale=function(b){return arguments.length?(i=b,a):i},a.xDomain=function(b){return arguments.length?(u=b,a):u},a.yDomain=function(b){return arguments.length?(v=b,a):v},a.forceX=function(b){return arguments.length?(p=b,a):p},a.forceY=function(b){return arguments.length?(q=b,a):q},a.padData=function(b){return arguments.length?(r=b,a):r},a.clipEdge=function(b){return arguments.length?(s=b,a):s},a.color=function(b){return arguments.length?(t=c.utils.getColor(b),a):t},a.id=function(b){return arguments.length?(g=b,a):g},a},c.models.pie=function(){function a(c){return c.each(function(a){function c(a){var b=(a.startAngle+a.endAngle)*90/Math.PI-90;return b>90?b-180:b}function e(a){r||(a.innerRadius=0);var b=d3.interpolate(this._current,a);return this._current=b(0),function(a){return G(b(a))}}function j(a){a.innerRadius=0;var b=d3.interpolate({startAngle:0,endAngle:0},a);return function(a){return G(b(a))}}var m=d-b.left-b.right,x=f-b.top-b.bottom,z=Math.min(m,x)/2,A=z-z/5,B=d3.select(this),C=B.selectAll(".nv-wrap.nv-pie").data([g(a[0])]),D=C.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+k),E=D.append("g"),F=C.select("g");E.append("g").attr("class","nv-pie"),C.attr("transform","translate("+b.left+","+b.top+")"),F.select(".nv-pie").attr("transform","translate("+m/2+","+x/2+")"),B.on("click",function(a,b){w.chartClick({data:a,index:b,pos:d3.event,id:k})});var G=d3.svg.arc().outerRadius(A);t&&G.startAngle(t),u&&G.endAngle(u),r&&G.innerRadius(z*v);var H=d3.layout.pie().sort(null).value(function(a){return a.disabled?0:i(a)}),I=C.select(".nv-pie").selectAll(".nv-slice").data(H);I.exit().remove();var J=I.enter().append("g").attr("class","nv-slice").on("mouseover",function(a,b){d3.select(this).classed("hover",!0),w.elementMouseover({label:h(a.data),value:i(a.data),point:a.data,pointIndex:b,pos:[d3.event.pageX,d3.event.pageY],id:k})}).on("mouseout",function(a,b){d3.select(this).classed("hover",!1),w.elementMouseout({label:h(a.data),value:i(a.data),point:a.data,index:b,id:k})}).on("click",function(a,b){w.elementClick({label:h(a.data),value:i(a.data),point:a.data,index:b,pos:d3.event,id:k}),d3.event.stopPropagation()}).on("dblclick",function(a,b){w.elementDblClick({label:h(a.data),value:i(a.data),point:a.data,index:b,pos:d3.event,id:k}),d3.event.stopPropagation()});I.attr("fill",function(a,b){return l(a,b)}).attr("stroke",function(a,b){return l(a,b)});var K=J.append("path").each(function(a){this._current=a});d3.transition(I.select("path")).attr("d",G).attrTween("d",e);if(n){var L=d3.svg.arc().innerRadius(0);o&&(L=G),p&&(L=d3.svg.arc().outerRadius(G.outerRadius())),J.append("g").classed("nv-label",!0).each(function(a,b){var c=d3.select(this);c.attr("transform",function(a){if(s){a.outerRadius=A+10,a.innerRadius=A+15;var b=(a.startAngle+a.endAngle)/2*(180/Math.PI);return(a.startAngle+a.endAngle)/2<Math.PI?b-=90:b+=90,"translate("+L.centroid(a)+") rotate("+b+")"}return a.outerRadius=z+10,a.innerRadius=z+15,"translate("+L.centroid(a)+")"}),c.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),c.append("text").style("text-anchor",s?(a.startAngle+a.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")}),I.select(".nv-label").transition().attr("transform",function(a){if(s){a.outerRadius=A+10,a.innerRadius=A+15;var b=(a.startAngle+a.endAngle)/2*(180/Math.PI);return(a.startAngle+a.endAngle)/2<Math.PI?b-=90:b+=90,"translate("+L.centroid(a)+") rotate("+b+")"}return a.outerRadius=z+10,a.innerRadius=z+15,"translate("+L.centroid(a)+")"}),I.each(function(a,b){var c=d3.select(this);c.select(".nv-label text").style("text-anchor",s?(a.startAngle+a.endAngle)/2<Math.PI?"start":"end":"middle").text(function(a,b){var c=(a.endAngle-a.startAngle)/(2*Math.PI);return a.value&&c>q?h(a.data):""});var d=c.select("text").node().getBBox();c.select(".nv-label rect").attr("width",d.width+10).attr("height",d.height+10).attr("transform",function(){return"translate("+[d.x-5,d.y-5]+")"})})}}),a}var b={top:0,right:0,bottom:0,left:0},d=500,f=500,g=function(a){return a.values},h=function(a){return a.x},i=function(a){return a.y},j=function(a){return a.description},k=Math.floor(Math.random()*1e4),l=c.utils.defaultColor(),m=d3.format(",.2f"),n=!0,o=!0,p=!1,q=.02,r=!1,s=!1,t=!1,u=!1,v=.5,w=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return a.dispatch=w,a.margin=function(c){return arguments.length?(b.top=typeof c.top!="undefined"?c.top:b.top,b.right=typeof c.right!="undefined"?c.right:b.right,b.bottom=typeof c.bottom!="undefined"?c.bottom:b.bottom,b.left=typeof c.left!="undefined"?c.left:b.left,a):b},a.width=function(b){return arguments.length?(d=b,a):d},a.height=function(b){return arguments.length?(f=b,a):f},a.values=function(b){return arguments.length?(g=b,a):g},a.x=function(b){return arguments.length?(h=b,a):h},a.y=function(b){return arguments.length?(i=d3.functor(b),a):i},a.description=function(b){return arguments.length?(j=b,a):j},a.showLabels=function(b){return arguments.length?(n=b,a):n},a.labelSunbeamLayout=function(b){return arguments.length?(s=b,a):s},a.donutLabelsOutside=function(b){return arguments.length?(p=b,a):p},a.pieLabelsOutside=function(b){return arguments.length?(o=b,a):o},a.donut=function(b){return arguments.length?(r=b,a):r},a.donutRatio=function(b){return arguments.length?(v=b,a):v},a.startAngle=function(b){return arguments.length?(t=b,a):t},a.endAngle=function(b){return arguments.length?(u=b,a):u},a.id=function(b){return arguments.length?(k=b,a):k},a.color=function(b){return arguments.length?(l=c.utils.getColor(b),a):l},a.valueFormat=function(b){return arguments.length?(m=b,a):m},a.labelThreshold=function(b){return arguments.length?(q=b,a):q},a},c.models.pieChart=function(){function a(c){return c.each(function(j){var k=d3.select(this),l=this,p=(g||parseInt(k.style("width"))||960)-f.left-f.right,q=(h||parseInt(k.style("height"))||400)-f.top-f.bottom;a.update=function(){a(c)},a.container=this,m.disabled=j[0].map(function(a){return!!a.disabled});if(!j[0]||!j[0].length){var u=k.selectAll(".nv-noData").data([n]);return u.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),u.attr("x",f.left+p/2).attr("y",f.top+q/2).text(function(a){return a}),a}k.selectAll(".nv-noData").remove();var v=k.selectAll("g.nv-wrap.nv-pieChart").data([j]),w=v.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),x=v.select("g");w.append("g").attr("class","nv-pieWrap"),w.append("g").attr("class","nv-legendWrap"),i&&(d.width(p).key(b.x()),v.select(".nv-legendWrap").datum(b.values()(j[0])).call(d),f.top!=d.height()&&(f.top=d.height(),q=(h||parseInt(k.style("height"))||400)-f.top-f.bottom),v.select(".nv-legendWrap").attr("transform","translate(0,"+ -f.top+")")),v.attr("transform","translate("+f.left+","+f.top+")"),b.width(p).height(q);var y=x.select(".nv-pieWrap").datum(j);d3.transition(y).call(b),d.dispatch.on("legendClick",function(d,f,g){d.disabled=!d.disabled,b.values()(j[0]).filter(function(a){return!a.disabled}).length||b.values()(j[0]).map(function(a){return a.disabled=!1,v.selectAll(".nv-series").classed("disabled",!1),a}),m.disabled=j[0].map(function(a){return!!a.disabled}),o.stateChange(m),c.transition().call(a)}),b.dispatch.on("elementMouseout.tooltip",function(a){o.tooltipHide(a)}),o.on("changeState",function(b){typeof b.disabled!="undefined"&&(j[0].forEach(function(a,c){a.disabled=b.disabled[c]}),m.disabled=b.disabled),c.call(a)})}),a}var b=c.models.pie(),d=c.models.legend(),f={top:30,right:20,bottom:20,left:20},g=null,h=null,i=!0,j=c.utils.defaultColor(),k=!0,l=function(a,b,c,d){return"<h3>"+a+"</h3>"+"<p>"+b+"</p>"},m={},n="No Data Available.",o=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),p=function(d,f){var g=b.description()(d.point)||b.x()(d.point),h=d.pos[0]+(f&&f.offsetLeft||0),i=d.pos[1]+(f&&f.offsetTop||0),j=b.valueFormat()(b.y()(d.point)),k=l(g,j,d,a);c.tooltip.show([h,i],k,d.value<0?"n":"s",null,f)};return b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+f.left,a.pos[1]+f.top],o.tooltipShow(a)}),o.on("tooltipShow",function(a){k&&p(a)}),o.on("tooltipHide",function(){k&&c.tooltip.cleanup()}),a.legend=d,a.dispatch=o,a.pie=b,d3.rebind(a,b,"valueFormat","values","x","y","description","id","showLabels","donutLabelsOutside","pieLabelsOutside","donut","donutRatio","labelThreshold"),a.margin=function(b){return arguments.length?(f.top=typeof b.top!="undefined"?b.top:f.top,f.right=typeof b.right!="undefined"?b.right:f.right,f.bottom=typeof b.bottom!="undefined"?b.bottom:f.bottom,f.left=typeof b.left!="undefined"?b.left:f.left,a):f},a.width=function(b){return arguments.length?(g=b,a):g},a.height=function(b){return arguments.length?(h=b,a):h},a.color=function(f){return arguments.length?(j=c.utils.getColor(f),d.color(j),b.color(j),a):j},a.showLegend=function(b){return arguments.length?(i=b,a):i},a.tooltips=function(b){return arguments.length?(k=b,a):k},a.tooltipContent=function(b){return arguments.length?(l=b,a):l},a.state=function(b){return arguments.length?(m=b,a):m},a.noData=function(b){return arguments.length?(n=b,a):n},a},c.models.scatter=function(){function a(c){return c.each(function(a){function c(){if(!t)return!1;var c,e=d3.merge(a.map(function(a,b){return a.values.map(function(a,c){return[i(l(a,c))*(Math.random()/1e12+1),j(m(a,c))*(Math.random()/1e12+1),b,c,a]}).filter(function(a,b){return u(a[4],b)})}));if(G===!0){if(y){var g=V.select("defs").selectAll(".nv-point-clips").data([h]).enter();g.append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+h);var k=V.select("#nv-points-clip-"+h).selectAll("circle").data(e);k.enter().append("circle").attr("r",z),k.exit().remove(),k.attr("cx",function(a){return a[0]}).attr("cy",function(a){return a[1]}),V.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+h+")")}e.push([i.range()[0]-20,j.range()[0]-20,null,null]),e.push([i.range()[1]+20,j.range()[1]+20,null,null]),e.push([i.range()[0]-20,j.range()[0]+20,null,null]),e.push([i.range()[1]+20,j.range()[1]-20,null,null]);var n=d3.geom.polygon([[-10,-10],[-10,f+10],[d+10,f+10],[d+10,-10]]),o=d3.geom.voronoi(e).map(function(a,b){return{data:n.clip(a),series:e[b][2],point:e[b][3]}}),p=V.select(".nv-point-paths").selectAll("path").data(o);p.enter().append("path").attr("class",function(a,b){return"nv-path-"+b}),p.exit().remove(),p.attr("d",function(a){return"M"+a.data.join("L")+"Z"}),p.on("click",function(c){if(L)return 0;var d=a[c.series],e=d.values[c.point];F.elementClick({point:e,series:d,pos:[i(l(e,c.point))+b.left,j(m(e,c.point))+b.top],seriesIndex:c.series,pointIndex:c.point})}).on("mouseover",function(c){if(L)return 0;var d=a[c.series],e=d.values[c.point];F.elementMouseover({point:e,series:d,pos:[i(l(e,c.point))+b.left,j(m(e,c.point))+b.top],seriesIndex:c.series,pointIndex:c.point})}).on("mouseout",function(b,c){if(L)return 0;var d=a[b.series],e=d.values[b.point];F.elementMouseout({point:e,series:d,seriesIndex:b.series,pointIndex:b.point})})}else V.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(c,d){if(L||!a[c.series])return 0;var e=a[c.series],f=e.values[d];F.elementClick({point:f,series:e,pos:[i(l(f,d))+b.left,j(m(f,d))+b.top],seriesIndex:c.series,pointIndex:d})}).on("mouseover",function(c,d){if(L||!a[c.series])return 0;var e=a[c.series],f=e.values[d];F.elementMouseover({point:f,series:e,pos:[i(l(f,d))+b.left,j(m(f,d))+b.top],seriesIndex:c.series,pointIndex:d})}).on("mouseout",function(b,c){if(L||!a[b.series])return 0;var d=a[b.series],e=d.values[c];F.elementMouseout({point:e,series:d,seriesIndex:b.series,pointIndex:c})});L=!1}var e=d-b.left-b.right,Q=f-b.top-b.bottom,R=d3.select(this);a=a.map(function(a,b){return a.values=a.values.map(function(a){return a.series=b,a}),a});var U=A&&B&&C?[]:d3.merge(a.map(function(a){return a.values.map(function(a,b){return{x:l(a,b),y:m(a,b),size:n(a,b)}})}));i.domain(A||d3.extent(U.map(function(a){return a.x}).concat(q))),v&&a[0]?i.range([(e*w+e)/(2*a[0].values.length),e-e*(1+w)/(2*a[0].values.length)]):i.range([0,e]),j.domain(B||d3.extent(U.map(function(a){return a.y}).concat(r))).range([Q,0]),k.domain(C||d3.extent(U.map(function(a){return a.size}).concat(s))).range(D||[16,256]);if(i.domain()[0]===i.domain()[1]||j.domain()[0]===j.domain()[1])E=!0;i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]-i.domain()[0]*.01,i.domain()[1]+i.domain()[1]*.01]):i.domain([-1,1])),j.domain()[0]===j.domain()[1]&&(j.domain()[0]?j.domain([j.domain()[0]+j.domain()[0]*.01,j.domain()[1]-j.domain()[1]*.01]):j.domain([-1,1])),H=H||i,I=I||j,J=J||k;var V=R.selectAll("g.nv-wrap.nv-scatter").data([a]),W=V.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+h+(E?" nv-single-point":"")),X=W.append("defs"),Y=W.append("g"),Z=V.select("g");Y.append("g").attr("class","nv-groups"),Y.append("g").attr("class","nv-point-paths"),V.attr("transform","translate("+b.left+","+b.top+")"),X.append("clipPath").attr("id","nv-edge-clip-"+h).append("rect"),V.select("#nv-edge-clip-"+h+" rect").attr("width",e).attr("height",Q),Z.attr("clip-path",x?"url(#nv-edge-clip-"+h+")":""),L=!0;var $=V.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});$.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition($.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),$.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}),d3.transition($).style("fill",function(a,b){return g(a,b)}).style("stroke",function(a,b){return g(a,b)}).style("stroke-opacity",1).style("fill-opacity",.5);if(p){var ba=$.selectAll("circle.nv-point").data(function(a){return a.values});ba.enter().append("circle").attr("cx",function(a,b){return H(l(a,b))}).attr("cy",function(a,b){return I(m(a,b))}).attr("r",function(a,b){return Math.sqrt(k(n(a,b))/Math.PI)}),ba.exit().remove(),d3.transition($.exit().selectAll("path.nv-point")).attr("cx",function(a,b){return i(l(a,b))}).attr("cy",function(a,b){return j(m(a,b))}).remove(),ba.attr("class",function(a,b){return"nv-point nv-point-"+b}),d3.transition(ba).attr("cx",function(a,b){return i(l(a,b))}).attr("cy",function(a,b){return j(m(a,b))}).attr("r",function(a,b){return Math.sqrt(k(n(a,b))/Math.PI)})}else{var ba=$.selectAll("path.nv-point").data(function(a){return a.values});ba.enter().append("path").attr("transform",function(a,b){return"translate("+H(l(a,b))+","+I(m(a,b))+")"}).attr("d",d3.svg.symbol().type(o).size(function(a,b){return k(n(a,b))})),ba.exit().remove(),d3.transition($.exit().selectAll("path.nv-point")).attr("transform",function(a,b){return"translate("+i(l(a,b))+","+j(m(a,b))+")"}).remove(),ba.attr("class",function(a,b){return"nv-point nv-point-"+b}),d3.transition(ba).attr("transform",function(a,b){return"translate("+i(l(a,b))+","+j(m(a,b))+")"}).attr("d",d3.svg.symbol().type(o).size(function(a,b){return k(n(a,b))}))}clearTimeout(K),K=setTimeout(c,300),H=i.copy(),I=j.copy(),J=k.copy()}),a}var b={top:0,right:0,bottom:0,left:0},d=960,f=500,g=c.utils.defaultColor(),h=Math.floor(Math.random()*1e5),i=d3.scale.linear(),j=d3.scale.linear(),k=d3.scale.linear(),l=function(a){return a.x},m=function(a){return a.y},n=function(a){return a.size||1},o=function(a){return a.shape||"circle"},p=!0,q=[],r=[],s=[],t=!0,u=function(a){return!a.notActive},v=!1,w=.1,x=!1,y=!0,z=function(){return 25},A=null,B=null,C=null,D=null,E=!1,F=d3.dispatch("elementClick","elementMouseover","elementMouseout"),G=!0,H,I,J,K,L=!1;return F.on("elementMouseover.point",function(a){t&&d3.select(".nv-chart-"+h+" .nv-series-"+a.seriesIndex+" .nv-point-"+a.pointIndex).classed("hover",!0)}),F.on("elementMouseout.point",function(a){t&&d3.select(".nv-chart-"+h+" .nv-series-"+a.seriesIndex+" .nv-point-"+a.pointIndex).classed("hover",!1)}),a.dispatch=F,a.x=function(b){return arguments.length?(l=d3.functor(b),a):l},a.y=function(b){return arguments.length?(m=d3.functor(b),a):m},a.size=function(b){return arguments.length?(n=d3.functor(b),a):n},a.margin=function(c){return arguments.length?(b.top=typeof c.top!="undefined"?c.top:b.top,b.right=typeof c.right!="undefined"?c.right:b.right,b.bottom=typeof c.bottom!="undefined"?c.bottom:b.bottom,b.left=typeof c.left!="undefined"?c.left:b.left,a):b},a.width=function(b){return arguments.length?(d=b,a):d},a.height=function(b){return arguments.length?(f=b,a):f},a.xScale=function(b){return arguments.length?(i=b,a):i},a.yScale=function(b){return arguments.length?(j=b,a):j},a.zScale=function(b){return arguments.length?(k=b,a):k},a.xDomain=function(b){return arguments.length?(A=b,a):A},a.yDomain=function(b){return arguments.length?(B=b,a):B},a.sizeDomain=function(b){return arguments.length?(C=b,a):C},a.sizeRange=function(b){return arguments.length?(D=b,a):D},a.forceX=function(b){return arguments.length?(q=b,a):q},a.forceY=function(b){return arguments.length?(r=b,a):r},a.forceSize=function(b){return arguments.length?(s=b,a):s},a.interactive=function(b){return arguments.length?(t=b,a):t},a.pointActive=function(b){return arguments.length?(u=b,a):u},a.padData=function(b){return arguments.length?(v=b,a):v},a.padDataOuter=function(b){return arguments.length?(w=b,a):w},a.clipEdge=function(b){return arguments.length?(x=b,a):x},a.clipVoronoi=function(b){return arguments.length?(y=b,a):y},a.useVoronoi=function(b){return arguments.length?(G=b,G===!1&&(y=!1),a):G},a.clipRadius=function(b){return arguments.length?(z=b,a):z},a.color=function(b){return arguments.length?(g=c.utils.getColor(b),a):g},a.shape=function(b){return arguments.length?(o=b,a):o},a.onlyCircles=function(b){return arguments.length?(p=b,a):p},a.id=function(b){return arguments.length?(h=b,a):h},a.singlePoint=function(b){return arguments.length?(E=b,a):E},a},c.models.scatterChart=function(){function a(c){return c.each(function(z){function A(){if(x)return U.select(".nv-point-paths").style("pointer-events","all"),!1;U.select(".nv-point-paths").style("pointer-events","none");var a=d3.mouse(this);o.distortion(w).focus(a[0]),p.distortion(w).focus(a[1]),U.select(".nv-scatterWrap").call(b),U.select(".nv-x.nv-axis").call(d),U.select(".nv-y.nv-axis").call(f),U.select(".nv-distributionX").datum(z.filter(function(a){return!a.disabled})).call(i),U.select(".nv-distributionY").datum(z.filter(function(a){return!a.disabled})).call(j)}var B=d3.select(this),J=this,K=(l||parseInt(B.style("width"))||960)-k.left-k.right,N=(m||parseInt(B.style("height"))||400)-k.top-k.bottom;a.update=function(){a(c)},a.container=this,E.disabled=z.map(function(a){return!!a.disabled});if(!z||!z.length||!z.filter(function(a){return a.values.length}).length){var P=B.selectAll(".nv-noData").data([D]);return P.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),P.attr("x",k.left+K/2).attr("y",k.top+N/2).text(function(a){return a}),a}B.selectAll(".nv-noData").remove(),F=F||o,G=G||p;var Q=B.selectAll("g.nv-wrap.nv-scatterChart").data([z]),R=Q.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+b.id()),T=R.append("g"),U=Q.select("g");T.append("rect").attr("class","nvd3 nv-background"),T.append("g").attr("class","nv-x nv-axis"),T.append("g").attr("class","nv-y nv-axis"),T.append("g").attr("class","nv-scatterWrap"),T.append("g").attr("class","nv-distWrap"),T.append("g").attr("class","nv-legendWrap"),T.append("g").attr("class","nv-controlsWrap"),u&&(g.width(K/2),Q.select(".nv-legendWrap").datum(z).call(g),k.top!=g.height()&&(k.top=g.height(),N=(m||parseInt(B.style("height"))||400)-k.top-k.bottom),Q.select(".nv-legendWrap").attr("transform","translate("+K/2+","+ -k.top+")")),v&&(h.width(180).color(["#444"]),U.select(".nv-controlsWrap").datum(I).attr("transform","translate(0,"+ -k.top+")").call(h)),Q.attr("transform","translate("+k.left+","+k.top+")"),b.width(K).height(N).color(z.map(function(a,b){return a.color||n(a,b)}).filter(function(a,b){return!z[b].disabled})),Q.select(".nv-scatterWrap").datum(z.filter(function(a){return!a.disabled})).call(b);if(q){var V=o.domain()[1]-o.domain()[0];o.domain([o.domain()[0]-q*V,o.domain()[1]+q*V])}if(r){var W=p.domain()[1]-p.domain()[0];p.domain([p.domain()[0]-r*W,p.domain()[1]+r*W])}d.scale(o).ticks(d.ticks()&&d.ticks().length?d.ticks():K/100).tickSize(-N,0),U.select(".nv-x.nv-axis").attr("transform","translate(0,"+p.range()[0]+")").call(d),f.scale(p).ticks(f.ticks()&&f.ticks().length?f.ticks():N/36).tickSize(-K,0),U.select(".nv-y.nv-axis").call(f),s&&(i.getData(b.x()).scale(o).width(K).color(z.map(function(a,b){return a.color||n(a,b)}).filter(function(a,b){return!z[b].disabled})),T.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),U.select(".nv-distributionX").attr("transform","translate(0,"+p.range()[0]+")").datum(z.filter(function(a){return!a.disabled})).call(i)),t&&(j.getData(b.y()).scale(p).width(N).color(z.map(function(a,b){return a.color||n(a,b)}).filter(function(a,b){return!z[b].disabled})),T.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),U.select(".nv-distributionY").attr("transform","translate(-"+j.size()+",0)").datum(z.filter(function(a){return!a.disabled})).call(j)),d3.fisheye&&(U.select(".nv-background").attr("width",K).attr("height",N),U.select(".nv-background").on("mousemove",A),U.select(".nv-background").on("click",function(){x=!x}),b.dispatch.on("elementClick.freezeFisheye",function(){x=!x})),h.dispatch.on("legendClick",function(g,h){g.disabled=!g.disabled,w=g.disabled?0:2.5,U.select(".nv-background").style("pointer-events",g.disabled?"none":"all"),U.select(".nv-point-paths").style("pointer-events",g.disabled?"all":"none"),g.disabled?(o.distortion(w).focus(0),p.distortion(w).focus(0),U.select(".nv-scatterWrap").call(b),U.select(".nv-x.nv-axis").call(d),U.select(".nv-y.nv-axis").call(f)):x=!1,a(c)}),g.dispatch.on("legendClick",function(b,d,f){b.disabled=!b.disabled,z.filter(function(a){return!a.disabled}).length||z.map(function(a){return a.disabled=!1,Q.selectAll(".nv-series").classed("disabled",!1),a}),E.disabled=z.map(function(a){return!!a.disabled}),C.stateChange(E),a(c)}),b.dispatch.on("elementMouseover.tooltip",function(a){d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.pos[1]-N),d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.pos[0]+i.size()),a.pos=[a.pos[0]+k.left,a.pos[1]+k.top],C.tooltipShow(a)}),C.on("tooltipShow",function(a){y&&H(a,J.parentNode)}),C.on("changeState",function(b){typeof b.disabled!="undefined"&&(z.forEach(function(a,c){a.disabled=b.disabled[c]}),E.disabled=b.disabled),c.call(a)}),F=o.copy(),G=p.copy()}),a}var b=c.models.scatter(),d=c.models.axis(),f=c.models.axis(),g=c.models.legend(),h=c.models.legend(),i=c.models.distribution(),j=c.models.distribution(),k={top:30,right:20,bottom:50,left:75},l=null,m=null,n=c.utils.defaultColor(),o=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.xScale(),p=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.yScale(),q=0,r=0,s=!1,t=!1,u=!0,v=!!d3.fisheye,w=0,x=!1,y=!0,z=function(a,b,c){return"<strong>"+b+"</strong>"},A=function(a,b,c){return"<strong>"+c+"</strong>"},B=null,C=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),D="No Data Available.";b.xScale(o).yScale(p),d.orient("bottom").tickPadding(10),f.orient("left").tickPadding(10),i.axis("x"),j.axis("y");var E={},F,G,H=function(g,h){var i=g.pos[0]+(h.offsetLeft||0),j=g.pos[1]+(h.offsetTop||0),l=g.pos[0]+(h.offsetLeft||0),m=p.range()[0]+k.top+(h.offsetTop||0),n=o.range()[0]+k.left+(h.offsetLeft||0),q=g.pos[1]+(h.offsetTop||0),r=d.tickFormat()(b.x()(g.point,g.pointIndex)),s=f.tickFormat()(b.y()(g.point,g.pointIndex));z!=null&&c.tooltip.show([l,m],z(g.series.key,r,s,g,a),"n",1,h,"x-nvtooltip"),A!=null&&c.tooltip.show([n,q],A(g.series.key,r,s,g,a),"e",1,h,"y-nvtooltip"),B!=null&&c.tooltip.show([i,j],B(g.series.key,r,s,g,a),g.value<0?"n":"s",null,h)},I=[{key:"Magnify",disabled:!0}];return b.dispatch.on("elementMouseout.tooltip",function(a){C.tooltipHide(a),d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0),d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",j.size())}),C.on("tooltipHide",function(){y&&c.tooltip.cleanup()}),a.dispatch=C,a.scatter=b,a.legend=g,a.controls=h,a.xAxis=d,a.yAxis=f,a.distX=i,a.distY=j,d3.rebind(a,b,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),a.margin=function(b){return arguments.length?(k.top=typeof b.top!="undefined"?b.top:k.top,k.right=typeof b.right!="undefined"?b.right:k.right,k.bottom=typeof b.bottom!="undefined"?b.bottom:k.bottom,k.left=typeof b.left!="undefined"?b.left:k.left,a):k},a.width=function(b){return arguments.length?(l=b,a):l},a.height=function(b){return arguments.length?(m=b,a):m},a.color=function(b){return arguments.length?(n=c.utils.getColor(b),g.color(n),i.color(n),j.color(n),a):n},a.showDistX=function(b){return arguments.length?(s=b,a):s},a.showDistY=function(b){return arguments.length?(t=b,a):t},a.showControls=function(b){return arguments.length?(v=b,a):v},a.showLegend=function(b){return arguments.length?(u=b,a):u},a.fisheye=function(b){return arguments.length?(w=b,a):w},a.xPadding=function(b){return arguments.length?(q=b,a):q},a.yPadding=function(b){return arguments.length?(r=b,a):r},a.tooltips=function(b){return arguments.length?(y=b,a):y},a.tooltipContent=function(b){return arguments.length?(B=b,a):B},a.tooltipXContent=function(b){return arguments.length?(z=b,a):z},a.tooltipYContent=function(b){return arguments.length?(A=b,a):A},a.state=function(b){return arguments.length?(E=b,a):E},a.noData=function(b){return arguments.length?(D=b,a):D},a},c.models.scatterPlusLineChart=function(){function a(c){return c.each(function(x){function y(){if(v)return S.select(".nv-point-paths").style("pointer-events","all"),!1;S.select(".nv-point-paths").style("pointer-events","none");var a=d3.mouse(this);o.distortion(u).focus(a[0]),p.distortion(u).focus(a[1]),S.select(".nv-scatterWrap").datum(x.filter(function(a){return!a.disabled})).call(b),S.select(".nv-x.nv-axis").call(d),S.select(".nv-y.nv-axis").call(f),S.select(".nv-distributionX").datum(x.filter(function(a){return!a.disabled})).call(i),S.select(".nv-distributionY").datum(x.filter(function(a){return!a.disabled})).call(j)}var z=d3.select(this),H=this,I=(l||parseInt(z.style("width"))||960)-k.left-k.right,J=(m||parseInt(z.style("height"))||400)-k.top-k.bottom;a.update=function(){a(c)},a.container=this,C.disabled=x.map(function(a){return!!a.disabled});if(!x||!x.length||!x.filter(function(a){return a.values.length}).length){var K=z.selectAll(".nv-noData").data([B]);return K.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),K.attr("x",k.left+I/2).attr("y",k.top+J/2).text(function(a){return a}),a}z.selectAll(".nv-noData").remove(),o=b.xScale(),p=b.yScale(),D=D||o,E=E||p;var P=z.selectAll("g.nv-wrap.nv-scatterChart").data([x]),Q=P.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+b.id()),R=Q.append("g"),S=P.select("g");R.append("rect").attr("class","nvd3 nv-background"),R.append("g").attr("class","nv-x nv-axis"),R.append("g").attr("class","nv-y nv-axis"),R.append("g").attr("class","nv-scatterWrap"),R.append("g").attr("class","nv-regressionLinesWrap"),R.append("g").attr("class","nv-distWrap"),R.append("g").attr("class","nv-legendWrap"),R.append("g").attr("class","nv-controlsWrap"),P.attr("transform","translate("+k.left+","+k.top+")"),s&&(g.width(I/2),P.select(".nv-legendWrap").datum(x).call(g),k.top!=g.height()&&(k.top=g.height(),J=(m||parseInt(z.style("height"))||400)-k.top-k.bottom),P.select(".nv-legendWrap").attr("transform","translate("+I/2+","+ -k.top+")")),t&&(h.width(180).color(["#444"]),S.select(".nv-controlsWrap").datum(G).attr("transform","translate(0,"+ -k.top+")").call(h)),b.width(I).height(J).color(x.map(function(a,b){return a.color||n(a,b)}).filter(function(a,b){return!x[b].disabled})),P.select(".nv-scatterWrap").datum(x.filter(function(a){return!a.disabled})).call(b),P.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+b.id()+")");var U=P.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(a){return a}),V=U.enter().append("g").attr("class","nv-regLines").append("line").attr("class","nv-regLine").style("stroke-opacity",0);U.selectAll(".nv-regLines line").attr("x1",o.range()[0]).attr("x2",o.range()[1]).attr("y1",function(a,b){return p(o.domain()[0]*a.slope+a.intercept)}).attr("y2",function(a,b){return p(o.domain()[1]*a.slope+a.intercept)}).style("stroke",function(a,b,c){return n(a,c)}).style("stroke-opacity",function(a,b){return a.disabled||typeof a.slope=="undefined"||typeof a.intercept=="undefined"?0:1}),d.scale(o).ticks(d.ticks()?d.ticks():I/100).tickSize(-J,0),S.select(".nv-x.nv-axis").attr("transform","translate(0,"+p.range()[0]+")").call(d),f.scale(p).ticks(f.ticks()?f.ticks():J/36).tickSize(-I,0),S.select(".nv-y.nv-axis").call(f),q&&(i.getData(b.x()).scale(o).width(I).color(x.map(function(a,b){return a.color||n(a,b)}).filter(function(a,b){return!x[b].disabled})),R.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),S.select(".nv-distributionX").attr("transform","translate(0,"+p.range()[0]+")").datum(x.filter(function(a){return!a.disabled})).call(i)),r&&(j.getData(b.y()).scale(p).width(J).color(x.map(function(a,b){return a.color||n(a,b)}).filter(function(a,b){return!x[b].disabled})),R.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),S.select(".nv-distributionY").attr("transform","translate(-"+j.size()+",0)").datum(x.filter(function(a){return!a.disabled})).call(j)),d3.fisheye&&(S.select(".nv-background").attr("width",I).attr("height",J),S.select(".nv-background").on("mousemove",y),S.select(".nv-background").on("click",function(){v=!v}),b.dispatch.on("elementClick.freezeFisheye",function(){v=!v})),h.dispatch.on("legendClick",function(g,h){g.disabled=!g.disabled,u=g.disabled?0:2.5,S.select(".nv-background").style("pointer-events",g.disabled?"none":"all"),S.select(".nv-point-paths").style("pointer-events",g.disabled?"all":"none"),g.disabled?(o.distortion(u).focus(0),p.distortion(u).focus(0),S.select(".nv-scatterWrap").call(b),S.select(".nv-x.nv-axis").call(d),S.select(".nv-y.nv-axis").call(f)):v=!1,a(c)}),g.dispatch.on("legendClick",function(b,d,f){b.disabled=!b.disabled,x.filter(function(a){return!a.disabled}).length||x.map(function(a){return a.disabled=!1,P.selectAll(".nv-series").classed("disabled",!1),a}),C.disabled=x.map(function(a){return!!a.disabled}),A.stateChange(C),a(c)}),b.dispatch.on("elementMouseover.tooltip",function(a){d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.pos[1]-J),d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.pos[0]+i.size()),a.pos=[a.pos[0]+k.left,a.pos[1]+k.top],A.tooltipShow(a)}),A.on("tooltipShow",function(a){w&&F(a,H.parentNode)}),A.on("changeState",function(b){typeof b.disabled!="undefined"&&(x.forEach(function(a,c){a.disabled=b.disabled[c]}),C.disabled=b.disabled),c.call(a)}),D=o.copy(),E=p.copy()}),a}var b=c.models.scatter(),d=c.models.axis(),f=c.models.axis(),g=c.models.legend(),h=c.models.legend(),i=c.models.distribution(),j=c.models.distribution(),k={top:30,right:20,bottom:50,left:75},l=null,m=null,n=c.utils.defaultColor(),o=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.xScale(),p=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.yScale(),q=!1,r=!1,s=!0,t=!!d3.fisheye,u=0,v=!1,w=!0,x=function(a,b,c){return"<strong>"+b+"</strong>"},y=function(a,b,c){return"<strong>"+c+"</strong>"},z=function(a,b,c,d){return"<h3>"+a+"</h3>"+"<p>"+d+"</p>"},A=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),B="No Data Available.";b.xScale(o).yScale(p),d.orient("bottom").tickPadding(10),f.orient("left").tickPadding(10),i.axis("x"),j.axis("y");var C={},D,E,F=function(g,h){var i=g.pos[0]+(h.offsetLeft||0),j=g.pos[1]+(h.offsetTop||0),l=g.pos[0]+(h.offsetLeft||0),m=p.range()[0]+k.top+(h.offsetTop||0),n=o.range()[0]+k.left+(h.offsetLeft||0),q=g.pos[1]+(h.offsetTop||0),r=d.tickFormat()(b.x()(g.point,g.pointIndex)),s=f.tickFormat()(b.y()(g.point,g.pointIndex));x!=null&&c.tooltip.show([l,m],x(g.series.key,r,s,g,a),"n",1,h,"x-nvtooltip"),y!=null&&c.tooltip.show([n,q],y(g.series.key,r,s,g,a),"e",1,h,"y-nvtooltip"),z!=null&&c.tooltip.show([i,j],z(g.series.key,r,s,g.point.tooltip,g,a),g.value<0?"n":"s",null,h)},G=[{key:"Magnify",disabled:!0}];return b.dispatch.on("elementMouseout.tooltip",function(a){A.tooltipHide(a),d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0),d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",j.size())}),A.on("tooltipHide",function(){w&&c.tooltip.cleanup()}),a.dispatch=A,a.scatter=b,a.legend=g,a.controls=h,a.xAxis=d,a.yAxis=f,a.distX=i,a.distY=j,d3.rebind(a,b,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),a.margin=function(b){return arguments.length?(k.top=typeof b.top!="undefined"?b.top:k.top,k.right=typeof b.right!="undefined"?b.right:k.right,k.bottom=typeof b.bottom!="undefined"?b.bottom:k.bottom,k.left=typeof b.left!="undefined"?b.left:k.left,a):k},a.width=function(b){return arguments.length?(l=b,a):l},a.height=function(b){return arguments.length?(m=b,a):m},a.color=function(b){return arguments.length?(n=c.utils.getColor(b),g.color(n),i.color(n),j.color(n),a):n},a.showDistX=function(b){return arguments.length?(q=b,a):q},a.showDistY=function(b){return arguments.length?(r=b,a):r},a.showControls=function(b){return arguments.length?(t=b,a):t},a.showLegend=function(b){return arguments.length?(s=b,a):s},a.fisheye=function(b){return arguments.length?(u=b,a):u},a.tooltips=function(b){return arguments.length?(w=b,a):w},a.tooltipContent=function(b){return arguments.length?(z=b,a):z},a.tooltipXContent=function(b){return arguments.length?(x=b,a):x},a.tooltipYContent=function(b){return arguments.length?(y=b,a):y},a.state=function(b){return arguments.length?(C=b,a):C},a.noData=function(b){return arguments.length?(B=b,a):B},a},c.models.sparkline=function(){function a(c){return c.each(function(a){var c=d-b.left-b.right,e=f-b.top-b.bottom,g=d3.select(this);h.domain(m||d3.extent(a,j)).range([0,c]),i.domain(n||d3.extent(a,k)).range([e,0]);var p=g.selectAll("g.nv-wrap.nv-sparkline").data([a]),q=p.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline"),v=q.append("g"),w=p.select("g");p.attr("transform","translate("+b.left+","+b.top+")");var x=p.selectAll("path").data(function(a){return[a]});x.enter().append("path"),x.exit().remove(),x.style("stroke",function(a,b){return a.color||l(a,b)}).attr("d",d3.svg.line().x(function(a,b){return h(j(a,b))}).y(function(a,b){return i(k(a,b))}));var y=p.selectAll("circle.nv-point").data(function(a){function b(b){if(b!=-1){var c=a[b];return c.pointIndex=b,c}return null}var c=a.map(function(a,b){return k(a,b)}),d=b(c.lastIndexOf(i.domain()[1])),e=b(c.indexOf(i.domain()[0])),f=b(c.length-1);return[e,d,f].filter(function(a){return a!=null})});y.enter().append("circle"),y.exit().remove(),y.attr("cx",function(a,b){return h(j(a,a.pointIndex))}).attr("cy",function(a,b){return i(k(a,a.pointIndex))}).attr("r",2).attr("class",function(a,b){return j(a,a.pointIndex)==h.domain()[1]?"nv-point nv-currentValue":k(a,a.pointIndex)==i.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),a}var b={top:2,right:0,bottom:2,left:0},d=400,f=32,g=!0,h=d3.scale.linear(),i=d3.scale.linear(),j=function(a){return a.x},k=function(a){return a.y},l=c.utils.getColor(["#000"]),m,n;return a.margin=function(c){return arguments.length?(b.top=typeof c.top!="undefined"?c.top:b.top,b.right=typeof c.right!="undefined"?c.right:b.right,b.bottom=typeof c.bottom!="undefined"?c.bottom:b.bottom,b.left=typeof c.left!="undefined"?c.left:b.left,a):b},a.width=function(b){return arguments.length?(d=b,a):d},a.height=function(b){return arguments.length?(f=b,a):f},a.x=function(b){return arguments.length?(j=d3.functor(b),a):j},a.y=function(b){return arguments.length?(k=d3.functor(b),a):k},a.xScale=function(b){return arguments.length?(h=b,a):h},a.yScale=function(b){return arguments.length?(i=b,a):i},a.xDomain=function(b){return arguments.length?(m=b,a):m},a.yDomain=function(b){return arguments.length?(n=b,a):n},a.animate=function(b){return arguments.length?(g=b,a):g},a.color=function(b){return arguments.length?(l=c.utils.getColor(b),a):l},a},c.models.sparklinePlus=function(){function a(c){return c.each(function(n){function w(){if(k)return;var a=G.selectAll(".nv-hoverValue").data(j),c=a.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);a.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),a.attr("transform",function(a){return"translate("+h(b.x()(n[a],a))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);if(!j.length)return;c.append("line").attr("x1",0).attr("y1",-d.top).attr("x2",0).attr("y2",A),c.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-d.top).attr("text-anchor","end").attr("dy",".9em"),G.select(".nv-hoverValue .nv-xValue").text(l(b.x()(n[j[0]],j[0]))),c.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-d.top).attr("text-anchor","start").attr("dy",".9em"),G.select(".nv-hoverValue .nv-yValue").text(m(b.y()(n[j[0]],j[0])))}function x(){function a(a,c){var d=Math.abs(b.x()(a[0],0)-c),e=0;for(var f=0;f<a.length;f++)Math.abs(b.x()(a[f],f)-c)<d&&(d=Math.abs(b.x()(a[f],f)-c),e=f);return e}if(k)return;var c=d3.mouse(this)[0]-d.left;j=[a(n,Math.round(h.invert(c)))],w()}var y=d3.select(this),z=(f||parseInt(y.style("width"))||960)-d.left-d.right,A=(g||parseInt(y.style("height"))||400)-d.top-d.bottom,B=b.y()(n[n.length-1],n.length-1);a.update=function(){a(c)},a.container=this;if(!n||!n.length){var C=y.selectAll(".nv-noData").data([q]);return C.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),C.attr("x",d.left+z/2).attr("y",d.top+A/2).text(function(a){return a}),a}y.selectAll(".nv-noData").remove(),h=b.xScale(),i=b.yScale();var D=y.selectAll("g.nv-wrap.nv-sparklineplus").data([n]),E=D.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus"),F=E.append("g"),G=D.select("g");F.append("g").attr("class","nv-sparklineWrap"),F.append("g").attr("class","nv-valueWrap"),F.append("g").attr("class","nv-hoverArea"),D.attr("transform","translate("+d.left+","+d.top+")");var H=G.select(".nv-sparklineWrap");b.width(z).height(A),H.call(b);var I=G.select(".nv-valueWrap"),J=I.selectAll(".nv-currentValue").data([B]);J.enter().append("text").attr("class","nv-currentValue").attr("dx",p?-8:8).attr("dy",".9em").style("text-anchor",p?"end":"start"),J.attr("x",z+(p?d.right:0)).attr("y",o?function(a){return i(a)}:0).style("fill",b.color()(n[n.length-1],n.length-1)).text(m(B)),F.select(".nv-hoverArea").append("rect").on("mousemove",x).on("click",function(){k=!k}).on("mouseout",function(){j=[],w()}),G.select(".nv-hoverArea rect").attr("transform",function(a){return"translate("+ -d.left+","+ -d.top+")"}).attr("width",z+d.left+d.right).attr("height",A+d.top)}),a}var b=c.models.sparkline(),d={top:15,right:100,bottom:10,left:50},f=null,g=null,h,i,j=[],k=!1,l=d3.format(",r"),m=d3.format(",.2f"),n=!0,o=!0,p=!1,q="No Data Available.";return a.sparkline=b,d3.rebind(a,b,"x","y","xScale","yScale","color"),a.margin=function(b){return arguments.length?(d.top=typeof b.top!="undefined"?b.top:d.top,d.right=typeof b.right!="undefined"?b.right:d.right,d.bottom=typeof b.bottom!="undefined"?b.bottom:d.bottom,d.left=typeof b.left!="undefined"?b.left:d.left,a):d},a.width=function(b){return arguments.length?(f=b,a):f},a.height=function(b){return arguments.length?(g=b,a):g},a.xTickFormat=function(b){return arguments.length?(l=b,a):l},a.yTickFormat=function(b){return arguments.length?(m=b,a):m},a.showValue=function(b){return arguments.length?(n=b,a):n},a.alignValue=function(b){return arguments.length?(o=b,a):o},a.rightAlignValue=function(b){return arguments.length?(p=b,a):p},a.noData=function(b){return arguments.length?(q=b,a):q},a},c.models.stackedArea=function(){function a(c){return c.each(function(a){var c=d-b.left-b.right,e=f-b.top-b.bottom,k=d3.select(this);p=r.xScale(),q=r.yScale(),a=a.map(function(a,b){return a.values=a.values.map(function(b,c){return b.index=c,b.stackedY=a.disabled?0:j(b,c),b}),a}),a=d3.layout.stack().order(m).offset(l).values(function(a){return a.values}).x(i).y(function(a){return a.stackedY}).out(function(a,b,c){a.display={y:c,y0:b}})(a);var w=k.selectAll("g.nv-wrap.nv-stackedarea").data([a]),x=w.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),y=x.append("defs"),z=x.append("g"),A=w.select("g");z.append("g").attr("class","nv-areaWrap"),z.append("g").attr("class","nv-scatterWrap"),w.attr("transform","translate("+b.left+","+b.top+")"),r.width(c).height(e).x(i).y(function(a){return a.display.y+a.display.y0}).forceY([0]).color(a.map(function(a,b){return a.color||g(a,b)}).filter(function(b,c){return!a[c].disabled}));var B=A.select(".nv-scatterWrap").datum(a.filter(function(a){return!a.disabled}));B.call(r),y.append("clipPath").attr("id","nv-edge-clip-"+h).append("rect"),w.select("#nv-edge-clip-"+h+" rect").attr("width",c).attr("height",e),A.attr("clip-path",o?"url(#nv-edge-clip-"+h+")":"");var C=d3.svg.area().x(function(a,b){return p(i(a,b))}).y0(function(a){return q(a.display.y0)}).y1(function(a){return q(a.display.y+a.display.y0)}).interpolate(n),D=d3.svg.area().x(function(a,b){return p(i(a,b))}).y0(function(a){return q(a.display.y0)}).y1(function(a){return q(a.display.y0)}),E=A.select(".nv-areaWrap").selectAll("path.nv-area").data(function(a){return a});E.enter().append("path").attr("class",function(a,b){return"nv-area nv-area-"+b}).on("mouseover",function(a,b){d3.select(this).classed("hover",!0),s.areaMouseover({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:b})}).on("mouseout",function(a,b){d3.select(this).classed("hover",!1),s.areaMouseout({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:b})}).on("click",function(a,b){d3.select(this).classed("hover",!1),s.areaClick({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:b})}),E.exit().attr("d",function(a,b){return D(a.values,b)}).remove(),E.style("fill",function(a,b){return a.color||g(a,b)}).style("stroke",function(a,b){return a.color||g(a,b)}),E.attr("d",function(a,b){return C(a.values,b)}),r.dispatch.on("elementMouseover.area",function(a){A.select(".nv-chart-"+h+" .nv-area-"+a.seriesIndex).classed("hover",!0)}),r.dispatch.on("elementMouseout.area",function(a){A.select(".nv-chart-"+h+" .nv-area-"+a.seriesIndex).classed("hover",!1)})}),a}var b={top:0,right:0,bottom:0,left:0},d=960,f=500,g=c.utils.defaultColor(),h=Math.floor(Math.random()*1e5),i=function(a){return a.x},j=function(a){return a.y},k="stack",l="zero",m="default",n="linear",o=!1,p,q,r=c.models.scatter(),s=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout");return r.size(2.2).sizeDomain([2.2,2.2]),r.dispatch.on("elementClick.area",function(a){s.areaClick(a)}),r.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top],s.tooltipShow(a)}),r.dispatch.on("elementMouseout.tooltip",function(a){s.tooltipHide(a)}),a.dispatch=s,a.scatter=r,d3.rebind(a,r,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","forceX","forceY","forceSize","clipVoronoi","clipRadius"),a.x=function(b){return arguments.length?(i=d3.functor(b),a):i},a.y=function(b){return arguments.length?(j=d3.functor(b),a):j},a.margin=function(c){return arguments.length?(b.top=typeof c.top!="undefined"?c.top:b.top,b.right=typeof c.right!="undefined"?c.right:b.right,b.bottom=typeof c.bottom!="undefined"?c.bottom:b.bottom,b.left=typeof c.left!="undefined"?c.left:b.left,a):b},a.width=function(b){return arguments.length?(d=b,a):d},a.height=function(b){return arguments.length?(f=b,a):f},a.clipEdge=function(b){return arguments.length?(o=b,a):o},a.color=function(b){return arguments.length?(g=c.utils.getColor(b),a):g},a.offset=function(b){return arguments.length?(l=b,a):l},a.order=function(b){return arguments.length?(m=b,a):m},a.style=function(b){if(!arguments.length)return k;k=b;switch(k){case"stack":a.offset("zero"),a.order("default");break;case"stream":a.offset("wiggle"),a.order("inside-out");break;case"stream-center":a.offset("silhouette"),a.order("inside-out");break;case"expand":a.offset("expand"),a.order("default")}return a},a.interpolate=function(a){return arguments.length?(n=a,n):n},a},c.models.stackedAreaChart=function(){function a(c){return c.each(function(l){var p=d3.select(this),z=this,A=(j||parseInt(p.style("width"))||960)-i.left-i.right,B=(k||parseInt(p.style("height"))||400)-i.top-i.bottom;a.update=function(){a(c)},a.container=this,t.disabled=l.map(function(a){return!!a.disabled});if(!l||!l.length||!l.filter(function(a){return a.values.length}).length){var C=p.selectAll(".nv-noData").data([u]);return C.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),C.attr("x",i.left+A/2).attr("y",i.top+B/2).text(function(a){return a}),a}p.selectAll(".nv-noData").remove(),q=b.xScale(),r=b.yScale();var D=p.selectAll("g.nv-wrap.nv-stackedAreaChart").data([l]),F=D.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),G=D.select("g");F.append("g").attr("class","nv-x nv-axis"),F.append("g").attr("class","nv-y nv-axis"),F.append("g").attr("class","nv-stackedWrap"),F.append("g").attr("class","nv-legendWrap"),F.append("g").attr("class","nv-controlsWrap"),n&&(g.width(A-w),G.select(".nv-legendWrap").datum(l).call(g),i.top!=g.height()&&(i.top=g.height(),B=(k||parseInt(p.style("height"))||400)-i.top-i.bottom),G.select(".nv-legendWrap").attr("transform","translate("+w+","+ -i.top+")"));if(m){var H=[{key:"Stacked",disabled:b.offset()!="zero"},{key:"Stream",disabled:b.offset()!="wiggle"},{key:"Expanded",disabled:b.offset()!="expand"}];h.width(w).color(["#444","#444","#444"]),G.select(".nv-controlsWrap").datum(H).call(h),i.top!=Math.max(h.height(),g.height())&&(i.top=Math.max(h.height(),g.height()),B=(k||parseInt(p.style("height"))||400)-i.top-i.bottom),G.select(".nv-controlsWrap").attr("transform","translate(0,"+ -i.top+")")}D.attr("transform","translate("+i.left+","+i.top+")"),b.width(A).height(B);var I=G.select(".nv-stackedWrap").datum(l);I.call(b),d.scale(q).ticks(A/100).tickSize(-B,0),G.select(".nv-x.nv-axis").attr("transform","translate(0,"+B+")"),G.select(".nv-x.nv-axis").transition().duration(0).call(d),f.scale(r).ticks(b.offset()=="wiggle"?0:B/36).tickSize(-A,0).setTickFormat(b.offset()=="expand"?d3.format("%"):s),G.select(".nv-y.nv-axis").transition().duration(0).call(f),b.dispatch.on("areaClick.toggle",function(b){l.filter(function(a){return!a.disabled}).length===1?l=l.map(function(a){return a.disabled=!1,a}):l=l.map(function(a,c){return a.disabled=c!=b.seriesIndex,a}),t.disabled=l.map(function(a){return!!a.disabled}),v.stateChange(t),a(c)}),g.dispatch.on("legendClick",function(b,d){b.disabled=!b.disabled,l.filter(function(a){return!a.disabled}).length||l.map(function(a){return a.disabled=!1,a}),t.disabled=l.map(function(a){return!!a.disabled}),v.stateChange(t),a(c)}),h.dispatch.on("legendClick",function(d,f){if(!d.disabled)return;H=H.map(function(a){return a.disabled=!0,a}),d.disabled=!1;switch(d.key){case"Stacked":b.style("stack");break;case"Stream":b.style("stream");break;case"Expanded":b.style("expand")}t.style=b.style(),v.stateChange(t),a(c)}),v.on("tooltipShow",function(a){o&&x(a,z.parentNode)}),v.on("changeState",function(d){typeof d.disabled!="undefined"&&(l.forEach(function(a,b){a.disabled=d.disabled[b]}),t.disabled=d.disabled),typeof d.style!="undefined"&&b.style(d.style),c.call(a)})}),a}var b=c.models.stackedArea(),d=c.models.axis(),f=c.models.axis(),g=c.models.legend(),h=c.models.legend(),i={top:30,right:25,bottom:50,left:60},j=null,k=null,l=c.utils.defaultColor(),m=!0,n=!0,o=!0,p=function(a,b,c,d,e){return"<h3>"+a+"</h3>"+"<p>"+c+" on "+b+"</p>"},q,r,s=d3.format(",.2f"),t={style:b.style()},u="No Data Available.",v=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),w=250;d.orient("bottom").tickPadding(7),f.orient("left"),b.scatter.pointActive(function(a){return!!Math.round(b.y()(a)*100)});var x=function(g,h){var i=g.pos[0]+(h.offsetLeft||0),j=g.pos[1]+(h.offsetTop||0),k=d.tickFormat()(b.x()(g.point,g.pointIndex)),l=f.tickFormat()(b.y()(g.point,g.pointIndex)),m=p(g.series.key,k,l,g,a);c.tooltip.show([i,j],m,g.value<0?"n":"s",null,h)};return b.dispatch.on("tooltipShow",function(a){a.pos=[a.pos[0]+i.left,a.pos[1]+i.top],v.tooltipShow(a)}),b.dispatch.on("tooltipHide",function(a){v.tooltipHide(a)}),v.on("tooltipHide",function(){o&&c.tooltip.cleanup()}),a.dispatch=v,a.stacked=b,a.legend=g,a.controls=h,a.xAxis=d,a.yAxis=f,d3.rebind(a,b,"x","y","size","xScale","yScale","xDomain","yDomain","sizeDomain","interactive","offset","order","style","clipEdge","forceX","forceY","forceSize","interpolate"),a.margin=function(b){return arguments.length?(i.top=typeof b.top!="undefined"?b.top:i.top,i.right=typeof b.right!="undefined"?b.right:i.right,i.bottom=typeof b.bottom!="undefined"?b.bottom:i.bottom,i.left=typeof b.left!="undefined"?b.left:i.left,a):i},a.width=function(b){return arguments.length?(j=b,a):getWidth},a.height=function(b){return arguments.length?(k=b,a):getHeight},a.color=function(d){return arguments.length?(l=c.utils.getColor(d),g.color(l),b.color(l),a):l},a.showControls=function(b){return arguments.length?(m=b,a):m},a.showLegend=function(b){return arguments.length?(n=b,a):n},a.tooltip=function(b){return arguments.length?(p=b,a):p},a.tooltips=function(b){return arguments.length?(o=b,a):o},a.tooltipContent=function(b){return arguments.length?(p=b,a):p},a.state=function(b){return arguments.length?(t=b,a):t},a.noData=function(b){return arguments.length?(u=b,a):u},f.setTickFormat=f.tickFormat,f.tickFormat=function(a){return arguments.length?(s=a,f):s},a}})(),function(){function k(){this.returnValue=!1}function l(){this.cancelBubble=!0}var a=0,b=[],c={},d={},e={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},f=/[<>&\"\']/g,g,h=window.setTimeout,i={},j;(function(a){var b=a.split(/,/),c,e,f;for(c=0;c<b.length;c+=2){f=b[c+1].split(/ /);for(e=0;e<f.length;e++)d[f[e]]=b[c]}})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/vnd.rn-realvideo,rv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe");var m={VERSION:"1.5.4",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:d,ua:function(){var a=navigator,b=a.userAgent,c=a.vendor,d,e,f;return d=/WebKit/.test(b),f=d&&c.indexOf("Apple")!==-1,e=window.opera&&window.opera.buildNumber,{windows:navigator.platform.indexOf("Win")!==-1,ie:!d&&!e&&/MSIE/gi.test(b)&&/Explorer/gi.test(a.appName),webkit:d,gecko:!d&&/Gecko/.test(b),safari:f,opera:!!e}}(),typeOf:function(a){return{}.toString.call(a).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},extend:function(a){return m.each(arguments,function(b,c){c>0&&m.each(b,function(b,c){a[c]=b})}),a},cleanName:function(a){var b,c;c=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(b=0;b<c.length;b+=2)a=a.replace(c[b],c[b+1]);return a=a.replace(/\s+/g,"_"),a=a.replace(/[^a-z0-9_\-\.]+/gi,""),a},addRuntime:function(a,c){return c.name=a,b[a]=c,b.push(c),c},guid:function(){var b=(new Date).getTime().toString(32),c;for(c=0;c<5;c++)b+=Math.floor(Math.random()*65535).toString(32);return(m.guidPrefix||"p")+b+(a++).toString(32)},buildUrl:function(a,b){var c="";return m.each(b,function(a,b){c+=(c?"&":"")+encodeURIComponent(b)+"="+encodeURIComponent(a)}),c&&(a+=(a.indexOf("?")>0?"&":"?")+c),a},each:function(a,b){var c,d,e;if(a){c=a.length;if(c===g){for(d in a)if(a.hasOwnProperty(d)&&b(a[d],d)===!1)return}else for(e=0;e<c;e++)if(b(a[e],e)===!1)return}},formatSize:function(a){return a===g||/\D/.test(a)?m.translate("N/A"):a>1073741824?Math.round(a/1073741824,1)+" GB":a>1048576?Math.round(a/1048576,1)+" MB":a>1024?Math.round(a/1024,1)+" KB":a+" b"},getPos:function(a,b){function i(a){var b,c,d=0,e=0;return a&&(c=a.getBoundingClientRect(),b=f.compatMode==="CSS1Compat"?f.documentElement:f.body,d=c.left+b.scrollLeft,e=c.top+b.scrollTop),{x:d,y:e}}var c=0,d=0,e,f=document,g,h;a=a,b=b||f.body;if(a&&a.getBoundingClientRect&&navigator.userAgent.indexOf("MSIE")>0&&f.documentMode<8)return g=i(a),h=i(b),{x:g.x-h.x,y:g.y-h.y};e=a;while(e&&e!=b&&e.nodeType)c+=e.offsetLeft||0,d+=e.offsetTop||0,e=e.offsetParent;e=a.parentNode;while(e&&e!=b&&e.nodeType)c-=e.scrollLeft||0,d-=e.scrollTop||0,e=e.parentNode;return{x:c,y:d}},getSize:function(a){return{w:a.offsetWidth||a.clientWidth,h:a.offsetHeight||a.clientHeight}},parseSize:function(a){var b;return typeof a=="string"&&(a=/^([0-9]+)([mgk]?)$/.exec(a.toLowerCase().replace(/[^0-9mkg]/g,"")),b=a[2],a=+a[1],b=="g"&&(a*=1073741824),b=="m"&&(a*=1048576),b=="k"&&(a*=1024)),a},xmlEncode:function(a){return a?(""+a).replace(f,function(a){return e[a]?"&"+e[a]+";":a}):a},toArray:function(a){var b,c=[];for(b=0;b<a.length;b++)c[b]=a[b];return c},inArray:function(a,b){if(b){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(b,a);for(var c=0,d=b.length;c<d;c++)if(b[c]===a)return c}return-1},addI18n:function(a){return m.extend(c,a)},translate:function(a){return c[a]||a},isEmptyObj:function(a){if(a===g)return!0;for(var b in a)return!1;return!0},hasClass:function(a,b){var c;return a.className==""?!1:(c=new RegExp("(^|\\s+)"+b+"(\\s+|$)"),c.test(a.className))},addClass:function(a,b){m.hasClass(a,b)||(a.className=a.className==""?b:a.className.replace(/\s+$/,"")+" "+b)},removeClass:function(a,b){var c=new RegExp("(^|\\s+)"+b+"(\\s+|$)");a.className=a.className.replace(c,function(a,b,c){return b===" "&&c===" "?" ":""})},getStyle:function(a,b){if(a.currentStyle)return a.currentStyle[b];if(window.getComputedStyle)return window.getComputedStyle(a,null)[b]},addEvent:function(a,b,c){var d,e,f,h;h=arguments[3],b=b.toLowerCase(),j===g&&(j="Plupload_"+m.guid()),a.addEventListener?(d=c,a.addEventListener(b,d,!1)):a.attachEvent&&(d=function(){var a=window.event;a.target||(a.target=a.srcElement),a.preventDefault=k,a.stopPropagation=l,c(a)},a.attachEvent("on"+b,d)),a[j]===g&&(a[j]=m.guid()),i.hasOwnProperty(a[j])||(i[a[j]]={}),e=i[a[j]],e.hasOwnProperty(b)||(e[b]=[]),e[b].push({func:d,orig:c,key:h})},removeEvent:function(a,b){var c,d,e;typeof arguments[2]=="function"?d=arguments[2]:e=arguments[2],b=b.toLowerCase();if(a[j]&&i[a[j]]&&i[a[j]][b])c=i[a[j]][b];else return;for(var f=c.length-1;f>=0;f--)if(c[f].key===e||c[f].orig===d){a.removeEventListener?a.removeEventListener(b,c[f].func,!1):a.detachEvent&&a.detachEvent("on"+b,c[f].func),c[f].orig=null,c[f].func=null,c.splice(f,1);if(d!==g)break}c.length||delete i[a[j]][b];if(m.isEmptyObj(i[a[j]])){delete i[a[j]];try{delete a[j]}catch(h){a[j]=g}}},removeAllEvents:function(a){var b=arguments[1];if(a[j]===g||!a[j])return;m.each(i[a[j]],function(c,d){m.removeEvent(a,d,b)})}};m.Uploader=function(a){function j(){var a,b=0,c;if(this.state==m.STARTED){for(c=0;c<e.length;c++)!a&&e[c].status==m.QUEUED?(a=e[c],a.status=m.UPLOADING,this.trigger("BeforeUpload",a)&&this.trigger("UploadFile",a)):b++;b==e.length&&(this.stop(),this.trigger("UploadComplete",e))}}function k(){var a,b;d.reset();for(a=0;a<e.length;a++)b=e[a],b.size!==g?(d.size+=b.size,d.loaded+=b.loaded):d.size=g,b.status==m.DONE?d.uploaded++:b.status==m.FAILED?d.failed++:d.queued++;d.size===g?d.percent=e.length>0?Math.ceil(d.uploaded/e.length*100):0:(d.bytesPerSec=Math.ceil(d.loaded/((+(new Date)-f||1)/1e3)),d.percent=d.size>0?Math.ceil(d.loaded/d.size*100):0)}var c={},d,e=[],f,i=!1;d=new m.QueueProgress,a=m.extend({chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",filters:[]},a),m.extend(this,{state:m.STOPPED,runtime:"",features:{},files:e,settings:a,total:d,id:m.guid(),init:function(){function u(){var a=i[o++],b,d,e;if(a){b=a.getFeatures(),d=c.settings.required_features;if(d){d=d.split(",");for(e=0;e<d.length;e++)if(!b[d[e]]){u();return}}a.init(c,function(d){d&&d.success?(c.features=b,c.runtime=a.name,c.trigger("Init",{runtime:a.name}),c.trigger("PostInit"),c.refresh()):u()})}else c.trigger("Error",{code:m.INIT_ERROR,message:m.translate("Init error.")})}var c=this,d,i,l,o=0,p;typeof a.preinit=="function"?a.preinit(c):m.each(a.preinit,function(a,b){c.bind(b,a)}),a.page_url=a.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/"),/^(\w+:\/\/|\/)/.test(a.url)||(a.url=a.page_url+a.url),a.chunk_size=m.parseSize(a.chunk_size),a.max_file_size=m.parseSize(a.max_file_size),c.bind("FilesAdded",function(b,d){var f,i,j=0,k,l=a.filters;l&&l.length&&(k=[],m.each(l,function(a){m.each(a.extensions.split(/,/),function(a){/^\s*\*\s*$/.test(a)?k.push("\\.*"):k.push("\\."+a.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),k=new RegExp(k.join("|")+"$","i"));for(f=0;f<d.length;f++){i=d[f],i.loaded=0,i.percent=0,i.status=m.QUEUED;if(k&&!k.test(i.name)){b.trigger("Error",{code:m.FILE_EXTENSION_ERROR,message:m.translate("File extension error."),file:i});continue}if(i.size!==g&&i.size>a.max_file_size){b.trigger("Error",{code:m.FILE_SIZE_ERROR,message:m.translate("File size error."),file:i});continue}e.push(i),j++}if(j)h(function(){c.trigger("QueueChanged"),c.refresh()},1);else return!1}),a.unique_names&&c.bind("UploadFile",function(a,b){var c=b.name.match(/\.([^.]+)$/),d="tmp";c&&(d=c[1]),b.target_name=b.id+"."+d}),c.bind("UploadProgress",function(a,b){b.percent=b.size>0?Math.ceil(b.loaded/b.size*100):100,k()}),c.bind("StateChanged",function(a){if(a.state==m.STARTED)f=+(new Date);else if(a.state==m.STOPPED)for(d=a.files.length-1;d>=0;d--)a.files[d].status==m.UPLOADING&&(a.files[d].status=m.QUEUED,k())}),c.bind("QueueChanged",k),c.bind("Error",function(a,b){b.file&&(b.file.status=m.FAILED,k(),a.state==m.STARTED&&h(function(){j.call(c)},1))}),c.bind("FileUploaded",function(a,b){b.status=m.DONE,b.loaded=b.size,a.trigger("UploadProgress",b),h(function(){j.call(c)},1)});if(a.runtimes){i=[],p=a.runtimes.split(/\s?,\s?/);for(d=0;d<p.length;d++)b[p[d]]&&i.push(b[p[d]])}else i=b;u(),typeof a.init=="function"?a.init(c):m.each(a.init,function(a,b){c.bind(b,a)})},refresh:function(){this.trigger("Refresh")},start:function(){e.length&&this.state!=m.STARTED&&(this.state=m.STARTED,this.trigger("StateChanged"),j.call(this))},stop:function(){this.state!=m.STOPPED&&(this.state=m.STOPPED,this.trigger("CancelUpload"),this.trigger("StateChanged"))},disableBrowse:function(){i=arguments[0]!==g?arguments[0]:!0,this.trigger("DisableBrowse",i)},getFile:function(a){var b;for(b=e.length-1;b>=0;b--)if(e[b].id===a)return e[b]},removeFile:function(a){var b;for(b=e.length-1;b>=0;b--)if(e[b].id===a.id)return this.splice(b,1)[0]},splice:function(a,b){var c;return c=e.splice(a===g?0:a,b===g?e.length:b),this.trigger("FilesRemoved",c),this.trigger("QueueChanged"),c},trigger:function(a){var b=c[a.toLowerCase()],d,e;if(b){e=Array.prototype.slice.call(arguments),e[0]=this;for(d=0;d<b.length;d++)if(b[d].func.apply(b[d].scope,e)===!1)return!1}return!0},hasEventListener:function(a){return!!c[a.toLowerCase()]},bind:function(a,b,d){var e;a=a.toLowerCase(),e=c[a]||[],e.push({func:b,scope:d||this}),c[a]=e},unbind:function(a){a=a.toLowerCase();var b=c[a],d,e=arguments[1];if(b){if(e!==g){for(d=b.length-1;d>=0;d--)if(b[d].func===e){b.splice(d,1);break}}else b=[];b.length||delete c[a]}},unbindAll:function(){var a=this;m.each(c,function(b,c){a.unbind(c)})},destroy:function(){this.stop(),this.trigger("Destroy"),this.unbindAll()}})},m.File=function(a,b,c){var d=this;d.id=a,d.name=b,d.size=c,d.loaded=0,d.percent=0,d.status=0},m.Runtime=function(){this.getFeatures=function(){},this.init=function(a,b){}},m.QueueProgress=function(){var a=this;a.size=0,a.loaded=0,a.uploaded=0,a.failed=0,a.queued=0,a.percent=0,a.bytesPerSec=0,a.reset=function(){a.size=a.loaded=a.uploaded=a.failed=a.queued=a.percent=a.bytesPerSec=0}},m.runtimes={},window.plupload=m}(),function(a,b,c,d){function g(b,c){var d;if("FileReader"in a)d=new FileReader,d.readAsDataURL(b),d.onload=function(){c(d.result)};else return c(b.getAsDataURL())}function h(b,c){var d;if("FileReader"in a)d=new FileReader,d.readAsBinaryString(b),d.onload=function(){c(d.result)};else return c(b.getAsBinary())}function j(a,c,d,f){var h,i,j,k,n=this;g(e[a.id],function(e){h=b.createElement("canvas"),h.style.display="none",b.body.appendChild(h),i=h.getContext("2d"),j=new Image,j.onerror=j.onabort=function(){f({success:!1})},j.onload=function(){var b,g,x,y,z;c.width||(c.width=j.width),c.height||(c.height=j.height),k=Math.min(c.width/j.width,c.height/j.height);if(k<1||k===1&&d==="image/jpeg"){b=Math.round(j.width*k),g=Math.round(j.height*k),h.width=b,h.height=g,i.drawImage(j,0,0,b,g);if(d==="image/jpeg"){y=new l(atob(e.substring(e.indexOf("base64,")+7))),y.headers&&y.headers.length&&(z=new m,z.init(y.get("exif")[0])&&(z.setExif("PixelXDimension",b),z.setExif("PixelYDimension",g),y.set("exif",z.getBinary()),n.hasEventListener("ExifData")&&n.trigger("ExifData",a,z.EXIF()),n.hasEventListener("GpsData")&&n.trigger("GpsData",a,z.GPS())));if(c.quality)try{e=h.toDataURL(d,c.quality/100)}catch(A){e=h.toDataURL(d)}}else e=h.toDataURL(d);e=e.substring(e.indexOf("base64,")+7),e=atob(e),y&&y.headers&&y.headers.length&&(e=y.restore(e),y.purge()),h.parentNode.removeChild(h),f({success:!0,data:e})}else f({success:!1})},j.src=e})}function k(){function c(c,d){var e=a?0:-8*(d-1),f=0,g;for(g=0;g<d;g++)f|=b.charCodeAt(c+g)<<Math.abs(e+g*8);return f}function e(a,c,d){var d=arguments.length===3?d:b.length-c-1;b=b.substr(0,c)+a+b.substr(d+c)}function f(b,c,d){var f="",g=a?0:-8*(d-1),h;for(h=0;h<d;h++)f+=String.fromCharCode(c>>Math.abs(g+h*8)&255);e(f,b,d)}var a=!1,b;return{II:function(b){if(b===d)return a;a=b},init:function(c){a=!1,b=c},SEGMENT:function(a,c,d){switch(arguments.length){case 1:return b.substr(a,b.length-a-1);case 2:return b.substr(a,c);case 3:e(d,a,c);break;default:return b}},BYTE:function(a){return c(a,1)},SHORT:function(a){return c(a,2)},LONG:function(a,b){if(b===d)return c(a,4);f(a,b,4)},SLONG:function(a){var b=c(a,4);return b>2147483647?b-4294967296:b},STRING:function(a,b){var d="";for(b+=a;a<b;a++)d+=String.fromCharCode(c(a,1));return d}}}function l(a){var b={65505:{app:"EXIF",name:"APP1",signature:"Exif "},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE "},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0 "}},c=[],e,f,g=d,h=0,i;e=new k,e.init(a);if(e.SHORT(0)!==65496)return;f=2,i=Math.min(1048576,a.length);while(f<=i){g=e.SHORT(f);if(g>=65488&&g<=65495){f+=2;continue}if(g===65498||g===65497)break;h=e.SHORT(f+2)+2,b[g]&&e.STRING(f+4,b[g].signature.length)===b[g].signature&&c.push({hex:g,app:b[g].app.toUpperCase(),name:b[g].name.toUpperCase(),start:f,length:h,segment:e.SEGMENT(f,h)}),f+=h}return e.init(null),{headers:c,restore:function(a){e.init(a);var b=new l(a);if(!b.headers)return!1;for(var d=b.headers.length;d>0;d--){var g=b.headers[d-1];e.SEGMENT(g.start,g.length,"")}b.purge(),f=e.SHORT(2)==65504?4+e.SHORT(4):2;for(var d=0,h=c.length;d<h;d++)e.SEGMENT(f,0,c[d].segment),f+=c[d].length;return e.SEGMENT()},get:function(a){var b=[];for(var d=0,e=c.length;d<e;d++)c[d].app===a.toUpperCase()&&b.push(c[d].segment);return b},set:function(a,b){var d=[];typeof b=="string"?d.push(b):d=b;for(var e=ii=0,f=c.length;e<f;e++){c[e].app===a.toUpperCase()&&(c[e].segment=d[ii],c[e].length=d[ii].length,ii++);if(ii>=d.length)break}},purge:function(){c=[],e.init(null)}}}function m(){function g(b,c){var g=a.SHORT(b),h,i,j,k,l,m,n,p,r=[],s={};for(h=0;h<g;h++){n=m=b+12*h+2,j=c[a.SHORT(n)];if(j===d)continue;k=a.SHORT(n+=2),l=a.LONG(n+=2),n+=4,r=[];switch(k){case 1:case 7:l>4&&(n=a.LONG(n)+e.tiffHeader);for(i=0;i<l;i++)r[i]=a.BYTE(n+i);break;case 2:l>4&&(n=a.LONG(n)+e.tiffHeader),s[j]=a.STRING(n,l-1);continue;case 3:l>2&&(n=a.LONG(n)+e.tiffHeader);for(i=0;i<l;i++)r[i]=a.SHORT(n+i*2);break;case 4:l>1&&(n=a.LONG(n)+e.tiffHeader);for(i=0;i<l;i++)r[i]=a.LONG(n+i*4);break;case 5:n=a.LONG(n)+e.tiffHeader;for(i=0;i<l;i++)r[i]=a.LONG(n+i*4)/a.LONG(n+i*4+4);break;case 9:n=a.LONG(n)+e.tiffHeader;for(i=0;i<l;i++)r[i]=a.SLONG(n+i*4);break;case 10:n=a.LONG(n)+e.tiffHeader;for(i=0;i<l;i++)r[i]=a.SLONG(n+i*4)/a.SLONG(n+i*4+4);break;default:continue}p=l==1?r[0]:r,f.hasOwnProperty(j)&&typeof p!="object"?s[j]=f[j][p]:s[j]=p}return s}function h(){var c=d,f=e.tiffHeader;return a.II(a.SHORT(f)==18761),a.SHORT(f+=2)!==42?!1:(e.IFD0=e.tiffHeader+a.LONG(f+=2),c=g(e.IFD0,b.tiff),e.exifIFD="ExifIFDPointer"in c?e.tiffHeader+c.ExifIFDPointer:d,e.gpsIFD="GPSInfoIFDPointer"in c?e.tiffHeader+c.GPSInfoIFDPointer:d,!0)}function j(c,d,f){var g,h,j,k=0;if(typeof d=="string"){var l=b[c.toLowerCase()];for(hex in l)if(l[hex]===d){d=hex;break}}g=e[c.toLowerCase()+"IFD"],h=a.SHORT(g);for(i=0;i<h;i++){j=g+12*i+2;if(a.SHORT(j)==d){k=j+8;break}}return k?(a.LONG(k,f),!0):!1}var a,b,e={},f;return a=new k,b={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}},f={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},{init:function(b){return e={tiffHeader:10},b===d||!b.length?!1:(a.init(b),a.SHORT(0)===65505&&a.STRING(4,5).toUpperCase()==="EXIF "?h():!1)},EXIF:function(){var a;a=g(e.exifIFD,b.exif);if(a.ExifVersion&&c.typeOf(a.ExifVersion)==="array"){for(var d=0,f="";d<a.ExifVersion.length;d++)f+=String.fromCharCode(a.ExifVersion[d]);a.ExifVersion=f}return a},GPS:function(){var a;return a=g(e.gpsIFD,b.gps),a.GPSVersionID&&(a.GPSVersionID=a.GPSVersionID.join(".")),a},setExif:function(a,b){return a!=="PixelXDimension"&&a!=="PixelYDimension"?!1:j("exif",a,b)},getBinary:function(){return a.SEGMENT()}}}var e={},f;c.runtimes.Html5=c.addRuntime("html5",{getFeatures:function(){var d,e,g,h,i,j;return e=g=i=j=!1,a.XMLHttpRequest&&(d=new XMLHttpRequest,g=!!d.upload,e=!!d.sendAsBinary||!!d.upload),e&&(h=!!(d.sendAsBinary||a.Uint8Array&&a.ArrayBuffer),i=!(!File||!File.prototype.getAsDataURL&&!a.FileReader||!h),j=!!File&&!!(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),f=c.ua.safari&&c.ua.windows,{html5:e,dragdrop:function(){var a=b.createElement("div");return"draggable"in a||"ondragstart"in a&&"ondrop"in a}(),jpgresize:i,pngresize:i,multipart:i||!!a.FileReader||!!a.FormData,canSendBinary:h,cantSendBlobInFormData:!!(c.ua.gecko&&a.FormData&&a.FileReader&&!FileReader.prototype.readAsArrayBuffer),progress:g,chunks:j,multi_selection:!c.ua.safari||!c.ua.windows,triggerDialog:c.ua.gecko&&a.FormData||c.ua.webkit}},init:function(d,g){function l(a){var b,f,g=[],h,i={};for(f=0;f<a.length;f++){b=a[f];if(i[b.name])continue;i[b.name]=!0,h=c.guid(),e[h]=b,g.push(new c.File(h,b.fileName||b.name,b.fileSize||b.size))}g.length&&d.trigger("FilesAdded",g)}var i,k;i=this.getFeatures();if(!i.html5){g({success:!1});return}d.bind("Init",function(a){var e,f,g=[],h,i,j=a.settings.filters,k,m,n=b.body,q;e=b.createElement("div"),e.id=a.id+"_html5_container",c.extend(e.style,{position:"absolute",background:d.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:d.settings.shim_bgcolor?"":0}),e.className="plupload html5",d.settings.container&&(n=b.getElementById(d.settings.container),c.getStyle(n,"position")==="static"&&(n.style.position="relative")),n.appendChild(e);r:for(h=0;h<j.length;h++){k=j[h].extensions.split(/,/);for(i=0;i<k.length;i++){if(k[i]==="*"){g=[];break r}m=c.mimeTypes[k[i]],m&&c.inArray(m,g)===-1&&g.push(m)}}e.innerHTML='<input id="'+d.id+'_html5"  style="font-size:999px" type="file" accept="'+g.join(",")+'" '+(d.settings.multi_selection&&d.features.multi_selection?'multiple="multiple"':"")+" />",e.scrollTop=100,q=b.getElementById(d.id+"_html5"),a.features.triggerDialog?c.extend(q.style,{position:"absolute",width:"100%",height:"100%"}):c.extend(q.style,{cssFloat:"right",styleFloat:"right"}),q.onchange=function(){l(this.files),this.value=""},f=b.getElementById(a.settings.browse_button);if(f){var s=a.settings.browse_button_hover,t=a.settings.browse_button_active,u=a.features.triggerDialog?f:e;s&&(c.addEvent(u,"mouseover",function(){c.addClass(f,s)},a.id),c.addEvent(u,"mouseout",function(){c.removeClass(f,s)},a.id)),t&&(c.addEvent(u,"mousedown",function(){c.addClass(f,t)},a.id),c.addEvent(b.body,"mouseup",function(){c.removeClass(f,t)},a.id)),a.features.triggerDialog&&c.addEvent(f,"click",function(c){var d=b.getElementById(a.id+"_html5");d&&!d.disabled&&d.click(),c.preventDefault()},a.id)}}),d.bind("PostInit",function(){var a=b.getElementById(d.settings.drop_element);if(a){if(f){c.addEvent(a,"dragenter",function(e){var f,g,h;f=b.getElementById(d.id+"_drop"),f||(f=b.createElement("input"),f.setAttribute("type","file"),f.setAttribute("id",d.id+"_drop"),f.setAttribute("multiple","multiple"),c.addEvent(f,"change",function(){l(this.files),c.removeEvent(f,"change",d.id),f.parentNode.removeChild(f)},d.id),a.appendChild(f)),g=c.getPos(a,b.getElementById(d.settings.container)),h=c.getSize(a),c.getStyle(a,"position")==="static"&&c.extend(a.style,{position:"relative"}),c.extend(f.style,{position:"absolute",display:"block",top:0,left:0,width:h.w+"px",height:h.h+"px",opacity:0})},d.id);return}c.addEvent(a,"dragover",function(a){a.preventDefault()},d.id),c.addEvent(a,"drop",function(a){var b=a.dataTransfer;b&&b.files&&l(b.files),a.preventDefault()},d.id)}}),d.bind("Refresh",function(a){var e,f,g,h,i;e=b.getElementById(d.settings.browse_button),e&&(f=c.getPos(e,b.getElementById(a.settings.container)),g=c.getSize(e),h=b.getElementById(d.id+"_html5_container"),c.extend(h.style,{top:f.y+"px",left:f.x+"px",width:g.w+"px",height:g.h+"px"}),d.features.triggerDialog&&(c.getStyle(e,"position")==="static"&&c.extend(e.style,{position:"relative"}),i=parseInt(c.getStyle(e,"z-index"),10),isNaN(i)&&(i=0),c.extend(e.style,{zIndex:i}),c.extend(h.style,{zIndex:i-1})))}),d.bind("DisableBrowse",function(a,c){var d=b.getElementById(a.id+"_html5");d&&(d.disabled=c)}),d.bind("CancelUpload",function(){k&&k.abort&&k.abort()}),d.bind("UploadFile",function(b,d){function m(a,b,c){var d;if(!File.prototype.slice)return(d=File.prototype.webkitSlice||File.prototype.mozSlice)?d.call(a,b,c):null;try{return a.slice(),a.slice(b,c)}catch(e){return a.slice(b,c-b)}}function o(e){function l(){function G(e){var f=0,j="----pluploadboundary"+c.guid(),m,p="--",v="\r\n",x="";k=new XMLHttpRequest,k.upload&&(k.upload.onprogress=function(a){d.loaded=Math.min(d.size,h+a.loaded-f),b.trigger("UploadProgress",d)}),k.onreadystatechange=function(){var a,f;if(k.readyState==4&&b.state!==c.STOPPED){try{a=k.status}catch(i){a=0}if(a>=400)b.trigger("Error",{code:c.HTTP_ERROR,message:c.translate("HTTP Error."),file:d,status:a});else{if(r){f={chunk:g,chunks:r,response:k.responseText,status:a},b.trigger("ChunkUploaded",d,f),h+=y;if(f.cancelled){d.status=c.FAILED;return}d.loaded=Math.min(d.size,(g+1)*w)}else d.loaded=d.size;b.trigger("UploadProgress",d),e=o=m=x=null,!r||++g>=r?(d.status=c.DONE,b.trigger("FileUploaded",d,{response:k.responseText,status:a})):l()}}};if(b.settings.multipart&&i.multipart){t.name=d.target_name||d.name,k.open("post",F,!0),c.each(b.settings.headers,function(a,b){k.setRequestHeader(b,a)});if(typeof e!="string"&&!!a.FormData){m=new FormData,c.each(c.extend(t,b.settings.multipart_params),function(a,b){m.append(b,a)}),m.append(b.settings.file_data_name,e),k.send(m);return}if(typeof e=="string"){k.setRequestHeader("Content-Type","multipart/form-data; boundary="+j),c.each(c.extend(t,b.settings.multipart_params),function(a,b){x+=p+j+v+'Content-Disposition: form-data; name="'+b+'"'+v+v,x+=unescape(encodeURIComponent(a))+v}),E=c.mimeTypes[d.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",x+=p+j+v+'Content-Disposition: form-data; name="'+b.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(d.name))+'"'+v+"Content-Type: "+E+v+v+e+v+p+j+p+v,f=x.length-e.length,e=x;if(k.sendAsBinary)k.sendAsBinary(e);else if(i.canSendBinary){var z=new Uint8Array(e.length);for(var A=0;A<e.length;A++)z[A]=e.charCodeAt(A)&255;k.send(z.buffer)}return}}F=c.buildUrl(b.settings.url,c.extend(t,b.settings.multipart_params)),k.open("post",F,!0),k.setRequestHeader("Content-Type","application/octet-stream"),c.each(b.settings.headers,function(a,b){k.setRequestHeader(b,a)}),k.send(e)}var o,p,r,t,w,y,E,F=b.settings.url;if(d.status==c.DONE||d.status==c.FAILED||b.state==c.STOPPED)return;t={name:d.target_name||d.name},f.chunk_size&&d.size>f.chunk_size&&(i.chunks||typeof e=="string")?(w=f.chunk_size,r=Math.ceil(d.size/w),y=Math.min(w,d.size-g*w),typeof e=="string"?o=e.substring(g*w,g*w+y):o=m(e,g*w,g*w+y),t.chunk=g,t.chunks=r):(y=d.size,o=e),b.settings.multipart&&i.multipart&&typeof o!="string"&&j&&i.cantSendBlobInFormData&&i.chunks&&b.settings.chunk_size?(j.onload=function(){G(j.result)},j.readAsBinaryString(o)):G(o)}var g=0,h=0,j="FileReader"in a?new FileReader:null;l()}var f=b.settings,g,l;g=e[d.id],i.jpgresize&&b.settings.resize&&/\.(png|jpg|jpeg)$/i.test(d.name)?j.call(b,d,b.settings.resize,/\.png$/i.test(d.name)?"image/png":"image/jpeg",function(a){a.success?(d.size=a.data.length,o(a.data)):i.chunks?o(g):h(g,o)}):!i.chunks&&i.jpgresize?h(g,o):o(g)}),d.bind("Destroy",function(a){var d,e,f=b.body,g={inputContainer:a.id+"_html5_container",inputFile:a.id+"_html5",browseButton:a.settings.browse_button,dropElm:a.settings.drop_element};for(d in g)e=b.getElementById(g[d]),e&&c.removeAllEvents(e,a.id);c.removeAllEvents(b.body,a.id),a.settings.container&&(f=b.getElementById(a.settings.container)),f.removeChild(b.getElementById(g.inputContainer))}),g({success:!0})}})}(window,document,plupload),function(a,b,c,d){function g(){var a;try{a=navigator.plugins["Shockwave Flash"],a=a.description}catch(b){try{a=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(c){a="0.0"}}return a=a.match(/\d+/g),parseFloat(a[0]+"."+a[1])}var e={},f={};c.flash={trigger:function(a,b,c){setTimeout(function(){var d=e[a],f,g;d&&d.trigger("Flash:"+b,c)},0)}},c.runtimes.Flash=c.addRuntime("flash",{getFeatures:function(){return{jpgresize:!0,pngresize:!0,maxWidth:8091,maxHeight:8091,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(a,d){function l(){return b.getElementById(a.id+"_flash")}function m(){if(j++>5e3){d({success:!1});return}f[a.id]===!1&&setTimeout(m,1)}var h,i,j=0,k=b.body;if(g()<10){d({success:!1});return}f[a.id]=!1,e[a.id]=a,h=b.getElementById(a.settings.browse_button),i=b.createElement("div"),i.id=a.id+"_flash_container",c.extend(i.style,{position:"absolute",top:"0px",background:a.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100%",height:"100%"}),i.className="plupload flash",a.settings.container&&(k=b.getElementById(a.settings.container),c.getStyle(k,"position")==="static"&&(k.style.position="relative")),k.appendChild(i),function(){var d,e;d='<object id="'+a.id+'_flash" type="application/x-shockwave-flash" data="'+a.settings.flash_swf_url+'" ',c.ua.ie&&(d+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),d+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+a.settings.flash_swf_url+'" /><param name="flashvars" value="id='+escape(a.id)+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',c.ua.ie?(e=b.createElement("div"),i.appendChild(e),e.outerHTML=d,e=null):i.innerHTML=d}(),m(),h=i=null,a.bind("Destroy",function(a){var d;c.removeAllEvents(b.body,a.id),delete f[a.id],delete e[a.id],d=b.getElementById(a.id+"_flash_container"),d&&k.removeChild(d)}),a.bind("Flash:Init",function(){var e={},g;try{l().setFileFilters(a.settings.filters,a.settings.multi_selection)}catch(h){d({success:!1});return}if(f[a.id])return;f[a.id]=!0,a.bind("UploadFile",function(b,d){var f=b.settings,g=a.settings.resize||{};l().uploadFile(e[d.id],f.url,{name:d.target_name||d.name,mime:c.mimeTypes[d.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:f.chunk_size,width:g.width,height:g.height,quality:g.quality,multipart:f.multipart,multipart_params:f.multipart_params||{},file_data_name:f.file_data_name,format:/\.(jpg|jpeg)$/i.test(d.name)?"jpg":"png",headers:f.headers,urlstream_upload:f.urlstream_upload})}),a.bind("CancelUpload",function(){l().cancelUpload()}),a.bind("Flash:UploadProcess",function(a,b){var d=a.getFile(e[b.id]);d.status!=c.FAILED&&(d.loaded=b.loaded,d.size=b.size,a.trigger("UploadProgress",d))}),a.bind("Flash:UploadChunkComplete",function(a,b){var d,f=a.getFile(e[b.id]);d={chunk:b.chunk,chunks:b.chunks,response:b.text},a.trigger("ChunkUploaded",f,d),f.status!==c.FAILED&&a.state!==c.STOPPED&&l().uploadNextChunk(),b.chunk==b.chunks-1&&(f.status=c.DONE,a.trigger("FileUploaded",f,{response:b.text}))}),a.bind("Flash:SelectFiles",function(b,d){var f,g,h=[],i;for(g=0;g<d.length;g++)f=d[g],i=c.guid(),e[i]=f.id,e[f.id]=i,h.push(new c.File(i,f.name,f.size));h.length&&a.trigger("FilesAdded",h)}),a.bind("Flash:SecurityError",function(b,d){a.trigger("Error",{code:c.SECURITY_ERROR,message:c.translate("Security error."),details:d.message,file:a.getFile(e[d.id])})}),a.bind("Flash:GenericError",function(b,d){a.trigger("Error",{code:c.GENERIC_ERROR,message:c.translate("Generic error."),details:d.message,file:a.getFile(e[d.id])})}),a.bind("Flash:IOError",function(b,d){a.trigger("Error",{code:c.IO_ERROR,message:c.translate("IO error."),details:d.message,file:a.getFile(e[d.id])})}),a.bind("Flash:ImageError",function(b,d){a.trigger("Error",{code:parseInt(d.code,10),message:c.translate("Image error."),file:a.getFile(e[d.id])})}),a.bind("Flash:StageEvent:rollOver",function(d){var e,f;e=b.getElementById(a.settings.browse_button),f=d.settings.browse_button_hover,e&&f&&c.addClass(e,f)}),a.bind("Flash:StageEvent:rollOut",function(d){var e,f;e=b.getElementById(a.settings.browse_button),f=d.settings.browse_button_hover,e&&f&&c.removeClass(e,f)}),a.bind("Flash:StageEvent:mouseDown",function(d){var e,f;e=b.getElementById(a.settings.browse_button),f=d.settings.browse_button_active,e&&f&&(c.addClass(e,f),c.addEvent(b.body,"mouseup",function(){c.removeClass(e,f)},d.id))}),a.bind("Flash:StageEvent:mouseUp",function(d){var e,f;e=b.getElementById(a.settings.browse_button),f=d.settings.browse_button_active,e&&f&&c.removeClass(e,f)}),a.bind("Flash:ExifData",function(b,c){a.trigger("ExifData",a.getFile(e[c.id]),c.data)}),a.bind("Flash:GpsData",function(b,c){a.trigger("GpsData",a.getFile(e[c.id]),c.data)}),a.bind("QueueChanged",function(b){a.refresh()}),a.bind("FilesRemoved",function(a,b){var c;for(c=0;c<b.length;c++)l().removeFile(e[b[c].id])}),a.bind("StateChanged",function(b){a.refresh()}),a.bind("Refresh",function(d){var e,f,g;l().setFileFilters(a.settings.filters,a.settings.multi_selection),e=b.getElementById(d.settings.browse_button),e&&(f=c.getPos(e,b.getElementById(d.settings.container)),g=c.getSize(e),c.extend(b.getElementById(d.id+"_flash_container").style,{top:f.y+"px",left:f.x+"px",width:g.w+"px",height:g.h+"px"}))}),a.bind("DisableBrowse",function(a,b){l().disableBrowse(b)}),d({success:!0})})}})}(window,document,plupload),modulus.views.Log=Backbone.View.extend({template:modulus.tpls.Log,initialize:function(){this.render()},render:function(){var a=this;this.template({entries:this.model.get("data")},function(b,c){a.$el.html(c);var d=a.$("pre").height();a.$el.animate({scrollTop:d},1),modulus.util.preventPageScroll(a.$el.selector),a.trigger("rendered")})}}),modulus.views.ProjectDeploy=Backbone.View.extend({uploader:new plupload.Uploader({runtimes:"html5,flash",multipart:!0,url:"/project/deploy",max_file_size:"1000mb",flash_swf_url:"/plupload.flash.swf",silverlight_xap_url:"/plupload.silverlight.xap",urlstream_upload:!0,filters:[{title:"Zip files",extensions:"zip"}]}),selectButton:"#select-zip",deployButton:".deploy-project-btn",events:{},initialize:function(a){this.events["click "+this.deployButton]="startUpload",this.uploader.settings.browse_button=this.selectButton.substring(1),this.uploader.settings.container=this.$el.attr("id"),this.initializeUploader(),this.guideDiv=this.options.guideDiv||null;if(this.guideDiv!==null){$(this.guideDiv).overlay({top:20,mask:{color:"#1c1c1c",loadSpeed:200,opacity:.5},closeOnClick:!1});var b=this;this.$(".guidelines").click(function(a){$(b.guideDiv).overlay().load()})}},initializeUploader:function(){this.uploader.init();var a=this;this.uploader.bind("FilesAdded",function(b,c){a.selectFile(c[c.length-1].name),a.chosenFile=c[c.length-1]})},selectFile:function(a){a.length>22&&(a=a.substring(0,22)+"..."),this.$el.find(".selected-zip").html(a),this.$el.find(this.deployButton).removeAttr("disabled")},startUpload:function(a){this.model.id||(console.log("model id error"),b.trigger("error","Internal Server error.")),this.uploader.splice(0,this.uploader.files.length-1);if(this.uploader.files.length===1){this.uploader.start(),a.preventDefault(),this.$el.find(this.selectButton).attr("disabled","disabled"),this.$el.find(this.deployButton).attr("disabled","disabled");var b=this;this.progressCheck=setInterval(function(){$.ajax({type:"GET",cache:!1,url:"/project/"+b.model.id+"/progress"}).fail(function(a,c){b.trigger("error",a.state()),clearInterval(b.progressCheck)}).done(function(a){a=JSON.parse(a),a.hasOwnProperty("percent")?(b.trigger("progress",Math.floor(a.percent*100)),a.percent>.99&&b.complete()):a.error&&(b.trigger("error",a.error),clearInterval(b.progressCheck))})},1e3),this.trigger("start")}},complete:function(){clearInterval(this.progressCheck),this.trigger("complete")},reset:function(){this.$el.find(this.selectButton).removeAttr("disabled"),this.$el.find("#progress").empty(),this.$el.find(".selected-zip").empty(),this.uploader.splice()},render:function(){var a=this;modulus.tpls.DeployProject({},function(b,c){a.$el.html(c)})}}),modulus.views.DeployLogs=Backbone.View.extend({looper:null,active:!1,last:!1,logLength:0,start:function(){this.active=!0,this.last=!1,this.update()},get:function(){var a=this;looper=setTimeout(function(){a.update()},1e3)},update:function(a){var b=this;$.ajax({type:"GET",cache:!1,url:"/project/"+b.model.id+"/deployLogs"}).fail(function(a,c){b.trigger("error",a.state())}).done(function(a){b._update(a)})},_update:function(a){typeof a=="string"&&(a=JSON.parse(a));for(var b in a){var c=a[b];this.$(".logs").append(c.substring(this.logLength)),this.logLength=c.length;break}var d=this.$(".logs").height();this.$el.animate({scrollTop:d},1),modulus.util.preventPageScroll(this.$el.selector),this.active?this.get():this.last&&(this.update(),this.last=!1)},closeTheLoop:function(){this.active=!1,this.last=!0},reset:function(){this.$(".logs").text(),this.logLength=0}}),modulus.views.ProjectFileList=Backbone.View.extend({parse:function(a){var b={},c,d;for(var e=0;e<a.length;e++){c=a[e].split("/"),d=null;for(var f=0;f<c.length;f++)d!==null&&f<c.length-1?(d.hasOwnProperty(c[f])||(d[c[f]]={}),d=d[c[f]]):f===c.length-1?(d===null&&(d=b),c[f]!==""&&(d[c[f]]=null)):(b.hasOwnProperty(c[f])||(b[c[f]]={}),d=b[c[f]])}return b=this.sort(b),b},sort:function(a){var b=[],c;for(var d in a)c={},a[d]===null?c[d]=a[d]:c[d]=this.sort(a[d]),b.push(c);var e=0;return b=_.sortBy(b,function(a){e++;for(var c in a){if(a[c]instanceof Array)return e;if(a[c]===null)return b.length+e}}),b},getList:function(a){if(a.length<1)return"Please deploy a project to see a file list.";var b=$("<ul></ul>");for(var c=0;c<a.length;c++)for(var d in a[c])a[c][d]!==null?(b.append($("<li>"+d+"</li>").addClass("dir")),b.append($("<li></li>").html(this.getList(a[c][d])))):b.append($("<li>"+d+"</li>").addClass("file"));return b},render:function(){this.$el.html(this.getList(this.parse(this.model.get("fileList")))),this.$(".dir").click(function(a){$(this).find("+ li").toggle()}),this.$(".dir + li").hide()}}),modulus.views.Steps=Backbone.View.extend({totalSteps:1,currentStep:0,time:0,totalTime:0,timer:null,initialize:function(a){this.completeTemplate=a.completeTemplate||null,this.template=a.template||null},start:function(){this.currentStep=1,this.update(1,0);var a=this;this.timer=setInterval(function(){a.time++,a.updateTime(a.currentStep,a.time)},1e3)},update:function(a,b){if(typeof a!="number")return;if(this.currentStep===this.totalSteps&&b===100){this.complete();return}if(a!==this.currentStep){this.updateTime(this.currentStep,this.time),this.totalTime+=this.time,this.time=0;if(a>this.currentStep&&this.currentStep>0)for(var c=this.currentStep;c<a;c++)this.$el.find("#step"+c).removeClass("current").addClass("complete"),this.updateProgress(c,100),this.$el.find("#step"+c+" .time").text()===""&&this.updateTime(c,0);this.currentStep=a}this.updateProgress(a,b),this.$el.find("#step"+a).addClass("current")},updateProgress:function(a,b){var c=this.$el.find("#step"+a);c.find(".progress").css("width",b+"%"),c.find(".percent").text(b+"%")},updateTime:function(a,b){this.$el.find("#step"+a+" .time").text(b+"s")},complete:function(){this.$el.find("div").addClass("complete");for(var a=1;a<=this.totalSteps;a++)this.updateProgress(a,100),this.$el.find("#step"+a+" .time").text()===""&&this.updateTime(a,0);clearInterval(this.timer);if(this.completeTemplate!==null){var b=this;this.completeTemplate({},function(a,c){b.$el.html(c)})}this.trigger("complete")},reset:function(a){this.currentStep=a,this.time=0,this.totalTime=0,this.$("div,span").removeClass("complete");for(var b=1;b<=this.totalSteps;b++)this.$("#step"+b+" .progress").css("width","0px"),this.$("#step"+b+" .percent").text("0%")},render:function(a){this.reset();if(this.template!==null){var b=this;this.template({statuses:a},function(a,c){b.$el.html(c)})}}}),mod.d3.ProjectSummaryGraph=function(){function z(f){return f.each(function(f){var h=d3.select(this),i=this,j=(d||parseInt(h.style("width"))||960)-a.left-a.right,k=(e||parseInt(h.style("height"))||400)-a.top-a.bottom,z=f.filter(function(a){return!a.disabled&&a.yAxis=="cpu"}),A=f.filter(function(a){return!a.disabled&&a.yAxis=="memory"}),B=f.filter(function(a){return!a.disabled&&a.yAxis=="response"}),C=z.map(function(a){return a.values.map(function(a,b){return{x:a.x,y:a.y}})}),D=A.map(function(a){return a.values.map(function(a,b){return{x:a.x,y:a.y}})}),E=B.map(function(a){return a.values.map(function(a,b){return{x:a.x,y:a.y}})});l.domain(d3.extent(d3.merge(C.concat(D,E)),function(a){return a.x})).range([0,j]);var F=h.selectAll("g.wrap.multiChart").data([f]),G=F.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");G.append("g").attr("class","x axis"),G.append("g").attr("class","y1 axis"),G.append("g").attr("class","y2 axis"),G.append("g").attr("class","responseWrap"),G.append("g").attr("class","memoryWrap"),G.append("g").attr("class","cpuWrap"),G.append("g").attr("class","legendWrap");var H=F.select("g");v.width(j),H.select(".legendWrap").datum(f.map(function(a){return a.originalKey=a.originalKey===undefined?a.key:a.originalKey,a.key=a.originalKey,a})).call(v),a.top!=v.height()&&(a.top=v.height(),k=(e||parseInt(h.style("height"))||400)-a.top-a.bottom),H.select(".legendWrap").attr("transform","translate(0,"+(k+10+(a.bottom||0)-(a.top||0))+")"),p.width(j-b*2).height(k).interpolate("monotone").color([z[0].color||c[0]]),q.width(j-b*2).height(k).interpolate("monotone").color([A[0].color||c[1]]),r.width(j-b*2).height(k).color([B[0].color||c[2]]),H.attr("transform","translate("+a.left+","+a.top+")"),H.select(".legendWrap g").attr("transform",""),H.select(".legendWrap g g").attr("transform","");var I=H.select(".responseWrap").attr("transform","translate("+b+",0)").datum(B),J=H.select(".cpuWrap").attr("transform","translate("+b+",0)").datum(z),K=H.select(".memoryWrap").attr("transform","translate("+b+",0)").datum(A);o.domain(d3.extent(d3.merge(E),function(a){return a.y})).range([0,k]),o.domain()[1]<5&&o.domain([o.domain()[0],o.domain()[1]+5]),m.domain([0,100]).range([0,k]),n.domain(d3.extent(d3.merge(D),function(a){return a.y})).range([0,k]).clamp(!0);var L=n.domain();L[1]<4&&(L[1]=4),n.domain([L[0]-L[0]*.1,L[1]+L[1]*.1]);var M=d3.min(n.domain())||0,N=d3.max(n.domain())||0;p.yDomain(m.domain()),q.yDomain(n.domain()),r.yDomain(o.domain()),d3.transition(I).call(r),d3.transition(J).call(p),d3.transition(K).call(q),d3.select(".memoryWrap path.nv-line").style("stroke-width",(A[0].width||3)+"px"),d3.select(".cpuWrap path.nv-line").style("stroke-width",(z[0].width||3)+"px"),d3.selectAll("responseWrap rect.nv-bar").attr("width",2),s.ticks(j/100).tickSize(5,0,5).tickFormat(function(a){return x(new Date(a))}),H.select(".x.axis").attr("transform","translate(0,"+k+")"),d3.transition(H.select(".x.axis")).call(s),H.selectAll(".x.axis text").attr("y",10),t.ticks(5).tickSize(5,0,5).tickFormat(function(a,b){if(a===o.domain()[0])return;return B[0].format(a)}),d3.transition(H.select(".y1.axis")).call(t),u.tickValues([25,50,75,100]).tickSize(5,0,5).tickFormat(function(a,b){if(a===0)return;var c=z[0].format(a);return c+=" "+A[0].format(N-(N-M)*((100-a)/100)),c}),d3.transition(H.select(".y2.axis")).call(u),H.select(".y2.axis").attr("transform","translate("+l.range()[1]+",0)"),H.selectAll(".y1.axis text").each(function(a){var b=d3.select(this),c=b.text();b.text("").append("tspan").text(c).attr("x",-11)}),H.selectAll(".y2.axis text").each(function(a){var b=d3.select(this),c=b.text().split(" ");b.text(""),c.length===2&&(b.append("tspan").text(c[0]).attr("x",10),b.append("tspan").text(c[1]).attr("x",10).attr("dy",10))}),H.selectAll(".legendWrap .nv-series").each(function(){var a=d3.select(this),b=a.select("circle");if(b.empty())return;var c=b.style("fill");b.remove(),a.insert("rect",":first-child").attr("width",12).attr("height",12).attr("x",0).attr("y",0).style("fill",c),a.select("text").attr("dx",15).attr("dy",10)}),w.on("tooltipShow",function(a){g&&y(a,i.parentNode)})}),z.update=function(){z(f)},z.container=this,z}var a={top:30,right:60,bottom:50,left:50},b=8,c=d3.scale.category20().range(),d=null,e=null,f=!0,g=!0,h=function(a,b,c,d,e){return c+" @ "+b},i,j,k=d3.time.format("%I:%M %p"),l=d3.scale.linear(),m=d3.scale.linear(),n=d3.scale.linear(),o=d3.scale.pow(),p=nv.models.line().yScale(m),q=nv.models.line().yScale(n),r=nv.models.multiBar().stacked(!1).yScale(o),s=nv.models.axis().scale(l).orient("bottom").tickPadding(5),t=nv.models.axis().scale(o).orient("left"),u=nv.models.axis().scale(m).orient("right"),v=nv.models.legend().height(30),w=d3.dispatch("tooltipShow","tooltipHide"),x=function(a){var b=k(a);return b.replace(/^0/,"")},y=function(a,b){var c=a.pos[0]+(b.offsetLeft||0),d=a.pos[1]+(b.offsetTop||0),e=x(new Date(a.point.x)),f=a.series.format(a.point.y),g=h(a.series.key,e,f,a,z);nv.tooltip.show([c,d],g,undefined,undefined,b.offsetParent)};return p.dispatch.on("elementMouseover.tooltip",function(b){b.pos=[b.pos[0]+a.left,b.pos[1]+a.top],w.tooltipShow(b)}),p.dispatch.on("elementMouseout.tooltip",function(a){w.tooltipHide(a)}),q.dispatch.on("elementMouseover.tooltip",function(b){b.pos=[b.pos[0]+a.left,b.pos[1]+a.top],w.tooltipShow(b)}),q.dispatch.on("elementMouseout.tooltip",function(a){w.tooltipHide(a)}),r.dispatch.on("elementMouseover.tooltip",function(b){b.pos=[b.pos[0]+a.left,b.pos[1]+a.top],w.tooltipShow(b)}),r.dispatch.on("elementMouseout.tooltip",function(a){w.tooltipHide(a)}),p.dispatch.on("elementMouseover.tooltip",function(b){b.pos=[b.pos[0]+a.left,b.pos[1]+a.top],w.tooltipShow(b)}),p.dispatch.on("elementMouseout.tooltip",function(a){w.tooltipHide(a)}),q.dispatch.on("elementMouseover.tooltip",function(b){b.pos=[b.pos[0]+a.left,b.pos[1]+a.top],w.tooltipShow(b)}),q.dispatch.on("elementMouseout.tooltip",function(a){w.tooltipHide(a)}),w.on("tooltipHide",function(){g&&nv.tooltip.cleanup()}),z.dispatch=w,z.cpu=p,z.memory=q,z.response=r,z.xAxis=s,z.leftAxis=t,z.rightAxis=u,z.x=function(a){return arguments.length?(getX=a,p.x(a),r.x(a),z):getX},z.y=function(a){return arguments.length?(getY=a,p.y(a),r.y(a),z):getY},z.margin=function(b){return arguments.length?(a=b,z):a},z.width=function(a){return arguments.length?(d=a,z):d},z.height=function(a){return arguments.length?(e=a,z):e},z.color=function(a){return arguments.length?(c=a,v.color(a),z):c},z.showLegend=function(a){return arguments.length?(f=a,z):f},z.tooltips=function(a){return arguments.length?(g=a,z):g},z.tooltipContent=function(a){return arguments.length?(h=a,z):h},z},project.get("status").name==="NONE"&&($(".no-status").removeClass("hidden"),$(".widget:not(.deploy)").hide());var scaleConfirm=new modulus.widgets.QuickConfirm({el:$("#scaleConfirm"),model:project}),pusView=new modulus.views.number({model:project,property:"puCount",el:".pus",preText:"You are currently using",postText:"Servo(s)",widget:new modulus.widgets.slider({min:1,max:10,step:1,progress:!0,confirm:!0})}),scaling=!1;project.on("change:puCount",function(){pusView.widget.confirmed&&!scaling&&(pusView.update(project.get("puCount")),pusView.widget.confirmed=!0,pusView.widget.ov=pusView.widget.v,pusView.render())}),scaleConfirm.on("ok",function(){$.ajax({type:"POST",cache:!1,url:"/project/"+project.id+"/scale",data:{instances:pusView.widget.v}}).fail(function(a,b){pusView.error("There was an issue scaling your project."),scaling=!1}).done(function(a){a=JSON.parse(a),a.error&&pusView.error(a.error)}),scaleConfirm.close(!0)}),scaleConfirm.on("closed",function(){scaling=!1}),scaleConfirm.on("cancel",function(){scaling=!1}),pusView.widget.on("apply",function(a){scaling=!0,scaleConfirm.open("Scale project to "+a+" servo(s)?")}),pusView.render();var storeView=new modulus.views.number({model:project,property:"files.size",preText:"You are currently using",postText:"of Storage",el:".storage",format:function(a){var b=2,c=modulus.util.convert.bytes(a,b);return c.unit==="b"?c={value:0,unit:"mb"}:c.unit==="kb"&&(c={value:(c.value/1024).toFixed(b),unit:"mb"}),c}}),log=new modulus.models.Log({id:project.id}),dbs=new modulus.collections.Database;dbs.reset(modulus.data.dbs);var dbSize=0;dbs.each(function(a){dbSize+=a.get("stats").storageSize}),project.set({storage:{file:project.get("size"),db:dbSize}});var updateStorage=function(){storeView.render()};updateStorage(),project.on("change:storage",function(){updateStorage()});var deployLogs=new modulus.views.DeployLogs({el:$("#deployStatus .deploy-logs"),model:project}),uploadView=new modulus.views.ProjectDeploy({model:project,el:".deploy-files",guideDiv:"#guidelines"}),deploySteps=new modulus.views.Steps({el:"#deployStatus",template:modulus.tpls.DeployStatus});deploySteps.totalSteps=3,$("#deployPopup").overlay({top:40,mask:{color:"#555",loadSpeed:200,opacity:.79},closeOnClick:!1});var uploading=!0,deployComplete=!1;uploadView.on("start",function(){uploading=!0,project.set("status","UPLOADING"),deploySteps.render(project.statuses),deploySteps.reset(1),$("#deployStatus .deploy-logs").hide(),deployLogs.$el=$("#deployStatus .deploy-logs"),deployLogs.reset(),deployComplete=!1,$("#deployPopup").css("height","280px").overlay().load(),$("#deployPopup #tbox:first").fadeOut(),$("#deployPopup .close").removeAttr("disabled"),$("#deployPopup #url").hide(),deploySteps.start()}),uploadView.on("progress",function(a){deploySteps.update(1,a)}),project.on("change:status",function(){project.get("status").name==="NONE"?($(".no-status").removeClass("hidden"),$(".widget:not(.deploy)").hide()):($(".no-status").addClass("hidden"),$(".widget:not(.deploy)").show());if(deployComplete===!0)return;deploySteps.currentStep>0&&(project.get("status").name!=="UPLOADING"&&(project.get("status").name==="DEPLOYING"&&!deployLogs.active?(deploySteps.update(2,0),$("#deployPopup").animate({height:480},500,function(){$("#deployStatus .deploy-logs").fadeIn(250)}),deployLogs.start()):uploading||deploySteps.update(project.get("status").step,0)),project.get("status").name==="RUNNING"&&(uploading||(stats.fetch(),deployLogs.closeTheLoop(),deploySteps.update(3,100))))}),uploadView.on("error",function(a){deployComplete=!0});var fetcher=function(){project.on("fetch:error",function(a){deployComplete=!0})};uploadView.on("complete",function(){fetcher(),uploading=!1}),deploySteps.on("complete",function(){var a=new modulus.widgets.Tweetbox({el:$("#deployPopup #tbox"),titleSize:16,height:100,"default":"I just deployed an app on @OnModulus. Check it out at http://"+project.get("domain")});a.$el.removeClass("complete"),a.on("tweet",function(a){_metrics.trigger("Social:Tweet",user.get("email"),a)}),$("#deployPopup").animate({height:690},500,function(){$("#deployPopup #tbox iframe:first").width(570).height(180),$("#deployPopup #tbox:first").fadeIn(250),$("#deployPopup #url").fadeIn(250)}),$("#deployPopup #url #urlLink").attr("href","http://"+project.get("domain")).html(project.get("domain")),log.fetch({success:function(){logView.render()}}),deployComplete=!0,uploadView.reset()});var filesView=new modulus.views.ProjectFileList({el:".files-list .files",model:project});filesView.render(),project.on("change:fileList",function(){this.render()},filesView);var tooltipDateFormatter=d3.time.format("%I:%M:%S %p"),tooltipText=function(a){var b=new Date(a.time);return a.value.toFixed(1)+" ms @ "+tooltipDateFormatter(b)},stats=new modulus.collections.Stats,stat=new modulus.models.Stats({label:"CPU",stat:"servo_cpu_0",id:project.id,units:"ms",ref:!0});stat.set({visual:{yaxis:"cpu",color:"rgb(0,182,149)",format:function(a){return a.toFixed()+"%"}}}),stats.add(stat),stat=new modulus.models.Stats({label:"Memory",stat:"servo_mem_0",id:project.id,units:"ms",ref:!0}),stat.set({visual:{yaxis:"memory",color:"rgb(154,200,121)",format:function(a){var b=modulus.util.convert.bytes(a*1024,0);return b.value+b.unit.toUpperCase()}}}),stats.add(stat),stat=new modulus.models.Stats({label:"Response Time",stat:"servo_response_0",id:project.id,units:"ms"}),stat.set({visual:{yaxis:"response",color:"rgb(91,102,126)",format:function(a){return a.toFixed()+"ms"}}}),stats.add(stat);var goGraph=function(){$(".metric-graph svg").empty();var a=[];for(var b=0;b<stats.models.length;b++)a.push({key:stats.at(b).get("label"),yAxis:stats.at(b).get("visual").yaxis,color:stats.at(b).get("visual").color,width:stats.at(b).get("visual").width,disabled:!1,values:_.map(stats.at(b).get("rawData"),function(a){return{x:(new Date(a.time)).valueOf(),y:a.value||0}}),format:stats.at(b).get("visual").format});nv.addGraph(function(){var b=mod.d3.ProjectSummaryGraph().color(d3.scale.category10().range());return d3.select(".metric-graph svg").datum(a).transition().duration(500).call(b),b})};stats.on("loaded",goGraph),project.get("status").name!=="NONE"&&stats.fetch();var logView=new modulus.views.Log({el:".logs-container .logs",model:log,limit:5});log.fetch({success:function(){logView.render()}}),project.on("change",function(){if(project.hasChanged("status")){var a=project.get("domain");$("div.project-status").removeClass().addClass("project-status").addClass(project.get("status").text).html(project.get("status").text),project.get("status").name==="RUNNING"||project.get("status").name==="SCALING"?(pusView.render(),storeView.render(),filesView.render()):a="";if(project.get("status").name==="RUNNING"||project.get("status").name==="STOPPED")scaling=!1,log.fetch({success:function(){logView.render()}});$("h2.project-url a").attr("href","http://"+project.get("domain")).html(a)}}),$.ajaxSetup({cache:!1});var fetchInterval=3e3,fetching=!1,fetchAttempted=!1,fetchIt=function(){if(!project.id)return;if(fetching){fetchAttempted=!0;return}fetching=!0,project.fetch({success:function(a,b){typeof b!="object"&&(b=JSON.parse(b)),b.error&&project.trigger("fetch:error",b.error),project.set({storage:{file:project.get("size"),db:dbSize}}),fetched()},error:function(a,b){project.trigger("fetch:error",b),fetched()}})},fetched=function(){fetching=!1,fetchAttempted&&fetchIt(),setTimeout(fetchIt,3e3)};fetchIt();